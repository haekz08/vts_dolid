(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0ccc57f2"],{"0651":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"card bg-light mb-0"},[a("div",{staticClass:"card-header bg-dark text-white d-flex justify-content-between align-items-center"},[a("h6",{staticClass:"mb-0"},[a("font-awesome-icon",{attrs:{icon:"search"}}),t._v(" Employee Search")],1)]),a("div",{staticClass:"card-body bg-white position-relative p-2"},[t.is_saving?a("b-row",{staticClass:"loader",attrs:{"align-v":"center"}},[a("b-col",[a("b-spinner"),a("br"),a("br"),a("strong",[t._v("Loading")])],1)],1):t._e(),a("b-row",{staticClass:"m-0"},[a("b-col",{staticClass:"text-center p-1 bg-success text-white d-flex align-items-center justify-content-center",attrs:{cols:"1"}},[a("font-awesome-icon",{staticClass:"h3 mb-0",attrs:{icon:"search"}})],1),a("b-col",{staticClass:"p-2 bg-white border"},[a("b-form-input",{attrs:{type:"text",debounce:"500",placeholder:"Search...",autocomplete:"off"},model:{value:t.search_key,callback:function(e){t.search_key=e},expression:"search_key"}})],1)],1),t.results.length>0?a("div",{staticClass:"list-group bg-white mt-2",staticStyle:{"max-height":"260px","overflow-y":"auto"}},t._l(t.results,(function(e){return a("a",{staticClass:"list-group-item list-group-item-action",attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.select(e)}}},[t._v(t._s(e.full_name))])})),0):t._e()],1)])])},i=[],r=a("73e4"),n=a("86db"),o={mixins:[r["a"]],components:{NumberFormatComponent:n["a"]},data:function(){return{is_saving:!1,project_modal:!1,search_key:"",results:[]}},watch:{search_key:{immediate:!0,handler:function(){""!=this.search_key&&this.search()}}},created:function(){},methods:{search:function(){var t=this;this.axios.get("maintenance/manpowers/search?search="+this.search_key).then((function(e){t.results=e.data})).catch((function(t){return console.log(t)}))},select:function(t){this.$emit("select",t)}}},c=o,l=a("2877"),d=Object(l["a"])(c,s,i,!1,null,null,null);e["a"]=d.exports},"73e4":function(t,e,a){"use strict";e["a"]={data:function(){return{swal_confirm_submit_data:{title:"Please confirm your submission.",text:"Your changes will be saved after this process.",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, save it!",cancelButtonText:"Wait, im not done yet!"},swal_confirm_delete_data:{title:"Are you sure you want to delete this record?",text:"Note: This action will not be undone.",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete!",cancelButtonText:"No, I dont want to delete it!"},swal_transaction_completed_data:{title:"Transaction Completed!",text:"Data Successfully Saved.",icon:"success",showConfirmButton:!1,timer:1e3},swal_transaction_warning_data:{title:"Warning!",text:"Complete all necessary fields!",icon:"warning"},swal_transaction_error_data:{title:"Error!",text:"Please contact your Administrator.",icon:"error"}}},methods:{swalConfirmSubmit:function(t){this.$swal(this.swal_confirm_submit_data).then((function(e){t(e)}))},swalFieldsRequired:function(){this.$swal.fire("Error!","Please fill out all required fields","error")},swalRequestError:function(){this.$swal.fire(this.swal_transaction_error_data)},swalTransactionCompleted:function(){this.$swal.fire(this.swal_transaction_completed_data)},swalConfirmDelete:function(t){this.$swal(this.swal_confirm_delete_data).then((function(e){t(e)}))},swalTransactionWarning:function(){this.$swal.fire(this.swal_transaction_warning_data)}}}},"86db":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"d-inline text-nowrap"},[t.currency?[t._v("â‚± ")]:t._e(),t._v(t._s(t.input_value.toLocaleString("en-US",{minimumFractionDigits:t.decimal}))+" ")],2)},i=[],r={props:{input_value:{type:[Number,String],default:0,required:!0},decimal:{type:Number,default:2,required:!1},currency:{type:Boolean,default:!0,required:!1}},data:function(){return{}},created:function(){},methods:{}},n=r,o=a("2877"),c=Object(o["a"])(n,s,i,!1,null,null,null);e["a"]=c.exports},c124:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-row",{staticClass:"m-0"},[a("b-col",{staticClass:"p-0"},[a("div",{staticClass:"card bg-light mb-0"},[a("div",{staticClass:"card-header bg-dark text-white"},[a("h6",{staticClass:"mb-0"},[a("font-awesome-icon",{attrs:{icon:"plus-circle"}}),t._v(" Add New Location")],1)]),a("div",{staticClass:"card-body bg-white"},[t.is_saving?a("b-row",{staticClass:"loader",attrs:{"align-v":"center"}},[a("b-col",[a("b-spinner"),a("br"),a("br"),a("strong",[t._v("Loading")])],1)],1):t._e(),a("b-form",{on:{submit:t.save}},[a("b-form-group",{attrs:{label:"Location Name:",description:"This field is required"}},[a("b-form-input",{attrs:{type:"text",required:""},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1),a("div",{staticClass:"text-right"},[a("b-button",{attrs:{type:"submit",variant:"dark",size:"sm"}},[a("font-awesome-icon",{attrs:{icon:"save"}}),t._v(" Save")],1)],1)],1)],1)])])],1)],1)},i=[],r=a("73e4"),n={mixins:[r["a"]],props:{project_location:{type:Object,default:function(){},required:!1}},data:function(){return{form:{id:-1,description:"",project_id:this.$route.params.id},is_saving:!1}},watch:{project_location:{immediate:!0,deep:!0,handler:function(){"undefined"!==typeof this.project_location&&this.get()}}},created:function(){"undefined"!==typeof this.project_location&&this.get()},methods:{get:function(){this.is_saving=!0,this.form=this.project_location,this.is_saving=!1},save:function(){var t=this;event.preventDefault(),this.swalConfirmSubmit((function(e){e.value&&(t.is_saving=!0,t.axios.post("project/locations/save",t.form).then((function(e){t.swalTransactionCompleted(),t.is_saving=!1,t.$emit("addProjectLocation")})).catch((function(e){t.swal_transaction_error_data.text=e.response.data,t.swalRequestError(),t.is_saving=!1})))}))}}},o=n,c=a("2877"),l=Object(c["a"])(o,s,i,!1,null,null,null);e["a"]=l.exports},c799:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.is_saving?a("b-row",{staticClass:"loader",attrs:{"align-v":"center"}},[a("b-col",[a("b-spinner"),a("br"),a("br"),a("strong",[t._v("Loading")])],1)],1):t._e(),a("b-form",{on:{submit:t.save}},[a("b-form-group",{attrs:{label:"Project Title:",description:"This field is required"}},[a("b-form-input",{attrs:{type:"text",required:""},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),a("b-form-group",{attrs:{label:"Description:",description:"This field is required"}},[a("b-form-input",{attrs:{type:"text"},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1),a("b-form-group",{attrs:{label:"Contractor:",description:"This field is optional"}},[a("b-form-input",{attrs:{type:"text"},model:{value:t.form.contractor,callback:function(e){t.$set(t.form,"contractor",e)},expression:"form.contractor"}})],1),a("b-form-group",{attrs:{label:"Manager:",description:"This field is optional"}},[a("b-form-input",{attrs:{type:"text"},model:{value:t.form.manager,callback:function(e){t.$set(t.form,"manager",e)},expression:"form.manager"}})],1),a("b-form-group",{attrs:{label:"Location:",description:"This field is optional"}},[a("b-form-input",{attrs:{type:"text"},model:{value:t.form.location,callback:function(e){t.$set(t.form,"location",e)},expression:"form.location"}})],1),a("b-form-group",{attrs:{label:"Starting Date:",description:"This field is optional"}},[a("b-form-input",{attrs:{type:"date"},model:{value:t.form.starting_date,callback:function(e){t.$set(t.form,"starting_date",e)},expression:"form.starting_date"}})],1),a("b-form-group",{attrs:{label:"Ending Date:",description:"This field is optional"}},[a("b-form-input",{attrs:{type:"date"},model:{value:t.form.ending_date,callback:function(e){t.$set(t.form,"ending_date",e)},expression:"form.ending_date"}})],1),a("b-form-group",{attrs:{label:"Extension Date:",description:"This field is optional"}},[a("b-form-input",{attrs:{type:"number"},model:{value:t.form.extension,callback:function(e){t.$set(t.form,"extension",e)},expression:"form.extension"}})],1),a("b-form-group",{attrs:{label:"Project Price:",description:"This field is optional"}},[a("b-form-input",{attrs:{type:"number",step:"any"},model:{value:t.form.price,callback:function(e){t.$set(t.form,"price",e)},expression:"form.price"}})],1),a("div",{staticClass:"text-right"},[a("b-button",{attrs:{type:"submit",variant:"dark",size:"sm"}},[a("font-awesome-icon",{attrs:{icon:"save"}}),t._v(" Save")],1)],1)],1)],1)},i=[],r=a("73e4"),n={mixins:[r["a"]],props:{project:{type:Object,default:function(){},required:!1}},data:function(){return{form:{id:-1,title:"",description:"",contractor:"",manager:"",location:"",starting_date:"",ending_date:"",extension:"",price:""},is_saving:!1}},watch:{project:{immediate:!0,deep:!0,handler:function(){"undefined"!==typeof this.project&&this.get()}}},created:function(){"undefined"!==typeof this.project&&this.get()},methods:{get:function(){this.is_saving=!0;var t=JSON.parse(JSON.stringify(this.project));t.price=t.price.default,this.form=t,this.is_saving=!1},save:function(){var t=this;event.preventDefault(),this.swalConfirmSubmit((function(e){e.value&&(t.is_saving=!0,t.axios.post("projects/save",t.form).then((function(e){t.swalTransactionCompleted(),t.is_saving=!1,-1==t.form.id&&t.$router.push("/projects/"+e.data.id)})).catch((function(e){t.swal_transaction_error_data.text=e.response.data,t.swalRequestError(),t.is_saving=!1})))}))}}},o=n,c=a("2877"),l=Object(c["a"])(o,s,i,!1,null,null,null);e["a"]=l.exports},c9aa:function(t,e,a){"use strict";var s=a("ebbb"),i=a.n(s);i.a},d8a7:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-card",{attrs:{"no-body":""}},[a("b-tabs",{attrs:{pills:"",card:"",vertical:"","nav-class":"bg-secondary p-2","active-nav-item-class":"bg-dark text-white","nav-wrapper-class":"nav-wrapper-custom-width"}},[a("b-tab",{attrs:{"title-item-class":"mb-2"}},[a("template",{slot:"title"},[a("h6",{staticClass:"mb-0 p-2 d-flex justify-content-between align-items-center"},[a("span",[t._v("Project Details")]),a("div",{staticClass:"text-center",staticStyle:{width:"25px"}},[a("font-awesome-icon",{attrs:{icon:"edit"}})],1)])]),a("b-card-text",[a("b-row",{staticClass:"m-0"},[a("b-col",{staticClass:"p-0",attrs:{sm:"6"}},[a("div",{staticClass:"card bg-light mb-3"},[a("div",{staticClass:"card-header bg-dark text-white"},[a("h6",{staticClass:"mb-0"},[a("font-awesome-icon",{attrs:{icon:"edit"}}),t._v(" Update Project Details")],1)]),a("div",{staticClass:"card-body bg-white"},[a("project-form-component",{attrs:{project:t.project}})],1)])])],1)],1)],2),a("b-tab",{attrs:{"title-item-class":"mb-0",active:""}},[a("template",{slot:"title"},[a("h6",{staticClass:"mb-0 p-2 d-flex justify-content-between align-items-center"},[a("span",[t._v("Project Locations")]),a("div",{staticClass:"text-center",staticStyle:{width:"25px"}},[a("font-awesome-icon",{attrs:{icon:"map-marker"}})],1)])]),a("b-row",{staticClass:"m-0"},[a("b-col",{staticClass:"p-0"},[a("div",{staticClass:"card bg-light"},[a("div",{staticClass:"card-header bg-dark text-white d-flex justify-content-between align-items-center"},[a("h6",{staticClass:"mb-0"},[a("font-awesome-icon",{attrs:{icon:"map-marker"}}),t._v(" Project Locations")],1),a("b-button",{attrs:{variant:"secondary",size:"sm"},on:{click:function(e){t.add_project_location_modal=!0}}},[a("font-awesome-icon",{attrs:{icon:"plus"}}),t._v(" Add New Location ")],1)],1),a("div",{staticClass:"card-body bg-white"},[a("table",{staticClass:"table border mb-0"},[a("thead",{staticClass:"bg-light text-dark"},[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("Location Description")]),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Manpower Expenses")]),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Equipment Expenses")]),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Material Expenses")]),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Other Expenses")]),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Action")])])]),a("tbody",t._l(t.project.project_locations,(function(e,s){return a("tr",[a("th",{attrs:{scope:"row"}},[t._v(t._s(e.description))]),a("td",{staticClass:"text-right"},[a("number-format-component",{attrs:{input_value:Number(e.labor.default)}})],1),a("td",{staticClass:"text-right"},[a("number-format-component",{attrs:{input_value:Number(e.equipment.default)}})],1),a("td",{staticClass:"text-right"},[a("number-format-component",{attrs:{input_value:Number(e.material.default)}})],1),a("td",{staticClass:"text-right"},[a("number-format-component",{attrs:{input_value:Number(e.other_expense.default)}})],1),a("td",{staticClass:"text-center"},[a("router-link",{attrs:{to:{path:String(e.id)},append:""}},[a("b-button",{staticClass:"mr-2",attrs:{type:"submit",size:"sm",variant:"info"}},[a("font-awesome-icon",{attrs:{icon:"edit"}}),t._v(" View")],1)],1),a("b-button",{attrs:{type:"submit",size:"sm",variant:"danger"},on:{click:function(a){return t.deleteRow(e.id)}}},[a("font-awesome-icon",{attrs:{icon:"minus-circle"}}),t._v(" Remove")],1)],1)])})),0)])])])])],1)],2),t.project.is_project_owner?a("b-tab",{attrs:{"title-item-class":"mb-2"}},[a("template",{slot:"title"},[a("h6",{staticClass:"mb-0 p-2 d-flex justify-content-between align-items-center"},[a("span",[t._v("User Access")]),a("div",{staticClass:"text-center",staticStyle:{width:"25px"}},[a("font-awesome-icon",{attrs:{icon:"lock"}})],1)])]),a("b-card-text",[a("b-row",{staticClass:"m-0"},[a("b-col",{staticClass:"p-0",attrs:{sm:"6"}},[a("div",{staticClass:"card bg-light mb-3"},[a("div",{staticClass:"card-header bg-dark text-white"},[a("h6",{staticClass:"mb-0"},[a("font-awesome-icon",{attrs:{icon:"lock"}}),t._v(" Update User Access")],1)]),a("div",{staticClass:"card-body bg-white"},[a("ul",{staticClass:"list-group"},t._l(t.authorized_users,(function(e){return a("li",{staticClass:"list-group-item d-flex justify-content-between align-items-center"},[a("h6",[t._v(t._s(e.full_name))]),a("label",{staticClass:"c-switch c-switch-pill c-switch-success"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.is_selected,expression:"row.is_selected"}],staticClass:"c-switch-input",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.is_selected)?t._i(e.is_selected,null)>-1:e.is_selected},on:{change:function(a){var s=e.is_selected,i=a.target,r=!!i.checked;if(Array.isArray(s)){var n=null,o=t._i(s,n);i.checked?o<0&&t.$set(e,"is_selected",s.concat([n])):o>-1&&t.$set(e,"is_selected",s.slice(0,o).concat(s.slice(o+1)))}else t.$set(e,"is_selected",r)}}}),a("span",{staticClass:"c-switch-slider"})])])})),0),a("div",{staticClass:"text-right mt-3"},[a("b-button",{attrs:{type:"submit",variant:"dark",size:"sm"},on:{click:function(e){return t.save()}}},[a("font-awesome-icon",{attrs:{icon:"save"}}),t._v(" Save")],1)],1)])])])],1)],1)],2):t._e(),t.project.is_project_owner?a("b-tab",{attrs:{"title-item-class":"mb-2"}},[a("template",{slot:"title"},[a("h6",{staticClass:"mb-0 p-2 d-flex justify-content-between align-items-center"},[a("span",[t._v("Indirect Expenses")]),a("div",{staticClass:"text-center",staticStyle:{width:"25px"}},[a("font-awesome-icon",{attrs:{icon:"list"}})],1)])]),a("b-card-text",[a("indirect-expense-component",{attrs:{project:t.project}})],1)],2):t._e(),t.project.is_project_owner?a("b-tab",{attrs:{"title-item-class":"mb-2"}},[a("template",{slot:"title"},[a("h6",{staticClass:"mb-0 p-2 d-flex justify-content-between align-items-center"},[a("span",[t._v("Indirect Logs")]),a("div",{staticClass:"text-center",staticStyle:{width:"25px"}},[a("font-awesome-icon",{attrs:{icon:"list"}})],1)])]),a("b-card-text",[a("indirect-log-component",{attrs:{project:t.project}})],1)],2):t._e()],1)],1),a("b-modal",{attrs:{centered:"",size:"md","body-class":"p-0","hide-footer":!0,"hide-header":!0},model:{value:t.add_project_location_modal,callback:function(e){t.add_project_location_modal=e},expression:"add_project_location_modal"}},[a("project-location-form-component",{on:{addProjectLocation:t.addProjectLocation}})],1)],1)},i=[],r=a("56d7"),n=a("c799"),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("server-side-paginated-table",{ref:"displayTable",attrs:{fields:t.table_settings.fields,api_url:t.table_settings.api_url,delete_url:t.table_settings.delete_url,project_id:t.project.id,top_right_btn_redirect:!1}}),a("b-modal",{attrs:{centered:"",size:"xl","body-class":"p-0","hide-footer":!0,"hide-header":!0},on:{hide:function(e){return t.resetForm()}},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[a("form-component",{attrs:{project:t.project,indirect_expense:t.indirect_expense},on:{save:function(e){return t.refresh()}}})],1)],1)},c=[],l=a("73e4"),d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"card bg-light mb-3"},[a("div",{staticClass:"card-header bg-dark text-white"},[a("b-row",[a("b-col",[t.loading?a("div",[a("strong",[t._v(" Fetching result... ")])]):a("div",[a("font-awesome-icon",{attrs:{icon:"database"}}),a("strong",[t._v(" "+t._s(t.list.total)+" ")]),a("small",[t._v("Result/s found")])],1)]),a("b-col",{staticClass:"text-right"},[t.top_right_btn_redirect?a("router-link",{attrs:{to:"add"}},[a("b-button",{attrs:{variant:"secondary",size:"sm"}},[a("font-awesome-icon",{attrs:{icon:"plus"}}),t._v(" Add New Record ")],1)],1):a("b-button",{attrs:{variant:"secondary",size:"sm"},on:{click:t.clickTopRightBtn}},[a("font-awesome-icon",{attrs:{icon:"plus"}}),t._v(" Add New Record ")],1)],1)],1)],1),a("div",{staticClass:"card-body bg-white"},[a("b-row",{staticClass:"mb-3"},[a("b-col",{attrs:{sm:"2"}},[a("b-form-select",{attrs:{options:t.options,size:"sm"},on:{change:t.changeDisplayNo},model:{value:t.selected_display_no,callback:function(e){t.selected_display_no=e},expression:"selected_display_no"}})],1),a("b-col",{attrs:{sm:"6","offset-sm":"4"}},[a("b-input-group",[a("b-input-group-prepend",[a("b-input-group-text",{staticClass:"bg-dark text-white"},[a("font-awesome-icon",{attrs:{icon:"search"}})],1)],1),a("b-form-input",{staticClass:"form-control",attrs:{type:"text",placeholder:"Search",autocomplete:"off",size:"sm"},nativeOn:{keypress:function(e){return t.searching(e)},keyup:function(e){return t.search(e)}},model:{value:t.search_term,callback:function(e){t.search_term=e},expression:"search_term"}}),a("b-input-group-append",[a("b-button",{staticClass:"bg-dark text-white px-4",attrs:{variant:"dark",size:"sm",disabled:""==t.search_term},on:{click:t.clearSearch}},[a("font-awesome-icon",{attrs:{icon:"times"}})],1)],1)],1)],1)],1),a("b-table",{attrs:{selectable:"",selectedVariant:"info","select-mode":"single",dark:t.dark,hover:t.hover,striped:t.striped,bordered:t.bordered,fixed:t.fixed,responsive:"sm",items:t.table_items,fields:t.captions,busy:t.loading,"show-empty":"",small:"","head-variant":"dark"},on:{"row-dblclicked":t.rowDbClicked},scopedSlots:t._u([{key:"cell(date)",fn:function(e){return[t._v(" "+t._s(e.item.transaction_date.other_formats.format_1)+" | "+t._s(e.item.transaction_time.other_formats.format_1)+" ")]}},{key:"cell(action)",fn:function(e){return[a("div",{staticClass:"text-center"},[a("b-button",{attrs:{variant:"danger",size:"sm"},on:{click:function(a){return t.deleteRow(e.item.id)}}},[a("font-awesome-icon",{attrs:{icon:"minus-circle"}}),t._v(" Delete ")],1)],1)]}}])},[a("div",{staticClass:"text-center  my-2",attrs:{slot:"table-busy"},slot:"table-busy"},[a("br"),a("b-spinner",{staticClass:"align-middle",attrs:{small:""}}),a("br"),a("br"),a("strong",[t._v("Loading")])],1)]),t.list.total>0?a("nav",[a("b-pagination",{staticClass:"mb-0",attrs:{disabled:t.loading,align:"right","total-rows":t.total_rows,"per-page":t.per_page},on:{input:t.getAll},model:{value:t.list.current_page,callback:function(e){t.$set(t.list,"current_page",e)},expression:"list.current_page"}})],1):t._e()],1)])])},u=[],m={name:"server-side-paginated-table",inheritAttrs:!1,mixins:[l["a"]],props:{hover:{type:Boolean,default:!0},striped:{type:Boolean,default:!0},bordered:{type:Boolean,default:!0},small:{type:Boolean,default:!0},fixed:{type:Boolean,default:!0},fields:{type:[Array,Object],default:function(){return[]}},dark:{type:Boolean,default:!1},api_url:{type:String,required:!0},delete_url:{type:String,required:!0},top_right_btn:{type:String,default:"",required:!1},top_right_btn_redirect:{type:Boolean,default:!0,required:!1},project_id:{type:Number,required:!0}},data:function(){return{selected:[],list:{data:[],from:1,to:0,current_page:1,total:0,per_page:1},result:[],loading:!0,searchTimeout:function(){return{type:Function,default:function(){return{}}}},search_term:"",options:[{value:10,text:"Display 10 records"},{value:25,text:"Display 25 records"},{value:50,text:"Display 50 records"},{value:100,text:"Display 100 records"}],selected_display_no:10}},computed:{table_items:function(){return this.list.data},per_page:function(){return parseInt(this.list.per_page)},total_rows:function(){return parseInt(this.list.total)},captions:function(){return this.fields},total_selected:function(){return parseInt(this.selected.length)}},mounted:function(){this.getAll()},created:function(){var t=this;r["bus"].$on("reloadIndirectExpenseTable",(function(){t.getAll()}))},methods:{getAll:function(){var t=this;this.loading=!0,this.axios.get(this.api_url+"?project_id="+this.project_id+"&page="+this.list.current_page+"&per_page="+this.selected_display_no+"&search="+this.search_term).then((function(e){var a=e.data;t.list=a,t.loading=!1})).catch((function(t){return console.log(t)}))},clickTopRightBtn:function(){r["bus"].$emit("serverSidePaginatedTableTopRightBtnClicked")},rowDbClicked:function(t){r["bus"].$emit("serverSidePaginatedTableDbClick",t)},searching:function(){this.loading=!0,clearTimeout(this.searchTimeout)},search:function(){var t=this;this.searchTimeout=setTimeout((function(){t.list.current_page=1,t.getAll(),clearTimeout(t.searchTimeout)}),1e3)},clearSearch:function(){this.search_term="",this.getAll()},changeDisplayNo:function(){this.loading=!0,this.list.current_page=1,this.getAll()},deleteRow:function(t){var e=this;this.swalConfirmDelete((function(a){a.value&&(e.loading=!0,e.axios.delete(e.delete_url,{data:{id:t}}).then((function(t){e.getAll(),e.swal_transaction_completed_data.text="Record successfully deleted.",e.swalTransactionCompleted(),e.loading=!1})).catch((function(t){e.swalRequestError(),e.loading=!1})))}))}}},p=m,f=a("2877"),_=Object(f["a"])(p,d,u,!1,null,null,null),b=_.exports,h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-form",{on:{submit:function(e){return e.preventDefault(),t.save(e)}}},[a("div",{staticClass:"card bg-light mb-0"},[a("div",{staticClass:"card-header bg-dark text-white"},[a("h6",{staticClass:"mb-0"},[a("font-awesome-icon",{attrs:{icon:"plus-circle"}}),t._v(" Add Indirect Expense")],1)]),a("div",{staticClass:"card-body bg-white"},[a("b-row",[a("b-col",{attrs:{cols:"3"}},[a("b-form-group",{attrs:{label:"Transaction Date:",description:"This field is required"}},[a("b-input-group",{attrs:{size:"sm"}},[a("b-form-input",{staticClass:"bg-white text-dark",attrs:{type:"date",required:"",size:"sm",readonly:-1!=t.form.id},model:{value:t.form.transaction_date,callback:function(e){t.$set(t.form,"transaction_date",e)},expression:"form.transaction_date"}})],1)],1)],1),a("b-col",{attrs:{cols:"3"}},[a("b-form-group",{attrs:{label:"Voucher Number:",description:"This field is required"}},[a("b-input-group",{attrs:{size:"sm"}},[a("b-form-input",{staticClass:"bg-white text-dark",attrs:{type:"text",required:"",size:"sm",readonly:-1!=t.form.id},model:{value:t.form.voucher_number,callback:function(e){t.$set(t.form,"voucher_number",e)},expression:"form.voucher_number"}})],1)],1)],1),a("b-col",{attrs:{cols:"3"}},[a("b-form-group",{attrs:{label:"Check Number:",description:"This field is required"}},[a("b-input-group",{attrs:{size:"sm"}},[a("b-form-input",{staticClass:"bg-white text-dark",attrs:{type:"text",required:"",size:"sm",readonly:-1!=t.form.id},model:{value:t.form.check_number,callback:function(e){t.$set(t.form,"check_number",e)},expression:"form.check_number"}})],1)],1)],1),a("b-col",{attrs:{cols:"3"}},[a("b-form-group",{attrs:{label:"Details:",description:"This field is required"}},[a("b-input-group",{attrs:{size:"sm"}},[a("b-form-input",{staticClass:"bg-white text-dark",attrs:{type:"text",required:"",size:"sm",readonly:-1!=t.form.id},model:{value:t.form.details,callback:function(e){t.$set(t.form,"details",e)},expression:"form.details"}})],1)],1)],1)],1),a("div",{staticClass:"card bg-light mb-0"},[a("div",{staticClass:"card-header bg-dark text-white d-flex justify-content-between align-items-center"},[a("h6",{staticClass:"mb-0"},[a("font-awesome-icon",{attrs:{icon:"list"}}),t._v(" Details")],1),-1==t.form.id?a("b-button",{attrs:{variant:"secondary",size:"sm"},on:{click:t.addRow}},[a("font-awesome-icon",{attrs:{icon:"plus-circle"}}),t._v(" Add Row ")],1):t._e()],1),a("div",{staticClass:"card-body bg-white"},[a("table",{staticClass:"table table-bordered table-sm mb-0"},[a("thead",[a("tr",[a("th",[t._v(" Expense Description ")]),a("th",{staticClass:"text-center"},[t._v(" Details ")]),a("th",{staticClass:"text-center"},[t._v(" Amount ")]),-1==t.form.id?a("th",{staticClass:"text-center"},[t._v(" Action ")]):t._e()])]),t.form.indirect_other_expense_usages.length>0?a("tbody",t._l(t.form.indirect_other_expense_usages,(function(e,s){return a("tr",[a("td",[a("b-input-group",{attrs:{size:"sm"},scopedSlots:t._u([-1==t.form.id?{key:"append",fn:function(){return[a("b-button",{attrs:{type:"button",variant:"facebook",size:"sm"},on:{click:function(e){return t.openExpenseModal(s)}}},[a("font-awesome-icon",{attrs:{icon:"search"}}),t._v(" Select")],1)]},proxy:!0}:null],null,!0)},[a("b-form-input",{staticClass:"bg-white text-dark",attrs:{value:""!=typeof e.other_expense.description?e.other_expense.description:"",type:"text",required:"",size:"sm",readonly:""}})],1)],1),a("td",[a("b-form-input",{staticClass:"bg-white text-dark",attrs:{type:"text",required:"",size:"sm",readonly:-1!=t.form.id},model:{value:e.details,callback:function(a){t.$set(e,"details",a)},expression:"indirect_other_expense_usage.details"}})],1),a("td",[a("b-form-input",{staticClass:"bg-white text-dark text-right",attrs:{type:"number",required:"",size:"sm",step:"any",readonly:-1!=t.form.id},model:{value:e.amount,callback:function(a){t.$set(e,"amount",a)},expression:"indirect_other_expense_usage.amount"}})],1),-1==t.form.id?a("td",{staticClass:"text-center"},[a("b-button",{attrs:{type:"button",variant:"danger",size:"sm"},on:{click:function(e){return t.removeExpense(s)}}},[a("font-awesome-icon",{attrs:{icon:"times"}})],1)],1):t._e()])})),0):t._e(),a("tfoot",[a("tr",[a("th",{staticClass:"text-right",attrs:{colspan:"3"}},[a("number-format-component",{attrs:{input_value:Number(t.total)}})],1),-1==t.form.id?a("th"):t._e()])])])])]),-1==t.form.id?a("div",{staticClass:"text-right mt-3"},[a("b-button",{attrs:{type:"submit",variant:"dark",size:"sm"}},[a("font-awesome-icon",{attrs:{icon:"save"}}),t._v(" Save")],1)],1):t._e()],1)])]),a("b-modal",{attrs:{centered:"",size:"lg","body-class":"p-0","hide-footer":!0,"hide-header":!0},model:{value:t.expense_modal,callback:function(e){t.expense_modal=e},expression:"expense_modal"}},[a("other-expense-modal",{on:{select:t.selectExpense}})],1)],1)},g=[],v=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"card bg-light mb-0"},[a("div",{staticClass:"card-header bg-dark text-white d-flex justify-content-between align-items-center"},[a("h6",{staticClass:"mb-0"},[a("font-awesome-icon",{attrs:{icon:"search"}}),t._v(" Expense Description Search")],1)]),a("div",{staticClass:"card-body bg-white position-relative p-2"},[t.is_saving?a("b-row",{staticClass:"loader",attrs:{"align-v":"center"}},[a("b-col",[a("b-spinner"),a("br"),a("br"),a("strong",[t._v("Loading")])],1)],1):t._e(),a("b-row",{staticClass:"m-0"},[a("b-col",{staticClass:"text-center p-1 bg-success text-white d-flex align-items-center justify-content-center",attrs:{cols:"1"}},[a("font-awesome-icon",{staticClass:"h3 mb-0",attrs:{icon:"search"}})],1),a("b-col",{staticClass:"p-2 bg-white border"},[a("b-input-group",{attrs:{size:"sm"},scopedSlots:t._u([{key:"append",fn:function(){return[a("b-button",{attrs:{type:"button",disabled:""==t.search_key,variant:"facebook",size:"sm"},on:{click:function(e){return t.save()}}},[a("font-awesome-icon",{attrs:{icon:"plus-circle"}}),t._v(" Add New")],1)]},proxy:!0}])},[a("b-form-input",{attrs:{type:"text",size:"sm",debounce:"500",placeholder:"Search...",autocomplete:"off"},model:{value:t.search_key,callback:function(e){t.search_key=e},expression:"search_key"}})],1)],1)],1),t.results.length>0?a("div",{staticClass:"list-group bg-white mt-2",staticStyle:{"max-height":"260px","overflow-y":"auto"}},t._l(t.results,(function(e){return a("a",{staticClass:"list-group-item list-group-item-action",attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.select(e)}}},[t._v(t._s(e.description))])})),0):t._e()],1)])])},x=[],w=a("86db"),y={mixins:[l["a"]],components:{NumberFormatComponent:w["a"]},data:function(){return{is_saving:!1,project_modal:!1,search_key:"",results:[]}},watch:{search_key:{immediate:!0,handler:function(){""!=this.search_key&&this.search()}}},created:function(){},methods:{search:function(){var t=this;this.axios.get("maintenance/other_expenses/search?search="+this.search_key).then((function(e){t.results=e.data})).catch((function(t){return console.log(t)}))},select:function(t){this.$emit("select",t)},save:function(){var t=this;event.preventDefault(),this.swalConfirmSubmit((function(e){if(e.value){t.is_saving=!0;var a={id:-1,description:t.search_key};t.axios.post("maintenance/other_expenses/save",a).then((function(e){t.swalTransactionCompleted(),t.is_saving=!1,t.$emit("select",e.data)})).catch((function(e){t.swal_transaction_error_data.text=e.response.data,t.swalRequestError(),t.is_saving=!1}))}}))}}},C=y,k=Object(f["a"])(C,v,x,!1,null,null,null),j=k.exports,T={components:{OtherExpenseModal:j,NumberFormatComponent:w["a"]},mixins:[l["a"]],props:{project:{type:Object,default:function(){},required:!1},indirect_expense:{type:Object,default:function(){},required:!1}},computed:{total:function(){return this.form.indirect_other_expense_usages.reduce((function(t,e){return t+Number(e.amount)}),0)}},data:function(){return{form:{id:-1,transaction_date:"",voucher_number:"",check_number:"",details:"",indirect_other_expense_usages:[]},details_form:{other_expense_id:"",other_expense:{},amount:"",details:""},is_saving:!1,modal:!1,expense_modal:!1,selected_index:-1}},watch:{project:{immediate:!0,deep:!0,handler:function(){}},indirect_expense:{immediate:!0,deep:!0,handler:function(){}}},created:function(){"undefined"!==typeof this.indirect_expense.id&&(this.form=this.indirect_expense)},methods:{save:function(){var t=this;event.preventDefault(),this.swalConfirmSubmit((function(e){e.value&&(t.is_saving=!0,t.form.total=t.total,t.form.project_id=t.project.id,t.axios.post("indirect_expenses/save",t.form).then((function(e){t.swalTransactionCompleted(),t.is_saving=!1,t.$emit("save")})).catch((function(e){t.swal_transaction_error_data.text=e.response.data,t.swalRequestError(),t.is_saving=!1})))}))},addRow:function(){var t=JSON.parse(JSON.stringify(this.details_form));this.form.indirect_other_expense_usages.push(t)},openExpenseModal:function(t){this.selected_index=t,this.expense_modal=!0},selectExpense:function(t){this.form.indirect_other_expense_usages[this.selected_index].other_expense=t,this.form.indirect_other_expense_usages[this.selected_index].other_expense_id=t.id,this.selected_index=-1,this.expense_modal=!1},removeExpense:function(t){var e=this;this.swalConfirmDelete((function(a){a.value&&e.form.indirect_other_expense_usages.splice(t,1)}))}}},S=T,$=Object(f["a"])(S,h,g,!1,null,null,null),N=$.exports,q={components:{FormComponent:N,ServerSidePaginatedTable:b},mixins:[l["a"]],props:{project:{type:Object,default:function(){},required:!1}},data:function(){return{modal:!1,table_settings:{api_url:"indirect_expenses/all",delete_url:"indirect_expenses/delete",fields:[{key:"transaction_date.other_formats.format_1",label:"Transaction Date"},{key:"voucher_number",label:"Voucher Number"},{key:"check_number",label:"Check Number"},{key:"details",label:"Details"},{key:"total.other_formats.format_1",label:"Total Amount",class:"text-right"},{key:"action",label:"Action",class:"text-center"}]},indirect_expense:{}}},watch:{project:{immediate:!0,deep:!0,handler:function(){}}},created:function(){var t=this;r["bus"].$on("serverSidePaginatedTableDbClick",(function(e){t.indirect_expense=JSON.parse(JSON.stringify(e)),t.indirect_expense.transaction_date=e.transaction_date.default,t.modal=!0})),r["bus"].$on("serverSidePaginatedTableTopRightBtnClicked",(function(e){t.modal=!0}))},methods:{refresh:function(){this.modal=!1,r["bus"].$emit("reloadIndirectExpenseTable"),r["bus"].$emit("refreshComputations")},resetForm:function(){this.indirect_expense={}}}},D=q,E=Object(f["a"])(D,o,c,!1,null,null,null),z=E.exports,A=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("server-side-paginated-table",{ref:"displayTable",attrs:{fields:t.table_settings.fields,api_url:t.table_settings.api_url,delete_url:t.table_settings.delete_url,project_id:t.project.id,top_right_btn_redirect:!1},on:{serverSidePaginatedTableTopRightBtnClicked:t.serverSidePaginatedTableTopRightBtnClicked,serverSidePaginatedTableDbClick:t.serverSidePaginatedTableDbClick}}),a("b-modal",{attrs:{centered:"",size:"xl","body-class":"p-0","modal-class":"xxl-modal","hide-footer":!0,"hide-header":!0},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[a("log-modal",{attrs:{project:t.project,indirect_daily_log_id:t.indirect_daily_log_id},on:{save:function(e){return t.save()}}})],1)],1)},R=[],O=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"card bg-light mb-3"},[a("div",{staticClass:"card-header bg-dark text-white"},[a("b-row",[a("b-col",[t.loading?a("div",[a("strong",[t._v(" Fetching result... ")])]):a("div",[a("font-awesome-icon",{attrs:{icon:"database"}}),a("strong",[t._v(" "+t._s(t.list.total)+" ")]),a("small",[t._v("Result/s found")])],1)]),a("b-col",{staticClass:"text-right"},[a("b-button",{attrs:{variant:"secondary",size:"sm"},on:{click:t.clickTopRightBtn}},[a("font-awesome-icon",{attrs:{icon:"plus"}}),t._v(" Add New Log ")],1)],1)],1)],1),a("div",{staticClass:"card-body bg-white mb-0"},[a("b-row",{staticClass:"mb-3"},[a("b-col",{attrs:{sm:"2"}},[a("b-form-select",{attrs:{options:t.options,size:"sm"},on:{change:t.changeDisplayNo},model:{value:t.selected_display_no,callback:function(e){t.selected_display_no=e},expression:"selected_display_no"}})],1),a("b-col",{attrs:{sm:"6","offset-sm":"4"}},[a("b-input-group",[a("b-input-group-prepend",[a("b-input-group-text",{staticClass:"bg-dark text-white"},[a("font-awesome-icon",{attrs:{icon:"search"}})],1)],1),a("b-form-input",{attrs:{type:"text",debounce:"500",placeholder:"Search...",autocomplete:"off"},model:{value:t.search_term,callback:function(e){t.search_term=e},expression:"search_term"}}),a("b-input-group-append",[a("b-button",{staticClass:"bg-dark text-white px-4",attrs:{variant:"dark",size:"sm",disabled:""==t.search_term},on:{click:t.clearSearch}},[a("font-awesome-icon",{attrs:{icon:"times"}})],1)],1)],1)],1)],1),a("b-table",{attrs:{selectable:"",selectedVariant:"info","select-mode":"single",dark:t.dark,hover:t.hover,striped:t.striped,bordered:t.bordered,fixed:t.fixed,responsive:"sm",items:t.table_items,fields:t.captions,busy:t.loading,"show-empty":"","head-variant":"dark"},on:{"row-dblclicked":t.rowDbClicked},scopedSlots:t._u([{key:"cell(labor)",fn:function(t){return[a("div",{staticClass:"text-center"},[a("number-format-component",{attrs:{input_value:Number(t.item.total_labor)}})],1)]}},{key:"cell(equipment)",fn:function(t){return[a("div",{staticClass:"text-center"},[a("number-format-component",{attrs:{input_value:Number(t.item.total_equipment)}})],1)]}},{key:"cell(material)",fn:function(t){return[a("div",{staticClass:"text-center"},[a("number-format-component",{attrs:{input_value:Number(t.item.total_material)}})],1)]}},{key:"cell(other_expense)",fn:function(t){return[a("div",{staticClass:"text-center"},[a("number-format-component",{attrs:{input_value:Number(t.item.total_other_expense)}})],1)]}},{key:"cell(total)",fn:function(t){return[a("div",{staticClass:"text-center"},[a("number-format-component",{attrs:{input_value:Number(t.item.grand_total)}})],1)]}},{key:"cell(action)",fn:function(e){return[a("div",{staticClass:"text-center"},[a("b-button",{attrs:{variant:"danger",size:"sm"},on:{click:function(a){return t.deleteRow(e.item.id)}}},[a("font-awesome-icon",{attrs:{icon:"minus-circle"}}),t._v(" Delete ")],1)],1)]}}])},[a("div",{staticClass:"text-center my-2",attrs:{slot:"table-busy"},slot:"table-busy"},[a("br"),a("b-spinner",{staticClass:"align-middle",attrs:{small:""}}),a("br"),a("br"),a("strong",[t._v("Loading")])],1)]),t.list.total>0?a("nav",[a("b-pagination",{staticClass:"mb-0",attrs:{disabled:t.loading,align:"right","total-rows":t.total_rows,"per-page":t.per_page},on:{input:t.getAll},model:{value:t.list.current_page,callback:function(e){t.$set(t.list,"current_page",e)},expression:"list.current_page"}})],1):t._e()],1)])])},L=[],B={name:"server-side-paginated-table",inheritAttrs:!1,mixins:[l["a"]],components:{NumberFormatComponent:w["a"]},props:{hover:{type:Boolean,default:!0},striped:{type:Boolean,default:!0},bordered:{type:Boolean,default:!0},small:{type:Boolean,default:!0},fixed:{type:Boolean,default:!0},fields:{type:[Array,Object],default:function(){return[]}},dark:{type:Boolean,default:!1},api_url:{type:String,required:!0},delete_url:{type:String,required:!0},top_right_btn:{type:String,default:"",required:!1},project_id:{type:Number,default:-1,required:!0}},data:function(){return{selected:[],list:{data:[],from:1,to:0,current_page:1,total:0,per_page:1},result:[],loading:!0,searchTimeout:function(){return{type:Function,default:function(){return{}}}},search_term:"",options:[{value:10,text:"Display 10 records"},{value:25,text:"Display 25 records"},{value:50,text:"Display 50 records"},{value:100,text:"Display 100 records"}],selected_display_no:10}},computed:{table_items:function(){return this.list.data},per_page:function(){return parseInt(this.list.per_page)},total_rows:function(){return parseInt(this.list.total)},captions:function(){return this.fields},total_selected:function(){return parseInt(this.selected.length)}},created:function(){var t=this;r["bus"].$on("refreshComputations",(function(){t.getAll()}))},mounted:function(){},watch:{search_term:{immediate:!0,handler:function(){""!=this.search_term&&(this.loading=!0),this.list.current_page=1,this.getAll()}},project_id:{immediate:!0,handler:function(){-1!=this.project_id&&""!=this.project_id&&(this.loading=!0,this.list.current_page=1,this.getAll())}}},methods:{getAll:function(){var t=this;this.loading=!0,this.axios.get(this.api_url+"?id="+this.project_id+"&page="+this.list.current_page+"&per_page="+this.selected_display_no+"&search="+this.search_term).then((function(e){var a=e.data;t.list=a,t.loading=!1})).catch((function(t){return console.log(t)}))},clickTopRightBtn:function(){this.$emit("serverSidePaginatedTableTopRightBtnClicked")},rowDbClicked:function(t){this.$emit("serverSidePaginatedTableDbClick",t)},clearSearch:function(){this.search_term="",this.getAll()},changeDisplayNo:function(){this.loading=!0,this.list.current_page=1,this.getAll()},deleteRow:function(t){var e=this;this.swalConfirmDelete((function(a){a.value&&(e.loading=!0,e.axios.delete(e.delete_url,{data:{id:t}}).then((function(t){e.getAll(),e.swal_transaction_completed_data.text="Record successfully deleted.",e.swalTransactionCompleted(),e.loading=!1,r["bus"].$emit("refreshComputations")})).catch((function(t){e.swalRequestError(),e.loading=!1})))}))}}},P=B,I=Object(f["a"])(P,O,L,!1,null,null,null),F=I.exports,J=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"card bg-light mb-0"},[a("div",{staticClass:"card-header bg-dark text-white d-flex justify-content-between align-items-center"},[a("h6",{staticClass:"mb-0"},[a("font-awesome-icon",{attrs:{icon:"plus-circle"}}),t._v(" Indirect - Transaction Log")],1)]),a("div",{staticClass:"card-body bg-white position-relative",staticStyle:{"min-height":"80vh"}},[t.is_saving?a("b-row",{staticClass:"loader",attrs:{"align-v":"center"}},[a("b-col",[a("b-spinner"),a("br"),a("br"),a("strong",[t._v("Loading")])],1)],1):t._e(),a("b-row",{staticClass:"m-0 mb-3"},[a("b-col",{staticClass:"p-0",attrs:{cols:"3"}},[a("b-row",{staticClass:"m-0 h-100"},[a("b-col",{staticClass:"text-center p-2 bg-dark text-white d-flex align-items-center justify-content-center",attrs:{cols:"2"}},[a("font-awesome-icon",{staticClass:"h2 mb-0",attrs:{icon:"list"}})],1),a("b-col",{staticClass:"p-3 bg-white d-flex align-items-center border"},[a("div",[a("h4",{staticClass:"mb-0"},[a("strong",[t._v(t._s(t.project.title))])]),a("small",{staticClass:"text-muted text-uppercase font-weight-bold"},[t._v("PROJECT TITLE")])])])],1)],1),a("b-col",{staticClass:"p-0 pl-3",attrs:{cols:"3"}},[a("b-row",{staticClass:"m-0 h-100"},[a("b-col",{staticClass:"text-center p-2 bg-dark text-white d-flex align-items-center justify-content-center",attrs:{cols:"2"}},[a("font-awesome-icon",{staticClass:"h2 mb-0",attrs:{icon:"calendar"}})],1),a("b-col",{staticClass:"p-3 bg-white d-flex align-items-center border"},[a("div",{staticClass:"w-100"},[a("b-form-input",{attrs:{type:"date",required:""},model:{value:t.daily_log.transaction_date,callback:function(e){t.$set(t.daily_log,"transaction_date",e)},expression:"daily_log.transaction_date"}}),a("small",{staticClass:"text-muted text-uppercase font-weight-bold"},[t._v("TRANSACTION DATE")])],1)])],1)],1),a("b-col",{staticClass:"p-0 pl-3",attrs:{cols:"3"}},[a("b-row",{staticClass:"m-0 h-100"},[a("b-col",{staticClass:"text-center p-2 bg-dark text-white d-flex align-items-center justify-content-center",attrs:{cols:"2"}},[a("font-awesome-icon",{staticClass:"h2 mb-0",attrs:{icon:"flag"}})],1),a("b-col",{staticClass:"p-3 bg-white d-flex align-items-center border"},[a("div",[a("h4",{staticClass:"mb-0"},[a("strong",[a("number-format-component",{attrs:{input_value:Number(t.total)}})],1)]),a("small",{staticClass:"text-muted text-uppercase font-weight-bold"},[t._v("TOTAL")])])])],1)],1),a("b-col",{staticClass:"p-0 pl-3 cursor-pointer",attrs:{cols:"3"}},[a("b-row",{staticClass:"m-0 h-100",on:{click:function(e){return t.save()}}},[a("b-col",{staticClass:"text-center p-2 bg-success text-white d-flex align-items-center justify-content-center",attrs:{cols:"2"}},[a("font-awesome-icon",{staticClass:"h2 mb-0",attrs:{icon:"save"}})],1),a("b-col",{staticClass:"p-3 bg-white d-flex align-items-center border"},[a("div",[a("h4",{staticClass:"mb-0"},[a("strong",[t._v("SAVE")])]),a("small",{staticClass:"text-muted text-uppercase font-weight-bold"},[t._v("CLICK TO SAVE TRANSACTION")])])])],1)],1)],1),-1!=t.daily_log.id?[a("hr"),a("b-tabs",{attrs:{"content-class":"mt-3"}},[a("b-tab",{attrs:{title:"Labor",active:""}},[a("labor-usage",{attrs:{manpower_usages:t.daily_log.manpower_usages,indirect_daily_log_id:t.daily_log.id},on:{addLabor:function(e){return t.get()}}})],1)],1)]:t._e()],2)])])},M=[],U=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-row",{staticClass:"m-0"},[a("b-col",{staticClass:"p-0"},[a("div",{staticClass:"card bg-light mb-0"},[a("div",{staticClass:"card-header bg-dark text-white d-flex justify-content-between align-items-center"},[a("h6",{staticClass:"mb-0"},[a("font-awesome-icon",{attrs:{icon:"list"}}),t._v(" Labor Usage ")],1),a("b-button",{attrs:{variant:"secondary",size:"sm"},on:{click:function(e){t.modal=!0}}},[a("font-awesome-icon",{attrs:{icon:"plus"}}),t._v(" Add New ")],1)],1),a("div",{staticClass:"card-body bg-white position-relative"},[t.is_saving?a("b-row",{staticClass:"loader",attrs:{"align-v":"center"}},[a("b-col",[a("b-spinner"),a("br"),a("br"),a("strong",[t._v("Loading")])],1)],1):t._e(),a("table",{staticClass:"table table-bordered mb-0"},[a("thead",{staticClass:"bg-light text-dark"},[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("Name")]),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Job Description")]),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Daily Rate")]),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Regular Hours")]),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("OT Hours")]),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Total")]),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Action")])])]),a("tbody",t._l(t.manpower_usages,(function(e,s){return a("tr",[a("th",{attrs:{scope:"row"}},[t._v(t._s(e.manpower.full_name))]),a("th",{attrs:{scope:"row"}},[t._v(t._s(e.job_description.description))]),a("td",{staticClass:"text-right"},[a("number-format-component",{attrs:{input_value:Number(e.daily_rate)}})],1),a("td",{staticClass:"text-right"},[a("number-format-component",{attrs:{input_value:Number(e.regular_hours),currency:!1}})],1),a("td",{staticClass:"text-right"},[a("number-format-component",{attrs:{input_value:Number(e.ot_hours),currency:!1}})],1),a("td",{staticClass:"text-right"},[a("number-format-component",{attrs:{input_value:Number(e.total)}})],1),a("td",{staticClass:"text-center"},[a("b-button",{attrs:{type:"submit",size:"sm",variant:"danger"},on:{click:function(a){return t.deleteItem(e.id)}}},[a("font-awesome-icon",{attrs:{icon:"minus-circle"}}),t._v(" Remove ")],1)],1)])})),0),a("tfoot",{staticClass:"bg-light text-dark"},[a("tr",[a("th",{staticClass:"text-right",attrs:{scope:"col",colspan:"5"}},[t._v("TOTAL")]),a("th",{staticClass:"text-right",attrs:{scope:"col"}},[a("number-format-component",{attrs:{input_value:Number(t.total_usage)}})],1),a("th",{staticClass:"text-center",attrs:{scope:"col"}})])])])],1)])])],1),a("b-modal",{attrs:{centered:"",size:"lg","body-class":"p-0","hide-footer":!0,"hide-header":!0},model:{value:t.manpower_modal,callback:function(e){t.manpower_modal=e},expression:"manpower_modal"}},[a("manpower-modal",{on:{select:t.selectManpower}})],1),a("b-modal",{attrs:{centered:"",size:"md","body-class":"p-0","hide-footer":!0,"hide-header":!0},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[a("div",{staticClass:"card bg-light mb-0"},[a("div",{staticClass:"card-header bg-dark text-white d-flex justify-content-between align-items-center"},[a("h6",{staticClass:"mb-0"},[a("font-awesome-icon",{attrs:{icon:"plus-circle"}}),t._v(" Indirect Manpower Logs ")],1)]),a("div",{staticClass:"card-body bg-white position-relative"},[t.modal_is_saving?a("b-row",{staticClass:"loader",attrs:{"align-v":"center"}},[a("b-col",[a("b-spinner"),a("br"),a("br"),a("strong",[t._v("Loading")])],1)],1):t._e(),a("b-input-group",{staticClass:"mb-3",attrs:{prepend:"Employee",size:"sm"}},[a("b-form-input",{model:{value:t.form.manpower.full_name,callback:function(e){t.$set(t.form.manpower,"full_name",e)},expression:"form.manpower.full_name"}}),a("b-input-group-append",[a("b-button",{attrs:{variant:"info"},on:{click:function(e){t.manpower_modal=!0}}},[t._v("Search")])],1)],1),a("b-form-group",{attrs:{label:"Job Description:",description:"This field is required"}},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.form.job_description_id,expression:"form.job_description_id"}],staticClass:"form-control form-control-sm mb-2",attrs:{required:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.form,"job_description_id",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:""}},[t._v("Please Select")]),t._l(t.job_descriptions,(function(e){return a("option",{domProps:{value:e.id}},[t._v(" "+t._s(e.description)+" ")])}))],2)]),a("b-form-group",{attrs:{label:"Daily Rate:",description:"This field is required"}},[a("b-input-group",{attrs:{size:"sm"}},[a("b-form-input",{staticClass:"bg-white text-dark",attrs:{type:"number",required:"",size:"sm"},model:{value:t.form.daily_rate,callback:function(e){t.$set(t.form,"daily_rate",e)},expression:"form.daily_rate"}})],1)],1),a("b-form-group",{attrs:{label:"Regular Hours:",description:"This field is required"}},[a("b-input-group",{attrs:{size:"sm"}},[a("b-form-input",{staticClass:"bg-white text-dark",attrs:{type:"number",required:"",size:"sm"},model:{value:t.form.regular_hours,callback:function(e){t.$set(t.form,"regular_hours",e)},expression:"form.regular_hours"}})],1)],1),a("b-form-group",{attrs:{label:"OT Hours:"}},[a("b-input-group",{attrs:{size:"sm"}},[a("b-form-input",{staticClass:"bg-white text-dark",attrs:{type:"number",size:"sm"},model:{value:t.form.ot_hours,callback:function(e){t.$set(t.form,"ot_hours",e)},expression:"form.ot_hours"}})],1)],1),a("div",{staticClass:"text-right"},[a("b-button",{attrs:{type:"submit",variant:"dark",size:"sm"},on:{click:function(e){return t.save()}}},[a("font-awesome-icon",{attrs:{icon:"save"}}),t._v(" Save ")],1)],1)],1)])])],1)},V=[],H=a("0651"),W={mixins:[l["a"]],components:{NumberFormatComponent:w["a"],ManpowerModal:H["a"]},props:{manpower_usages:{type:Array,default:function(){return[]},required:!1},indirect_daily_log_id:{type:Number,required:!1}},computed:{total_usage:function(){return this.manpower_usages.reduce((function(t,e){return t+Number(e.total)}),0)}},data:function(){return{is_saving:!1,modal_is_saving:!1,job_descriptions:[],modal:!1,manpower_modal:!1,form:{id:-1,manpower:{id:-1,full_name:""},manpower_id:-1,daily_rate:0,regular_hours:8,ot_hours:0,total:0,job_description_id:""}}},watch:{manpower_usages:{immediate:!0,deep:!0,handler:function(){}}},created:function(){this.getFields()},methods:{save:function(){var t=this;event.preventDefault(),this.swalConfirmSubmit((function(e){if(e.value){t.modal_is_saving=!0;var a=t.form;a.indirect_daily_log_id=t.indirect_daily_log_id,t.axios.post("indirect_daily_log/manpower_usages/save",a).then((function(e){t.swalTransactionCompleted(),t.modal_is_saving=!1,t.modal=!1,t.$emit("addLabor")})).catch((function(e){t.swal_transaction_error_data.text=e.response.data,t.swalRequestError(),t.modal_is_saving=!1}))}}))},getFields:function(){var t=this;this.is_saving=!0,this.axios.get("maintenance/job_descriptions/all").then((function(e){t.job_descriptions=e.data,t.is_saving=!1})).catch((function(t){return console.log(t)}))},deleteItem:function(t){var e=this;this.swalConfirmDelete((function(a){a.value&&(e.is_saving=!0,e.axios.delete("indirect_daily_log/manpower_usages/delete",{data:{id:t}}).then((function(t){e.swalTransactionCompleted(),e.is_saving=!1,e.$emit("addLabor")})).catch((function(t){e.swal_transaction_error_data.text=t.response.data,e.swalRequestError(),e.is_saving=!1})))}))},selectManpower:function(t){this.form.manpower=t,this.form.manpower_id=t.id,this.form.job_description_id=t.job_description_id,this.form.daily_rate=t.job_description.daily_rate.default,this.manpower_modal=!1}}},Y=W,K=Object(f["a"])(Y,U,V,!1,null,null,null),G=K.exports,Q={mixins:[l["a"]],components:{NumberFormatComponent:w["a"],LaborUsage:G},props:{project:{type:Object,default:function(){},required:!1},indirect_daily_log_id:{type:Number,required:!1}},data:function(){return{is_saving:!1,modal:!1,daily_log:{id:this.indirect_daily_log_id,transaction_date:"",project_id:this.$route.params.id,manpower_usages:[]}}},computed:{total:function(){return this.total_manpower_usage},total_manpower_usage:function(){return this.daily_log.manpower_usages.reduce((function(t,e){return t+Number(e.total)}),0)}},watch:{project:{immediate:!0,deep:!0,handler:function(){}},indirect_daily_log_id:{immediate:!0,deep:!0,handler:function(){-1!=this.indirect_daily_log_id&&this.get()}}},created:function(){},methods:{save:function(){var t=this;if(""==this.daily_log.transaction_date)return this.swal_transaction_error_data.text="Transaction date is required.",void this.swalRequestError();this.swalConfirmSubmit((function(e){if(e.value){t.is_saving=!0;var a=JSON.parse(JSON.stringify(t.daily_log));a.total_labor=t.total_manpower_usage,a.grand_total=t.total,t.axios.post("indirect_daily_logs/save",a).then((function(e){t.swalTransactionCompleted(),t.is_saving=!1,-1!=t.daily_log.id?t.$emit("save"):t.daily_log.id=e.data.id})).catch((function(e){t.swal_transaction_error_data.text=e.response.data,t.swalRequestError(),t.is_saving=!1}))}}))},get:function(){var t=this;this.is_saving=!0,this.axios.get("indirect_daily_logs/get",{params:{id:this.daily_log.id}}).then((function(e){var a=e.data;a.transaction_date=e.data.transaction_date.default,r["bus"].$emit("refreshComputations"),t.daily_log=a,t.is_saving=!1})).catch((function(t){return console.log(t)}))}}},X=Q,Z=Object(f["a"])(X,J,M,!1,null,null,null),tt=Z.exports,et={components:{FormComponent:N,ServerSidePaginatedTable:F,LogModal:tt},mixins:[l["a"]],props:{project:{type:Object,default:function(){},required:!1}},data:function(){return{modal:!1,table_settings:{api_url:"indirect_daily_logs/get_by_item",delete_url:"indirect_daily_logs/delete",fields:[{key:"transaction_date.other_formats.format_1",label:"Transaction Date"},{key:"labor",label:"Labor",class:"text-center"},{key:"total",label:"Total",class:"text-center"},{key:"action",label:"Action",class:"text-center"}]},indirect_expense:{},indirect_daily_log_id:-1}},watch:{project:{immediate:!0,deep:!0,handler:function(){}}},created:function(){},methods:{refresh:function(){this.modal=!1,r["bus"].$emit("reloadIndirectExpenseTable"),r["bus"].$emit("refreshComputations")},resetForm:function(){this.indirect_expense={}},save:function(){r["bus"].$emit("refreshComputations")},serverSidePaginatedTableTopRightBtnClicked:function(t){this.modal=!0},serverSidePaginatedTableDbClick:function(t){this.viewItem(t.id)},viewItem:function(t){this.indirect_daily_log_id=t,this.modal=!0}}},at=et,st=Object(f["a"])(at,A,R,!1,null,null,null),it=st.exports,rt=a("c124"),nt={components:{ProjectFormComponent:n["a"],ProjectLocationFormComponent:rt["a"],NumberFormatComponent:w["a"],IndirectExpenseComponent:z,IndirectLogComponent:it},props:["project"],mixins:[l["a"]],data:function(){return{add_project_location_modal:!1,authorized_users:[]}},created:function(){this.getFields()},methods:{addProjectLocation:function(){this.add_project_location_modal=!1,this.$emit("addProjectLocation")},getFields:function(){var t=this;this.axios.get("users/all").then((function(e){var a=JSON.parse(JSON.stringify(e.data));a.forEach((function(e,a){var s=t.project.users.find((function(t){return t.id===e.id}));e.is_selected=!!s})),t.authorized_users=a})).catch((function(t){return console.log(t)}))},save:function(){var t=this;this.swalConfirmSubmit((function(e){if(e.value){t.is_saving=!0;var a={id:t.project.id,users:t.authorized_users};t.axios.post("projects/save_access",a).then((function(e){t.swalTransactionCompleted(),t.is_saving=!1})).catch((function(e){t.swal_transaction_error_data.text=e.response.data,t.swalRequestError(),t.is_saving=!1}))}}))},deleteRow:function(t){var e=this;this.swalConfirmDelete((function(a){a.value&&(e.is_saving=!0,e.axios.delete("project/locations/delete",{data:{id:t}}).then((function(t){e.swalTransactionCompleted(),e.is_saving=!1,r["bus"].$emit("refreshComputations")})).catch((function(t){e.swal_transaction_error_data.text=t.response.data,e.swalRequestError(),e.is_saving=!1})))}))}}},ot=nt,ct=(a("c9aa"),Object(f["a"])(ot,s,i,!1,null,null,null));e["default"]=ct.exports},ebbb:function(t,e,a){}}]);
//# sourceMappingURL=chunk-0ccc57f2.0c8b3413.js.map