(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-63623788"],{"506c":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("bread-crumbs"),a("b-card",{attrs:{"no-body":""}},[a("b-tabs",{attrs:{pills:"",card:"",vertical:"","nav-class":"bg-secondary p-2","active-nav-item-class":"bg-dark text-white","nav-wrapper-class":"nav-wrapper-custom-width"}},[a("b-tab",{attrs:{"title-item-class":"mb-2"}},[a("template",{slot:"title"},[a("h6",{staticClass:"mb-0 p-2 d-flex justify-content-between align-items-center"},[a("span",[t._v("Item Details")]),a("div",{staticClass:"text-center",staticStyle:{width:"25px"}},[a("font-awesome-icon",{attrs:{icon:"edit"}})],1)])]),a("b-card-text",{staticClass:"w-50"},[a("project-location-structure-form-component",{attrs:{project_location_structure_item:t.project_location_structure_item}})],1)],2),a("b-tab",{attrs:{"title-item-class":"mb-2"}},[a("template",{slot:"title"},[a("h6",{staticClass:"mb-0 p-2 d-flex justify-content-between align-items-center"},[a("span",[t._v("Estimates")]),a("div",{staticClass:"text-center",staticStyle:{width:"25px"}},[a("font-awesome-icon",{attrs:{icon:"list"}})],1)])]),a("b-tabs",{attrs:{"content-class":"mt-3"}},[a("b-tab",{attrs:{title:"Labor",active:""}},[a("labor-estimate",{attrs:{labor_estimates:t.project_location_structure_item.labor_estimates},on:{addLaborEstimate:function(e){return t.get()}}})],1),a("b-tab",{attrs:{title:"Equipment"}},[a("equipment-estimate",{attrs:{equipment_estimates:t.project_location_structure_item.equipment_estimates},on:{addEquipmentEstimate:function(e){return t.get()}}})],1),a("b-tab",{attrs:{title:"Material"}},[a("material-estimate",{attrs:{material_estimates:t.project_location_structure_item.material_estimates},on:{addMaterialEstimate:function(e){return t.get()}}})],1)],1)],2),a("b-tab",{attrs:{"title-item-class":"mb-0"}},[a("template",{slot:"title"},[a("h6",{staticClass:"mb-0 p-2 d-flex justify-content-between align-items-center"},[a("span",[t._v("Manpower")]),a("div",{staticClass:"text-center",staticStyle:{width:"25px"}},[a("font-awesome-icon",{attrs:{icon:"users"}})],1)])]),a("manpower",{attrs:{project_location_structure_item_manpowers:t.project_location_structure_item.project_location_structure_item_manpowers},on:{addManpower:function(e){return t.get()}}})],2),a("b-tab",{attrs:{"title-item-class":"mb-0",active:""}},[a("template",{slot:"title"},[a("h6",{staticClass:"mb-0 p-2 d-flex justify-content-between align-items-center"},[a("span",[t._v("Usage")]),a("div",{staticClass:"text-center",staticStyle:{width:"25px"}},[a("font-awesome-icon",{attrs:{icon:"chart-line"}})],1)])]),a("usages-index",{attrs:{project_location_structure_item:t.project_location_structure_item}})],2),a("b-tab",{attrs:{"title-item-class":"mb-0"}},[a("template",{slot:"title"},[a("h6",{staticClass:"mb-0 p-2 d-flex justify-content-between align-items-center"},[a("span",[t._v("Current Inventory")]),a("div",{staticClass:"text-center",staticStyle:{width:"25px"}},[a("font-awesome-icon",{attrs:{icon:"cubes"}})],1)])]),a("inventory",{attrs:{inventory:t.inventory}})],2),a("b-tab",{attrs:{"title-item-class":"mb-0"}},[a("template",{slot:"title"},[a("h6",{staticClass:"mb-0 p-2 d-flex justify-content-between align-items-center"},[a("span",[t._v("Progress")]),a("div",{staticClass:"text-center",staticStyle:{width:"25px"}},[a("font-awesome-icon",{attrs:{icon:"check-square"}})],1)])]),a("progress-report",{attrs:{project_location_structure_item:t.project_location_structure_item},on:{refresh:function(e){return t.get()}}})],2),a("b-tab",{attrs:{"title-item-class":"mb-2"}},[a("template",{slot:"title"},[a("h6",{staticClass:"mb-0 p-2 d-flex justify-content-between align-items-center"},[a("span",[t._v("Reports")]),a("div",{staticClass:"text-center",staticStyle:{width:"25px"}},[a("font-awesome-icon",{attrs:{icon:"chart-pie"}})],1)])]),a("b-card-text",{staticClass:"w-50"},[a("reports",{attrs:{project_location_structure_item:t.project_location_structure_item}})],1)],2)],1)],1)],1)},i=[],r=a("56d7"),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-row",{staticClass:"m-0"},[a("b-col",{staticClass:"p-0"},[a("div",{staticClass:"card bg-light mb-0"},[a("div",{staticClass:"card-header bg-dark text-white d-flex justify-content-between align-items-center"},[a("h6",{staticClass:"mb-0"},[a("font-awesome-icon",{attrs:{icon:"list"}}),t._v(" Labor Estimates")],1),a("b-button",{attrs:{variant:"secondary",size:"sm"},on:{click:function(e){t.modal=!0}}},[a("font-awesome-icon",{attrs:{icon:"plus"}}),t._v(" Add New ")],1)],1),a("div",{staticClass:"card-body bg-white position-relative"},[t.is_saving?a("b-row",{staticClass:"loader",attrs:{"align-v":"center"}},[a("b-col",[a("b-spinner"),a("br"),a("br"),a("strong",[t._v("Loading")])],1)],1):t._e(),a("table",{staticClass:"table border"},[a("thead",{staticClass:"bg-light text-dark"},[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("Job Description")]),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Daily Rate")]),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Hourly Rate")]),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Est. Duration (Hours)")]),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Number of Manpower")]),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Total")]),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Action ")])])]),a("tbody",t._l(t.labor_estimates,(function(e,s){return a("tr",[a("th",{attrs:{scope:"row"}},[t._v(t._s(e.job_description.description))]),a("td",{staticClass:"text-right"},[a("number-format-component",{attrs:{input_value:Number(e.daily_rate)}})],1),a("td",{staticClass:"text-right"},[a("number-format-component",{attrs:{input_value:Number(e.hourly_rate)}})],1),a("td",{staticClass:"text-right"},[a("number-format-component",{attrs:{input_value:Number(e.duration_in_hour)}})],1),a("td",{staticClass:"text-right"},[a("number-format-component",{attrs:{input_value:Number(e.qty)}})],1),a("td",{staticClass:"text-right"},[a("number-format-component",{attrs:{input_value:Number(e.total)}})],1),a("td",{staticClass:"text-center"},[a("b-button",{attrs:{type:"submit",size:"sm",variant:"danger"},on:{click:function(a){return t.deleteItem(e.id)}}},[a("font-awesome-icon",{attrs:{icon:"minus-circle"}}),t._v(" Remove")],1)],1)])})),0),a("tfoot",{staticClass:"bg-light text-dark"},[a("tr",[a("th",{staticClass:"text-right",attrs:{scope:"col",colspan:"5"}},[t._v("TOTAL EST. AMOUNT FOR LABOR")]),a("th",{staticClass:"text-right",attrs:{scope:"col"}},[a("number-format-component",{attrs:{input_value:Number(t.total_estimate)}})],1),a("th",{staticClass:"text-center",attrs:{scope:"col"}})])])])],1)])])],1),a("b-modal",{attrs:{centered:"",size:"md","body-class":"p-0","hide-footer":!0,"hide-header":!0},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[a("div",{staticClass:"card bg-light mb-0"},[a("div",{staticClass:"card-header bg-dark text-white d-flex justify-content-between align-items-center"},[a("h6",{staticClass:"mb-0"},[a("font-awesome-icon",{attrs:{icon:"plus-circle"}}),t._v(" Labor Estimates")],1)]),a("div",{staticClass:"card-body bg-white position-relative"},[t.modal_is_saving?a("b-row",{staticClass:"loader",attrs:{"align-v":"center"}},[a("b-col",[a("b-spinner"),a("br"),a("br"),a("strong",[t._v("Loading")])],1)],1):t._e(),a("b-form",{on:{submit:t.save}},[a("b-form-group",{attrs:{label:"Job Description:",description:"This field is required"}},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.form.job_description_id,expression:"form.job_description_id"}],staticClass:"form-control",attrs:{required:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.form,"job_description_id",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:""}},[t._v("Please Select")]),t._l(t.job_descriptions,(function(e){return a("option",{domProps:{value:e.id}},[t._v(" "+t._s(e.description)+" ")])}))],2)]),a("b-form-group",{attrs:{label:"Daily Rate:",description:"This field is required"}},[a("b-form-input",{attrs:{type:"number",step:"any",required:""},model:{value:t.form.daily_rate,callback:function(e){t.$set(t.form,"daily_rate",e)},expression:"form.daily_rate"}})],1),a("b-form-group",{attrs:{label:"Hourly Rate:",description:"This field is required"}},[a("b-form-input",{attrs:{type:"number",step:"any",required:""},model:{value:t.form.hourly_rate,callback:function(e){t.$set(t.form,"hourly_rate",e)},expression:"form.hourly_rate"}})],1),a("b-form-group",{attrs:{label:"Estimated Duration in Hours:",description:"This field is required"}},[a("b-form-input",{attrs:{type:"number",step:"any",required:""},model:{value:t.form.duration_in_hour,callback:function(e){t.$set(t.form,"duration_in_hour",e)},expression:"form.duration_in_hour"}})],1),a("b-form-group",{attrs:{label:"Number of Manpower:",description:"This field is required"}},[a("b-form-input",{attrs:{type:"number",step:"any",required:""},model:{value:t.form.qty,callback:function(e){t.$set(t.form,"qty",e)},expression:"form.qty"}})],1),a("div",{staticClass:"text-right"},[a("b-button",{attrs:{type:"submit",variant:"dark",size:"sm"}},[a("font-awesome-icon",{attrs:{icon:"save"}}),t._v(" Save")],1)],1)],1)],1)])])],1)},n=[],c=a("73e4"),l=a("86db"),u={mixins:[c["a"]],components:{NumberFormatComponent:l["a"]},props:{labor_estimates:{type:Array,default:function(){return[]},required:!1}},computed:{total_estimate:function(){return this.labor_estimates.reduce((function(t,e){return t+Number(e.total)}),0)}},data:function(){return{form:{id:-1,project_location_structure_item_id:this.$route.params.project_location_structure_item_id,job_description_id:"",daily_rate:"",hourly_rate:"",duration_in_hour:"",qty:"",total:""},is_saving:!1,modal_is_saving:!1,job_descriptions:[],modal:!1}},watch:{labor_estimates:{immediate:!0,deep:!0,handler:function(){}}},created:function(){this.getFields()},methods:{save:function(){var t=this;event.preventDefault(),this.swalConfirmSubmit((function(e){e.value&&(t.modal_is_saving=!0,t.axios.post("labor_estimates/save",t.form).then((function(e){t.swalTransactionCompleted(),t.modal_is_saving=!1,t.modal=!1,t.$emit("addLaborEstimate")})).catch((function(e){t.swal_transaction_error_data.text=e.response.data,t.swalRequestError(),t.modal_is_saving=!1})))}))},getFields:function(){var t=this;this.is_saving=!0,this.axios.get("maintenance/job_descriptions/all").then((function(e){t.job_descriptions=e.data,t.is_saving=!1})).catch((function(t){return console.log(t)}))},deleteItem:function(t){var e=this;this.swalConfirmDelete((function(a){a.value&&(e.is_saving=!0,e.axios.delete("labor_estimates/delete",{data:{id:t}}).then((function(t){e.swalTransactionCompleted(),e.is_saving=!1,e.$emit("addLaborEstimate")})).catch((function(t){e.swal_transaction_error_data.text=t.response.data,e.swalRequestError(),e.is_saving=!1})))}))}}},d=u,m=a("2877"),_=Object(m["a"])(d,o,n,!1,null,null,null),p=_.exports,b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-row",{staticClass:"m-0"},[a("b-col",{staticClass:"p-0"},[a("div",{staticClass:"card bg-light mb-0"},[a("div",{staticClass:"card-header bg-dark text-white d-flex justify-content-between align-items-center"},[a("h6",{staticClass:"mb-0"},[a("font-awesome-icon",{attrs:{icon:"list"}}),t._v(" Equipment Estimates")],1),a("b-button",{attrs:{variant:"secondary",size:"sm"},on:{click:function(e){t.modal=!0}}},[a("font-awesome-icon",{attrs:{icon:"plus"}}),t._v(" Add New ")],1)],1),a("div",{staticClass:"card-body bg-white position-relative"},[t.is_saving?a("b-row",{staticClass:"loader",attrs:{"align-v":"center"}},[a("b-col",[a("b-spinner"),a("br"),a("br"),a("strong",[t._v("Loading")])],1)],1):t._e(),a("table",{staticClass:"table border"},[a("thead",{staticClass:"bg-light text-dark"},[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("Equipment Description")]),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Hourly Rate")]),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Est. Duration (Hours)")]),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Est. Duration (Days)")]),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Number of Equipment")]),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Total")]),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Action ")])])]),a("tbody",t._l(t.equipment_estimates,(function(e,s){return a("tr",[a("th",{attrs:{scope:"row"}},[t._v(t._s(e.equipment_type.description))]),a("td",{staticClass:"text-right"},[a("number-format-component",{attrs:{input_value:Number(e.hourly_rate)}})],1),a("td",{staticClass:"text-right"},[a("number-format-component",{attrs:{input_value:Number(e.duration_in_hour)}})],1),a("td",{staticClass:"text-right"},[a("number-format-component",{attrs:{input_value:Number(e.duration_in_day)}})],1),a("td",{staticClass:"text-right"},[a("number-format-component",{attrs:{input_value:Number(e.qty)}})],1),a("td",{staticClass:"text-right"},[a("number-format-component",{attrs:{input_value:Number(e.total)}})],1),a("td",{staticClass:"text-center"},[a("b-button",{attrs:{type:"submit",size:"sm",variant:"danger"},on:{click:function(a){return t.deleteItem(e.id)}}},[a("font-awesome-icon",{attrs:{icon:"minus-circle"}}),t._v(" Remove")],1)],1)])})),0),a("tfoot",{staticClass:"bg-light text-dark"},[a("tr",[a("th",{staticClass:"text-right",attrs:{scope:"col",colspan:"5"}},[t._v("TOTAL EST. AMOUNT FOR EQUPMENT")]),a("th",{staticClass:"text-right",attrs:{scope:"col"}},[a("number-format-component",{attrs:{input_value:Number(t.total_estimate)}})],1),a("th",{staticClass:"text-center",attrs:{scope:"col"}})])])])],1)])])],1),a("b-modal",{attrs:{centered:"",size:"md","body-class":"p-0","hide-footer":!0,"hide-header":!0},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[a("div",{staticClass:"card bg-light mb-0"},[a("div",{staticClass:"card-header bg-dark text-white d-flex justify-content-between align-items-center"},[a("h6",{staticClass:"mb-0"},[a("font-awesome-icon",{attrs:{icon:"plus-circle"}}),t._v(" Equipment Estimates")],1)]),a("div",{staticClass:"card-body bg-white position-relative"},[t.modal_is_saving?a("b-row",{staticClass:"loader",attrs:{"align-v":"center"}},[a("b-col",[a("b-spinner"),a("br"),a("br"),a("strong",[t._v("Loading")])],1)],1):t._e(),a("b-form",{on:{submit:t.save}},[a("b-form-group",{attrs:{label:"Equipment:",description:"This field is required"}},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.form.equipment_type_id,expression:"form.equipment_type_id"}],staticClass:"form-control",attrs:{required:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.form,"equipment_type_id",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:""}},[t._v("Please Select")]),t._l(t.equipment_types,(function(e){return a("option",{domProps:{value:e.id}},[t._v(" "+t._s(e.description)+" ")])}))],2)]),a("b-form-group",{attrs:{label:"Hourly Rate:",description:"This field is required"}},[a("b-form-input",{attrs:{type:"number",step:"any",required:""},model:{value:t.form.hourly_rate,callback:function(e){t.$set(t.form,"hourly_rate",e)},expression:"form.hourly_rate"}})],1),a("b-form-group",{attrs:{label:"Estimated Duration in Hours:",description:"This field is required"}},[a("b-form-input",{attrs:{type:"number",step:"any",required:""},model:{value:t.form.duration_in_hour,callback:function(e){t.$set(t.form,"duration_in_hour",e)},expression:"form.duration_in_hour"}})],1),a("b-form-group",{attrs:{label:"Estimated Duration in Days:",description:"This field is required"}},[a("b-form-input",{attrs:{type:"number",step:"any",required:""},model:{value:t.form.duration_in_day,callback:function(e){t.$set(t.form,"duration_in_day",e)},expression:"form.duration_in_day"}})],1),a("b-form-group",{attrs:{label:"Number of Equipment:",description:"This field is required"}},[a("b-form-input",{attrs:{type:"number",step:"any",required:""},model:{value:t.form.qty,callback:function(e){t.$set(t.form,"qty",e)},expression:"form.qty"}})],1),a("div",{staticClass:"text-right"},[a("b-button",{attrs:{type:"submit",variant:"dark",size:"sm"}},[a("font-awesome-icon",{attrs:{icon:"save"}}),t._v(" Save")],1)],1)],1)],1)])])],1)},f=[],h={mixins:[c["a"]],components:{NumberFormatComponent:l["a"]},props:{equipment_estimates:{type:Array,default:function(){return[]},required:!1}},computed:{total_estimate:function(){return this.equipment_estimates.reduce((function(t,e){return t+Number(e.total)}),0)}},data:function(){return{form:{id:-1,project_location_structure_item_id:this.$route.params.project_location_structure_item_id,equipment_type_id:"",hourly_rate:"",duration_in_hour:"",duration_in_day:"",qty:"",total:""},is_saving:!1,modal_is_saving:!1,equipment_types:[],modal:!1}},watch:{equipment_estimates:{immediate:!0,deep:!0,handler:function(){}}},created:function(){this.getFields()},methods:{save:function(){var t=this;event.preventDefault(),this.swalConfirmSubmit((function(e){e.value&&(t.modal_is_saving=!0,t.axios.post("equipment_estimates/save",t.form).then((function(e){t.swalTransactionCompleted(),t.modal_is_saving=!1,t.modal=!1,t.$emit("addEquipmentEstimate")})).catch((function(e){t.swal_transaction_error_data.text=e.response.data,t.swalRequestError(),t.modal_is_saving=!1})))}))},getFields:function(){var t=this;this.is_saving=!0,this.axios.get("maintenance/equipment_types/all").then((function(e){t.equipment_types=e.data,t.is_saving=!1})).catch((function(t){return console.log(t)}))},deleteItem:function(t){var e=this;this.swalConfirmDelete((function(a){a.value&&(e.is_saving=!0,e.axios.delete("equipment_estimates/delete",{data:{id:t}}).then((function(t){e.swalTransactionCompleted(),e.is_saving=!1,e.$emit("addEquipmentEstimate")})).catch((function(t){e.swal_transaction_error_data.text=t.response.data,e.swalRequestError(),e.is_saving=!1})))}))}}},g=h,v=Object(m["a"])(g,b,f,!1,null,null,null),C=v.exports,x=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-row",{staticClass:"m-0"},[a("b-col",{staticClass:"p-0"},[a("div",{staticClass:"card bg-light mb-0"},[a("div",{staticClass:"card-header bg-dark text-white d-flex justify-content-between align-items-center"},[a("h6",{staticClass:"mb-0"},[a("font-awesome-icon",{attrs:{icon:"list"}}),t._v(" Equipment Estimates")],1),a("b-button",{attrs:{variant:"secondary",size:"sm"},on:{click:function(e){t.modal=!0}}},[a("font-awesome-icon",{attrs:{icon:"plus"}}),t._v(" Add New ")],1)],1),a("div",{staticClass:"card-body bg-white position-relative"},[t.is_saving?a("b-row",{staticClass:"loader",attrs:{"align-v":"center"}},[a("b-col",[a("b-spinner"),a("br"),a("br"),a("strong",[t._v("Loading")])],1)],1):t._e(),a("table",{staticClass:"table border"},[a("thead",{staticClass:"bg-light text-dark"},[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("Material Description")]),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Price per Unit")]),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Qty")]),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Total")]),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Action ")])])]),a("tbody",t._l(t.material_estimates,(function(e,s){return a("tr",[a("th",{attrs:{scope:"row"}},[t._v(t._s(e.material.name))]),a("td",{staticClass:"text-right"},[a("number-format-component",{attrs:{input_value:Number(e.price)}})],1),a("td",{staticClass:"text-right"},[a("number-format-component",{attrs:{input_value:Number(e.qty)}}),t._v(" "+t._s(e.material.material_unit.description))],1),a("td",{staticClass:"text-right"},[a("number-format-component",{attrs:{input_value:Number(e.total)}})],1),a("td",{staticClass:"text-center"},[a("b-button",{attrs:{type:"submit",size:"sm",variant:"danger"},on:{click:function(a){return t.deleteItem(e.id)}}},[a("font-awesome-icon",{attrs:{icon:"minus-circle"}}),t._v(" Remove")],1)],1)])})),0),a("tfoot",{staticClass:"bg-light text-dark"},[a("tr",[a("th",{staticClass:"text-right",attrs:{scope:"col",colspan:"3"}},[t._v("TOTAL EST. AMOUNT FOR MATERIALS")]),a("th",{staticClass:"text-right",attrs:{scope:"col"}},[a("number-format-component",{attrs:{input_value:Number(t.total_estimate)}})],1),a("th",{staticClass:"text-center",attrs:{scope:"col"}})])])])],1)])])],1),a("b-modal",{attrs:{centered:"",size:"xl","body-class":"p-0","hide-footer":!0,"hide-header":!0},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[a("div",{staticClass:"card bg-light mb-0"},[a("div",{staticClass:"card-header bg-dark text-white d-flex justify-content-between align-items-center"},[a("h6",{staticClass:"mb-0"},[a("font-awesome-icon",{attrs:{icon:"plus-circle"}}),t._v(" Material Estimates")],1)]),a("div",{staticClass:"card-body bg-white position-relative p-2"},[t.modal_is_saving?a("b-row",{staticClass:"loader",attrs:{"align-v":"center"}},[a("b-col",[a("b-spinner"),a("br"),a("br"),a("strong",[t._v("Loading")])],1)],1):t._e(),a("b-row",{staticClass:"m-0 border"},[a("b-col",{staticClass:"p-2 bg-dark",attrs:{cols:"6"}},[a("b-row",{staticClass:"m-0"},[a("b-col",{staticClass:"text-center p-1 bg-success text-white d-flex align-items-center justify-content-center",attrs:{cols:"1"}},[a("font-awesome-icon",{staticClass:"h3 mb-0",attrs:{icon:"search"}})],1),a("b-col",{staticClass:"p-2 bg-white"},[a("b-form-input",{attrs:{type:"text",debounce:"500",placeholder:"Search..."},model:{value:t.search_key,callback:function(e){t.search_key=e},expression:"search_key"}})],1)],1),a("div",{staticClass:"list-group bg-white mt-2",staticStyle:{"max-height":"260px","overflow-y":"auto"}},t._l(t.materials,(function(e){return a("a",{staticClass:"list-group-item list-group-item-action",attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.select(e)}}},[t._v(t._s(e.name))])})),0)],1),a("b-col",{staticClass:"p-2"},[a("b-form",{on:{submit:t.save}},[a("b-row",{staticClass:"m-0 border mb-3"},[a("b-col",{staticClass:"text-center p-2 bg-info text-white d-flex align-items-center justify-content-center",attrs:{cols:"2"}},[a("font-awesome-icon",{staticClass:"h2 mb-0",attrs:{icon:"cube"}})],1),a("b-col",{staticClass:"p-2 bg-white d-flex align-items-center"},[a("div",[a("h6",{staticClass:"mb-0 text-muted"},[t._v("Material")]),a("h2",{staticClass:"mb-0"},[a("strong",[t._v(t._s(t.form.material.name))])])])])],1),a("b-form-group",{attrs:{label:"Price:",description:"This field is required"}},[a("b-form-input",{attrs:{type:"number",step:"any",required:""},model:{value:t.form.price,callback:function(e){t.$set(t.form,"price",e)},expression:"form.price"}})],1),a("b-form-group",{attrs:{label:"Qty:",description:"This field is required"}},[a("b-form-input",{attrs:{type:"number",step:"any",required:""},model:{value:t.form.qty,callback:function(e){t.$set(t.form,"qty",e)},expression:"form.qty"}})],1),a("div",{staticClass:"text-right"},[a("b-button",{attrs:{type:"submit",variant:"dark",size:"sm"}},[a("font-awesome-icon",{attrs:{icon:"save"}}),t._v(" Save")],1)],1)],1)],1)],1)],1)])])],1)},y=[],w={mixins:[c["a"]],components:{NumberFormatComponent:l["a"]},props:{material_estimates:{type:Array,default:function(){return[]},required:!1}},computed:{total_estimate:function(){return this.material_estimates.reduce((function(t,e){return t+Number(e.total)}),0)}},data:function(){return{form:{id:-1,project_location_structure_item_id:this.$route.params.project_location_structure_item_id,material:{},material_id:"",price:"",qty:"",total:""},is_saving:!1,modal_is_saving:!1,materials:[],modal:!1,search_key:""}},watch:{material_estimates:{immediate:!0,deep:!0,handler:function(){}},search_key:{immediate:!0,handler:function(){""!=this.search_key&&this.getMaterials()}}},created:function(){},methods:{save:function(){var t=this;event.preventDefault(),this.swalConfirmSubmit((function(e){if(e.value){t.modal_is_saving=!0;var a=JSON.parse(JSON.stringify(t.form));a.material_id=a.material.id,t.axios.post("material_estimates/save",a).then((function(e){t.swalTransactionCompleted(),t.modal_is_saving=!1,t.modal=!1,t.$emit("addMaterialEstimate")})).catch((function(e){t.swal_transaction_error_data.text=e.response.data,t.swalRequestError(),t.modal_is_saving=!1}))}}))},getMaterials:function(){var t=this;this.axios.get("maintenance/materials/search?search="+this.search_key).then((function(e){t.materials=e.data})).catch((function(t){return console.log(t)}))},deleteItem:function(t){var e=this;this.swalConfirmDelete((function(a){a.value&&(e.is_saving=!0,e.axios.delete("material_estimates/delete",{data:{id:t}}).then((function(t){e.swalTransactionCompleted(),e.is_saving=!1,e.$emit("addMaterialEstimate")})).catch((function(t){e.swal_transaction_error_data.text=t.response.data,e.swalRequestError(),e.is_saving=!1})))}))},select:function(t){this.form.material=t}}},k=w,q=Object(m["a"])(k,x,y,!1,null,null,null),j=q.exports,E=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-row",{staticClass:"m-0"},[a("b-col",{staticClass:"p-0"},[a("div",{staticClass:"card bg-light mb-0"},[a("div",{staticClass:"card-header bg-dark text-white d-flex justify-content-between align-items-center"},[a("h6",{staticClass:"mb-0"},[a("font-awesome-icon",{attrs:{icon:"list"}}),t._v(" Manpower")],1),a("b-button",{attrs:{variant:"secondary",size:"sm"},on:{click:function(e){t.modal=!0}}},[a("font-awesome-icon",{attrs:{icon:"plus"}}),t._v(" Add New ")],1)],1),a("div",{staticClass:"card-body bg-white position-relative"},[t.is_saving?a("b-row",{staticClass:"loader",attrs:{"align-v":"center"}},[a("b-col",[a("b-spinner"),a("br"),a("br"),a("strong",[t._v("Loading")])],1)],1):t._e(),a("table",{staticClass:"table border"},[a("thead",{staticClass:"bg-light text-dark"},[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("Name")]),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Job Description")]),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Daily Rate")]),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Action ")])])]),a("tbody",t._l(t.project_location_structure_item_manpowers,(function(e,s){return a("tr",[a("th",{attrs:{scope:"row"}},[t._v(t._s(e.manpower.full_name))]),a("td",{staticClass:"text-right"},[t._v(t._s(e.job_description.description))]),a("td",{staticClass:"text-right"},[a("number-format-component",{attrs:{input_value:Number(e.daily_rate)}})],1),a("td",{staticClass:"text-center"},[a("b-button",{attrs:{type:"submit",size:"sm",variant:"danger"},on:{click:function(a){return t.deleteItem(e.id)}}},[a("font-awesome-icon",{attrs:{icon:"minus-circle"}}),t._v(" Remove")],1)],1)])})),0)])],1)])])],1),a("b-modal",{attrs:{centered:"",size:"xl","body-class":"p-0","hide-footer":!0,"hide-header":!0},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[a("div",{staticClass:"card bg-light mb-0"},[a("div",{staticClass:"card-header bg-dark text-white d-flex justify-content-between align-items-center"},[a("h6",{staticClass:"mb-0"},[a("font-awesome-icon",{attrs:{icon:"plus-circle"}}),t._v(" Material Estimates")],1)]),a("div",{staticClass:"card-body bg-white position-relative p-2"},[t.modal_is_saving?a("b-row",{staticClass:"loader",attrs:{"align-v":"center"}},[a("b-col",[a("b-spinner"),a("br"),a("br"),a("strong",[t._v("Loading")])],1)],1):t._e(),a("b-row",{staticClass:"m-0 border"},[a("b-col",{staticClass:"p-2 bg-dark",attrs:{cols:"6"}},[a("b-row",{staticClass:"m-0"},[a("b-col",{staticClass:"text-center p-1 bg-success text-white d-flex align-items-center justify-content-center",attrs:{cols:"1"}},[a("font-awesome-icon",{staticClass:"h3 mb-0",attrs:{icon:"search"}})],1),a("b-col",{staticClass:"p-2 bg-white"},[a("b-form-input",{attrs:{type:"text",debounce:"500",placeholder:"Search..."},model:{value:t.search_key,callback:function(e){t.search_key=e},expression:"search_key"}})],1)],1),a("div",{staticClass:"list-group bg-white mt-2",staticStyle:{"max-height":"260px","overflow-y":"auto"}},t._l(t.manpowers,(function(e){return a("a",{staticClass:"list-group-item list-group-item-action",attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.select(e)}}},[t._v(t._s(e.full_name))])})),0)],1),a("b-col",{staticClass:"p-2"},[a("b-form",{on:{submit:t.save}},[a("b-row",{staticClass:"m-0 border mb-3"},[a("b-col",{staticClass:"text-center p-2 bg-info text-white d-flex align-items-center justify-content-center",attrs:{cols:"2"}},[a("font-awesome-icon",{staticClass:"h2 mb-0",attrs:{icon:"user"}})],1),a("b-col",{staticClass:"p-2 bg-white d-flex align-items-center"},[a("div",[a("h6",{staticClass:"mb-0 text-muted"},[t._v("Manpower Name")]),a("h2",{staticClass:"mb-0"},[a("strong",[t._v(t._s(t.form.manpower.full_name))])])])])],1),a("b-form-group",{attrs:{label:"Job Description:",description:"This field is required"}},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.form.job_description_id,expression:"form.job_description_id"}],staticClass:"form-control",attrs:{required:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.form,"job_description_id",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:""}},[t._v("Please Select")]),t._l(t.job_descriptions,(function(e){return a("option",{domProps:{value:e.id}},[t._v(" "+t._s(e.description)+" ")])}))],2)]),a("b-form-group",{attrs:{label:"Daily Rate:",description:"This field is required"}},[a("b-form-input",{attrs:{type:"number",step:"any",required:""},model:{value:t.form.daily_rate,callback:function(e){t.$set(t.form,"daily_rate",e)},expression:"form.daily_rate"}})],1),a("div",{staticClass:"text-right"},[a("b-button",{attrs:{type:"submit",variant:"dark",size:"sm"}},[a("font-awesome-icon",{attrs:{icon:"save"}}),t._v(" Save")],1)],1)],1)],1)],1)],1)])])],1)},N=[],T={mixins:[c["a"]],components:{NumberFormatComponent:l["a"]},props:{project_location_structure_item_manpowers:{type:Array,default:function(){return[]},required:!1}},data:function(){return{form:{id:-1,project_location_structure_item_id:this.$route.params.project_location_structure_item_id,manpower:{},manpower_id:"",job_description_id:"",daily_rate:""},is_saving:!1,modal_is_saving:!1,manpowers:[],job_descriptions:[],modal:!1,search_key:""}},watch:{project_location_structure_item_manpowers:{immediate:!0,deep:!0,handler:function(){}},search_key:{immediate:!0,handler:function(){""!=this.search_key&&this.getManpowers()}}},created:function(){this.getFields()},methods:{save:function(){var t=this;event.preventDefault(),this.swalConfirmSubmit((function(e){if(e.value){t.modal_is_saving=!0;var a=JSON.parse(JSON.stringify(t.form));a.manpower_id=a.manpower.id,t.axios.post("project/location/structure/item/manpowers/save",a).then((function(e){t.swalTransactionCompleted(),t.modal_is_saving=!1,t.modal=!1,t.$emit("addManpower")})).catch((function(e){t.swal_transaction_error_data.text=e.response.data,t.swalRequestError(),t.modal_is_saving=!1}))}}))},getFields:function(){var t=this;this.is_saving=!0,this.axios.get("maintenance/job_descriptions/all").then((function(e){t.job_descriptions=e.data,t.is_saving=!1})).catch((function(t){return console.log(t)}))},getManpowers:function(){var t=this;this.axios.get("maintenance/manpowers/search?search="+this.search_key).then((function(e){t.manpowers=e.data})).catch((function(t){return console.log(t)}))},deleteItem:function(t){var e=this;this.swalConfirmDelete((function(a){a.value&&(e.is_saving=!0,e.axios.delete("project/location/structure/item/manpowers/delete",{data:{id:t}}).then((function(t){e.swalTransactionCompleted(),e.is_saving=!1,e.$emit("addManpower")})).catch((function(t){e.swal_transaction_error_data.text=t.response.data,e.swalRequestError(),e.is_saving=!1})))}))},select:function(t){this.form.manpower=t,this.form.job_description_id=t.job_description_id}}},$=T,A=Object(m["a"])($,E,N,!1,null,null,null),S=A.exports,D=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",["undefined"!=typeof t.project_location_structure_item.labor_est?a("CRow",[a("CCol",[a("CWidgetBrand",{directives:[{name:"b-popover",rawName:"v-b-popover.hover.top",value:"Manpower estimate and usage.",expression:"'Manpower estimate and usage.'",modifiers:{hover:!0,top:!0}}],staticClass:"w-100 custom-font",attrs:{color:"info",rightHeader:t.project_location_structure_item.labor_est.other_formats.format_1,rightFooter:"ESTIMATE",leftHeader:t.project_location_structure_item.labor.other_formats.format_1,leftFooter:"USAGE",title:"Manpower"}},[a("div",{staticClass:"p-4"},[a("font-awesome-icon",{staticClass:"h1 mb-0",attrs:{icon:"users"}})],1)])],1),a("CCol",[a("CWidgetBrand",{directives:[{name:"b-popover",rawName:"v-b-popover.hover.top",value:"Equipment estimate and usage.",expression:"'Equipment estimate and usage.'",modifiers:{hover:!0,top:!0}}],staticClass:"w-100 custom-font",attrs:{color:"success",rightHeader:t.project_location_structure_item.equipment_est.other_formats.format_1,rightFooter:"ESTIMATE",leftHeader:t.project_location_structure_item.equipment.other_formats.format_1,leftFooter:"USAGE",title:"Equipment"}},[a("div",{staticClass:"p-4"},[a("font-awesome-icon",{staticClass:"h1 mb-0",attrs:{icon:"truck"}})],1)])],1),a("CCol",[a("CWidgetBrand",{directives:[{name:"b-popover",rawName:"v-b-popover.hover.top",value:"Material estimate and usage.",expression:"'Material estimate and usage.'",modifiers:{hover:!0,top:!0}}],staticClass:"w-100 custom-font",attrs:{color:"warning",rightHeader:t.project_location_structure_item.material_est.other_formats.format_1,rightFooter:"ESTIMATE",leftHeader:t.project_location_structure_item.material.other_formats.format_1,leftFooter:"USAGE",title:"Material"}},[a("div",{staticClass:"p-4"},[a("font-awesome-icon",{staticClass:"h1 mb-0",attrs:{icon:"cubes"}})],1)])],1),a("CCol",[a("CWidgetBrand",{directives:[{name:"b-popover",rawName:"v-b-popover.hover.top",value:"Other expense usage.",expression:"'Other expense usage.'",modifiers:{hover:!0,top:!0}}],staticClass:"w-100 custom-font",attrs:{color:"primary",rightHeader:"NA",rightFooter:"ESTIMATE",leftHeader:t.project_location_structure_item.other_expense.other_formats.format_1,leftFooter:"USAGE",title:"Other Expense"}},[a("div",{staticClass:"p-4"},[a("font-awesome-icon",{staticClass:"h1 mb-0",attrs:{icon:"list-ol"}})],1)])],1)],1):t._e(),a("server-side-paginated-table",{ref:"displayTable",attrs:{fields:t.table_settings.fields,api_url:t.table_settings.api_url,delete_url:t.table_settings.delete_url,project_location_structure_item_id:t.project_location_structure_item.id},on:{itemDbClicked:t.itemDbClicked}}),a("b-modal",{attrs:{centered:"",size:"xl","body-class":"p-0","modal-class":"xxl-modal","hide-footer":!0,"hide-header":!0},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[a("modal",{attrs:{project_location_structure_item:t.project_location_structure_item,daily_log_id:t.daily_log_id},on:{save:function(e){return t.save()}}})],1)],1)},O=[],R=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"card bg-light mb-0"},[a("div",{staticClass:"card-header bg-dark text-white d-flex justify-content-between align-items-center"},[a("h6",{staticClass:"mb-0"},[a("font-awesome-icon",{attrs:{icon:"plus-circle"}}),t._v(" Transaction Log")],1)]),a("div",{staticClass:"card-body bg-white position-relative",staticStyle:{"min-height":"80vh"}},[t.is_saving?a("b-row",{staticClass:"loader",attrs:{"align-v":"center"}},[a("b-col",[a("b-spinner"),a("br"),a("br"),a("strong",[t._v("Loading")])],1)],1):t._e(),a("b-row",{staticClass:"m-0 mb-3"},[a("b-col",{staticClass:"p-0",attrs:{cols:"3"}},[a("b-row",{staticClass:"m-0 h-100"},[a("b-col",{staticClass:"text-center p-2 bg-dark text-white d-flex align-items-center justify-content-center",attrs:{cols:"2"}},[a("font-awesome-icon",{staticClass:"h2 mb-0",attrs:{icon:"list"}})],1),a("b-col",{staticClass:"p-3 bg-white d-flex align-items-center border"},[a("div",[a("h4",{staticClass:"mb-0"},[a("strong",[t._v(t._s(t.project_location_structure_item.description))])]),a("small",{staticClass:"text-muted text-uppercase font-weight-bold"},[t._v("ITEM NAME")])])])],1)],1),a("b-col",{staticClass:"p-0 pl-3",attrs:{cols:"3"}},[a("b-row",{staticClass:"m-0 h-100"},[a("b-col",{staticClass:"text-center p-2 bg-dark text-white d-flex align-items-center justify-content-center",attrs:{cols:"2"}},[a("font-awesome-icon",{staticClass:"h2 mb-0",attrs:{icon:"calendar"}})],1),a("b-col",{staticClass:"p-3 bg-white d-flex align-items-center border"},[a("div",{staticClass:"w-100"},[a("b-form-input",{attrs:{type:"date",required:""},model:{value:t.daily_log.transaction_date,callback:function(e){t.$set(t.daily_log,"transaction_date",e)},expression:"daily_log.transaction_date"}}),a("small",{staticClass:"text-muted text-uppercase font-weight-bold"},[t._v("TRANSACTION DATE")])],1)])],1)],1),a("b-col",{staticClass:"p-0 pl-3",attrs:{cols:"3"}},[a("b-row",{staticClass:"m-0 h-100"},[a("b-col",{staticClass:"text-center p-2 bg-dark text-white d-flex align-items-center justify-content-center",attrs:{cols:"2"}},[a("font-awesome-icon",{staticClass:"h2 mb-0",attrs:{icon:"flag"}})],1),a("b-col",{staticClass:"p-3 bg-white d-flex align-items-center border"},[a("div",[a("h4",{staticClass:"mb-0"},[a("strong",[a("number-format-component",{attrs:{input_value:Number(t.total)}})],1)]),a("small",{staticClass:"text-muted text-uppercase font-weight-bold"},[t._v("TOTAL")])])])],1)],1),a("b-col",{staticClass:"p-0 pl-3 cursor-pointer",attrs:{cols:"3"}},[a("b-row",{staticClass:"m-0 h-100",on:{click:function(e){return t.save()}}},[a("b-col",{staticClass:"text-center p-2 bg-success text-white d-flex align-items-center justify-content-center",attrs:{cols:"2"}},[a("font-awesome-icon",{staticClass:"h2 mb-0",attrs:{icon:"save"}})],1),a("b-col",{staticClass:"p-3 bg-white d-flex align-items-center border"},[a("div",[a("h4",{staticClass:"mb-0"},[a("strong",[t._v("SAVE")])]),a("small",{staticClass:"text-muted text-uppercase font-weight-bold"},[t._v("CLICK TO SAVE TRANSACTION")])])])],1)],1)],1),-1!=t.daily_log.id?[a("hr"),a("b-tabs",{attrs:{"content-class":"mt-3"}},[a("b-tab",{attrs:{title:"Labor",active:""}},[a("labor-usage",{attrs:{manpower_usages:t.daily_log.manpower_usages,daily_log_id:t.daily_log.id,project_location_structure_item_manpowers:t.project_location_structure_item.project_location_structure_item_manpowers},on:{addLabor:function(e){return t.get()}}})],1),a("b-tab",{attrs:{title:"Equipment"}},[a("equipment-usage",{attrs:{equipment_usages:t.daily_log.equipment_usages,daily_log_id:t.daily_log.id},on:{addEquipment:function(e){return t.get()}}})],1),a("b-tab",{attrs:{title:"Other Expensees"}},[a("other-expense-usage",{attrs:{other_expense_usages:t.daily_log.other_expense_usages,daily_log_id:t.daily_log.id},on:{addOtherExpense:function(e){return t.get()}}})],1)],1)]:t._e()],2)])])},L=[],M=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-row",{staticClass:"m-0"},[a("b-col",{staticClass:"p-0"},[a("div",{staticClass:"card bg-light mb-0"},[a("div",{staticClass:"card-header bg-dark text-white d-flex justify-content-between align-items-center"},[a("h6",{staticClass:"mb-0"},[a("font-awesome-icon",{attrs:{icon:"list"}}),t._v(" Labor Usage")],1),a("b-button",{attrs:{variant:"secondary",size:"sm"},on:{click:function(e){t.modal=!0}}},[a("font-awesome-icon",{attrs:{icon:"plus"}}),t._v(" Add New ")],1)],1),a("div",{staticClass:"card-body bg-white position-relative"},[t.is_saving?a("b-row",{staticClass:"loader",attrs:{"align-v":"center"}},[a("b-col",[a("b-spinner"),a("br"),a("br"),a("strong",[t._v("Loading")])],1)],1):t._e(),a("table",{staticClass:"table table-bordered mb-0"},[a("thead",{staticClass:"bg-light text-dark"},[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("Name")]),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Job Description")]),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Daily Rate")]),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Regular Hours")]),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("OT Hours")]),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Total")]),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Action ")])])]),a("tbody",t._l(t.manpower_usages,(function(e,s){return a("tr",[a("th",{attrs:{scope:"row"}},[t._v(t._s(e.manpower.full_name))]),a("th",{attrs:{scope:"row"}},[t._v(t._s(e.job_description.description))]),a("td",{staticClass:"text-right"},[a("number-format-component",{attrs:{input_value:Number(e.daily_rate)}})],1),a("td",{staticClass:"text-right"},[a("number-format-component",{attrs:{input_value:Number(e.regular_hours),currency:!1}})],1),a("td",{staticClass:"text-right"},[a("number-format-component",{attrs:{input_value:Number(e.ot_hours),currency:!1}})],1),a("td",{staticClass:"text-right"},[a("number-format-component",{attrs:{input_value:Number(e.total)}})],1),a("td",{staticClass:"text-center"},[a("b-button",{attrs:{type:"submit",size:"sm",variant:"danger"},on:{click:function(a){return t.deleteItem(e.id)}}},[a("font-awesome-icon",{attrs:{icon:"minus-circle"}}),t._v(" Remove")],1)],1)])})),0),a("tfoot",{staticClass:"bg-light text-dark"},[a("tr",[a("th",{staticClass:"text-right",attrs:{scope:"col",colspan:"5"}},[t._v("TOTAL")]),a("th",{staticClass:"text-right",attrs:{scope:"col"}},[a("number-format-component",{attrs:{input_value:Number(t.total_usage)}})],1),a("th",{staticClass:"text-center",attrs:{scope:"col"}})])])])],1)])])],1),a("b-modal",{attrs:{centered:"",size:"xl","body-class":"p-0","hide-footer":!0,"hide-header":!0},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[a("div",{staticClass:"card bg-light mb-0"},[a("div",{staticClass:"card-header bg-dark text-white d-flex justify-content-between align-items-center"},[a("h6",{staticClass:"mb-0"},[a("font-awesome-icon",{attrs:{icon:"plus-circle"}}),t._v(" Labor Estimates")],1)]),a("div",{staticClass:"card-body bg-white position-relative"},[t.modal_is_saving?a("b-row",{staticClass:"loader",attrs:{"align-v":"center"}},[a("b-col",[a("b-spinner"),a("br"),a("br"),a("strong",[t._v("Loading")])],1)],1):t._e(),a("table",{staticClass:"table border"},[a("thead",{staticClass:"bg-light text-dark"},[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("Name")]),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Job Description")]),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Daily Rate")]),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Regular Hours")]),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("OT Hours")])])]),a("tbody",t._l(t.project_location_structure_item_manpowers,(function(e,s){return a("tr",[a("th",{attrs:{scope:"row"}},[t._v(t._s(e.manpower.full_name))]),a("td",[a("select",{directives:[{name:"model",rawName:"v-model",value:e.job_description_id,expression:"project_location_structure_item_manpower.job_description_id"}],staticClass:"form-control",attrs:{required:""},on:{change:function(a){var s=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(e,"job_description_id",a.target.multiple?s:s[0])}}},[a("option",{attrs:{value:""}},[t._v("Please Select")]),t._l(t.job_descriptions,(function(e){return a("option",{domProps:{value:e.id}},[t._v(" "+t._s(e.description)+" ")])}))],2)]),a("td",[a("b-form-input",{attrs:{type:"number",step:"any",required:""},model:{value:e.daily_rate,callback:function(a){t.$set(e,"daily_rate",a)},expression:"project_location_structure_item_manpower.daily_rate"}})],1),a("td",[a("b-form-input",{attrs:{type:"number",step:"any",required:""},model:{value:e.regular_hours,callback:function(a){t.$set(e,"regular_hours",a)},expression:"project_location_structure_item_manpower.regular_hours"}})],1),a("td",[a("b-form-input",{attrs:{type:"number",step:"any",required:""},model:{value:e.ot_hours,callback:function(a){t.$set(e,"ot_hours",a)},expression:"project_location_structure_item_manpower.ot_hours"}})],1)])})),0)]),a("div",{staticClass:"text-right"},[a("b-button",{attrs:{type:"submit",variant:"dark",size:"sm"},on:{click:function(e){return t.save()}}},[a("font-awesome-icon",{attrs:{icon:"save"}}),t._v(" Save")],1)],1)],1)])])],1)},z=[],I={mixins:[c["a"]],components:{NumberFormatComponent:l["a"]},props:{manpower_usages:{type:Array,default:function(){return[]},required:!1},project_location_structure_item_manpowers:{type:Array,default:function(){return[]},required:!1},daily_log_id:{type:Number,required:!1}},computed:{total_usage:function(){return this.manpower_usages.reduce((function(t,e){return t+Number(e.total)}),0)}},data:function(){return{is_saving:!1,modal_is_saving:!1,job_descriptions:[],modal:!1}},watch:{manpower_usages:{immediate:!0,deep:!0,handler:function(){}},project_location_structure_item_manpowers:{immediate:!0,deep:!0,handler:function(){}}},created:function(){this.getFields()},methods:{save:function(){var t=this;event.preventDefault(),this.swalConfirmSubmit((function(e){if(e.value){t.modal_is_saving=!0;var a={project_location_structure_item_manpowers:t.project_location_structure_item_manpowers,daily_log_id:t.daily_log_id};t.axios.post("daily_log/manpower_usages/save",a).then((function(e){t.swalTransactionCompleted(),t.modal_is_saving=!1,t.modal=!1,t.$emit("addLabor")})).catch((function(e){t.swal_transaction_error_data.text=e.response.data,t.swalRequestError(),t.modal_is_saving=!1}))}}))},getFields:function(){var t=this;this.is_saving=!0,this.axios.get("maintenance/job_descriptions/all").then((function(e){t.job_descriptions=e.data,t.is_saving=!1})).catch((function(t){return console.log(t)}))},deleteItem:function(t){var e=this;this.swalConfirmDelete((function(a){a.value&&(e.is_saving=!0,e.axios.delete("daily_log/manpower_usages/delete",{data:{id:t}}).then((function(t){e.swalTransactionCompleted(),e.is_saving=!1,e.$emit("addLabor")})).catch((function(t){e.swal_transaction_error_data.text=t.response.data,e.swalRequestError(),e.is_saving=!1})))}))}}},F=I,P=Object(m["a"])(F,M,z,!1,null,null,null),B=P.exports,H=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-row",{staticClass:"m-0"},[a("b-col",{staticClass:"p-0"},[a("div",{staticClass:"card bg-light mb-0"},[a("div",{staticClass:"card-header bg-dark text-white d-flex justify-content-between align-items-center"},[a("h6",{staticClass:"mb-0"},[a("font-awesome-icon",{attrs:{icon:"list"}}),t._v(" Equipment Usage")],1),a("b-button",{attrs:{variant:"secondary",size:"sm"},on:{click:function(e){t.modal=!0}}},[a("font-awesome-icon",{attrs:{icon:"plus"}}),t._v(" Add New ")],1)],1),a("div",{staticClass:"card-body bg-white position-relative"},[t.is_saving?a("b-row",{staticClass:"loader",attrs:{"align-v":"center"}},[a("b-col",[a("b-spinner"),a("br"),a("br"),a("strong",[t._v("Loading")])],1)],1):t._e(),a("table",{staticClass:"table table-bordered mb-0"},[a("thead",{staticClass:"bg-light text-dark"},[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("Equipment Code")]),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Equipment Type")]),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Voucher Number")]),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Check Number")]),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Price per Hour")]),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Hours Used")]),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Total")]),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Action ")])])]),a("tbody",t._l(t.equipment_usages,(function(e,s){return a("tr",[a("th",{attrs:{scope:"row"}},[t._v(t._s(e.equipment.code))]),a("th",{attrs:{scope:"row"}},[t._v(t._s(e.equipment.equipment_type.description))]),a("th",{attrs:{scope:"row"}},[t._v(t._s(e.voucher_number))]),a("th",{attrs:{scope:"row"}},[t._v(t._s(e.check_number))]),a("td",{staticClass:"text-right"},[a("number-format-component",{attrs:{input_value:Number(e.price_per_hour)}})],1),a("td",{staticClass:"text-right"},[a("number-format-component",{attrs:{input_value:Number(e.hours_used),currency:!1}})],1),a("td",{staticClass:"text-right"},[a("number-format-component",{attrs:{input_value:Number(e.total)}})],1),a("td",{staticClass:"text-center"},[a("b-button",{attrs:{type:"submit",size:"sm",variant:"danger"},on:{click:function(a){return t.deleteItem(e.id)}}},[a("font-awesome-icon",{attrs:{icon:"minus-circle"}}),t._v(" Remove")],1)],1)])})),0),a("tfoot",{staticClass:"bg-light text-dark"},[a("tr",[a("th",{staticClass:"text-right",attrs:{scope:"col",colspan:"6"}},[t._v("TOTAL")]),a("th",{staticClass:"text-right",attrs:{scope:"col"}},[a("number-format-component",{attrs:{input_value:Number(t.total_usage)}})],1),a("th",{staticClass:"text-center",attrs:{scope:"col"}})])])])],1)])])],1),a("b-modal",{attrs:{centered:"",size:"xl","body-class":"p-0","hide-footer":!0,"hide-header":!0},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[a("div",{staticClass:"card bg-light mb-0"},[a("div",{staticClass:"card-header bg-dark text-white d-flex justify-content-between align-items-center"},[a("h6",{staticClass:"mb-0"},[a("font-awesome-icon",{attrs:{icon:"plus-circle"}}),t._v(" Labor Estimates")],1)]),a("div",{staticClass:"card-body bg-white position-relative"},[t.modal_is_saving?a("b-row",{staticClass:"loader",attrs:{"align-v":"center"}},[a("b-col",[a("b-spinner"),a("br"),a("br"),a("strong",[t._v("Loading")])],1)],1):t._e(),a("b-row",{staticClass:"m-0 border"},[a("b-col",{staticClass:"p-2 bg-dark",attrs:{cols:"6"}},[a("b-row",{staticClass:"m-0"},[a("b-col",{staticClass:"text-center p-1 bg-success text-white d-flex align-items-center justify-content-center",attrs:{cols:"1"}},[a("font-awesome-icon",{staticClass:"h3 mb-0",attrs:{icon:"search"}})],1),a("b-col",{staticClass:"p-2 bg-white"},[a("b-form-input",{attrs:{type:"text",debounce:"500",placeholder:"Search..."},model:{value:t.search_key,callback:function(e){t.search_key=e},expression:"search_key"}})],1)],1),a("div",{staticClass:"list-group bg-white mt-2 flex-grow-1",staticStyle:{"max-height":"424px","overflow-y":"auto"}},t._l(t.equipments,(function(e){return a("a",{staticClass:"list-group-item list-group-item-action",attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.select(e)}}},[t._v(t._s(e.code)+" - "+t._s(e.equipment_type.description))])})),0)],1),a("b-col",{staticClass:"p-2"},[a("b-form",{on:{submit:t.save}},[a("b-row",{staticClass:"m-0 border mb-3"},[a("b-col",{staticClass:"text-center p-2 bg-info text-white d-flex align-items-center justify-content-center",attrs:{cols:"2"}},[a("font-awesome-icon",{staticClass:"h2 mb-0",attrs:{icon:"user"}})],1),a("b-col",{staticClass:"p-2 bg-white d-flex align-items-center"},[a("div",[a("h6",{staticClass:"mb-0 text-muted"},[t._v("Equipment")]),a("h2",{staticClass:"mb-0"},[a("strong",["undefined"!=typeof t.form.equipment.code?[t._v(" "+t._s(t.form.equipment.code)+" - "+t._s(t.form.equipment.equipment_type.description)+" ")]:[t._v(" NA ")]],2)])])])],1),a("b-form-group",{attrs:{label:"Voucher Number:",description:"This field is required"}},[a("b-form-input",{attrs:{type:"text",required:""},model:{value:t.form.voucher_number,callback:function(e){t.$set(t.form,"voucher_number",e)},expression:"form.voucher_number"}})],1),a("b-form-group",{attrs:{label:"Check Number:",description:"This field is required"}},[a("b-form-input",{attrs:{type:"text",required:""},model:{value:t.form.check_number,callback:function(e){t.$set(t.form,"check_number",e)},expression:"form.check_number"}})],1),a("b-form-group",{attrs:{label:"Price per Hour:",description:"This field is required"}},[a("b-form-input",{attrs:{type:"number",step:"any",required:""},model:{value:t.form.price_per_hour,callback:function(e){t.$set(t.form,"price_per_hour",e)},expression:"form.price_per_hour"}})],1),a("b-form-group",{attrs:{label:"Number of Hour/s used:",description:"This field is required"}},[a("b-form-input",{attrs:{type:"number",step:"any",required:""},model:{value:t.form.hours_used,callback:function(e){t.$set(t.form,"hours_used",e)},expression:"form.hours_used"}})],1),a("div",{staticClass:"text-right"},[a("b-button",{attrs:{type:"submit",variant:"dark",size:"sm"}},[a("font-awesome-icon",{attrs:{icon:"save"}}),t._v(" Save")],1)],1)],1)],1)],1)],1)])])],1)},U=[],J={mixins:[c["a"]],components:{NumberFormatComponent:l["a"]},props:{equipment_usages:{type:Array,default:function(){return[]},required:!1},daily_log_id:{type:Number,required:!1}},computed:{total_usage:function(){return this.equipment_usages.reduce((function(t,e){return t+Number(e.total)}),0)}},data:function(){return{form:{id:-1,daily_log_id:this.daily_log_id,equipment_id:-1,equipment:{},voucher_number:"",check_number:"",hours_used:"",price_per_hour:""},is_saving:!1,modal_is_saving:!1,equipments:[],modal:!1,search_key:""}},watch:{equipment_usages:{immediate:!0,deep:!0,handler:function(){}},search_key:{immediate:!0,handler:function(){""!=this.search_key&&this.getEquipments()}}},created:function(){},methods:{save:function(){var t=this;if(event.preventDefault(),-1==this.form.equipment_id)return this.swal_transaction_error_data.text="Please select an equipment.",void this.swalRequestError();this.swalConfirmSubmit((function(e){e.value&&(t.modal_is_saving=!0,t.axios.post("daily_log/equipment_usages/save",t.form).then((function(e){t.swalTransactionCompleted(),t.modal_is_saving=!1,t.modal=!1,t.$emit("addEquipment")})).catch((function(e){t.swal_transaction_error_data.text=e.response.data,t.swalRequestError(),t.modal_is_saving=!1})))}))},getEquipments:function(){var t=this;this.axios.get("maintenance/equipments/search?search="+this.search_key).then((function(e){t.equipments=e.data})).catch((function(t){return console.log(t)}))},deleteItem:function(t){var e=this;this.swalConfirmDelete((function(a){a.value&&(e.is_saving=!0,e.axios.delete("daily_log/equipment_usages/delete",{data:{id:t}}).then((function(t){e.swalTransactionCompleted(),e.is_saving=!1,e.$emit("addEquipment")})).catch((function(t){e.swal_transaction_error_data.text=t.response.data,e.swalRequestError(),e.is_saving=!1})))}))},select:function(t){this.form.equipment=t,this.form.price_per_hour=t.hourly_rate,this.form.equipment_id=t.id}}},Q=J,V=Object(m["a"])(Q,H,U,!1,null,null,null),W=V.exports,G=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-row",{staticClass:"m-0"},[a("b-col",{staticClass:"p-0"},[a("div",{staticClass:"card bg-light mb-0"},[a("div",{staticClass:"card-header bg-dark text-white d-flex justify-content-between align-items-center"},[a("h6",{staticClass:"mb-0"},[a("font-awesome-icon",{attrs:{icon:"list"}}),t._v(" Material Usage")],1)]),a("div",{staticClass:"card-body bg-white position-relative"},[t.is_saving?a("b-row",{staticClass:"loader",attrs:{"align-v":"center"}},[a("b-col",[a("b-spinner"),a("br"),a("br"),a("strong",[t._v("Loading")])],1)],1):t._e(),a("b-form",{on:{submit:function(e){return e.preventDefault(),t.save(e)}}},[a("b-row",[a("b-col",[a("div",{staticClass:"input-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.material.name,expression:"form.material.name"}],staticClass:"form-control bg-white",attrs:{type:"text",placeholder:"Material's Description",readonly:""},domProps:{value:t.form.material.name},on:{input:function(e){e.target.composing||t.$set(t.form.material,"name",e.target.value)}}}),a("div",{staticClass:"input-group-append"},[a("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:function(e){t.modal=!0}}},[a("font-awesome-icon",{attrs:{icon:"search"}}),t._v(" Search")],1)])])]),a("b-col",{attrs:{cols:"2"}},[a("div",{staticClass:"input-group"},[a("div",{staticClass:"input-group-prepend"},[a("span",{staticClass:"input-group-text"},[t._v("Price")])]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.price,expression:"form.price"}],staticClass:"form-control",attrs:{type:"number",step:"any",required:""},domProps:{value:t.form.price},on:{input:function(e){e.target.composing||t.$set(t.form,"price",e.target.value)}}})])]),a("b-col",{attrs:{cols:"2"}},[a("div",{staticClass:"input-group"},[a("div",{staticClass:"input-group-prepend"},[a("span",{staticClass:"input-group-text"},[t._v("Qty Used")])]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.qty,expression:"form.qty"}],staticClass:"form-control",attrs:{type:"number",step:"any",required:""},domProps:{value:t.form.qty},on:{input:function(e){e.target.composing||t.$set(t.form,"qty",e.target.value)}}})])]),a("b-col",{attrs:{cols:"1"}},[a("button",{staticClass:"btn btn-secondary btn-block",attrs:{type:"submit"}},[a("font-awesome-icon",{attrs:{icon:"plus-circle"}}),t._v(" Add")],1)])],1)],1),a("table",{staticClass:"table table-bordered mb-0 mt-3"},[a("thead",{staticClass:"bg-light text-dark"},[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("Material")]),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Price")]),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Quantity")]),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Total")]),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Action ")])])]),a("tbody",t._l(t.material_usages,(function(e,s){return a("tr",[a("th",{attrs:{scope:"row"}},[t._v(t._s(e.material.name))]),a("td",{staticClass:"text-right"},[a("number-format-component",{attrs:{input_value:Number(e.price)}})],1),a("td",{staticClass:"text-right"},[a("number-format-component",{attrs:{input_value:Number(e.qty),currency:!1}})],1),a("td",{staticClass:"text-right"},[a("number-format-component",{attrs:{input_value:Number(e.total)}})],1),a("td",{staticClass:"text-center"},[a("b-button",{attrs:{type:"submit",size:"sm",variant:"danger"},on:{click:function(a){return t.deleteItem(e.id)}}},[a("font-awesome-icon",{attrs:{icon:"minus-circle"}}),t._v(" Remove")],1)],1)])})),0),a("tfoot",{staticClass:"bg-light text-dark"},[a("tr",[a("th",{staticClass:"text-right",attrs:{scope:"col",colspan:"3"}},[t._v("TOTAL")]),a("th",{staticClass:"text-right",attrs:{scope:"col"}},[a("number-format-component",{attrs:{input_value:Number(t.total_usage)}})],1),a("th",{staticClass:"text-center",attrs:{scope:"col"}})])])])],1)])])],1),a("b-modal",{attrs:{centered:"",size:"xl","body-class":"p-0","hide-footer":!0,"hide-header":!0},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[a("material-search",{on:{select:t.select}})],1)],1)},Y=[],K=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"card bg-light mb-0"},[a("div",{staticClass:"card-header bg-info text-white d-flex justify-content-between align-items-center"},[a("h6",{staticClass:"mb-0"},[a("font-awesome-icon",{attrs:{icon:"search"}}),t._v(" Search")],1)]),a("div",{staticClass:"card-body bg-white position-relative p-2"},[a("loader",{attrs:{status:t.is_saving}}),a("b-row",{staticClass:"m-0"},[a("b-col",{staticClass:"text-center p-1 bg-dark text-white d-flex align-items-center justify-content-center",attrs:{cols:"1"}},[a("font-awesome-icon",{staticClass:"h3 mb-0",attrs:{icon:"search"}})],1),a("b-col",{staticClass:"p-2 bg-white border"},[a("b-form-input",{attrs:{type:"text",debounce:"500",placeholder:"Search...",autocomplete:"off"},model:{value:t.search_key,callback:function(e){t.search_key=e},expression:"search_key"}})],1)],1),t.results.length>0?a("div",{staticClass:"list-group mt-3"},t._l(t.results,(function(e){return a("button",{staticClass:"list-group-item list-group-item-action",attrs:{type:"button"},on:{click:function(a){return t.select(e)}}},[t._v(" "+t._s(e.name)+" ")])})),0):t._e()],1)])])},X=[],Z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.status?a("b-row",{staticClass:"loader",attrs:{"align-v":"center"}},[a("b-col",[a("b-spinner"),a("br"),a("br"),a("strong",[t._v("Loading")])],1)],1):t._e()],1)},tt=[],et={props:{status:{type:Boolean,default:!1,required:!1}},watch:{status:{immediate:!0,deep:!0,handler:function(){}}},data:function(){return{}},created:function(){},methods:{}},at=et,st=Object(m["a"])(at,Z,tt,!1,null,null,null),it=st.exports,rt={mixins:[c["a"]],components:{NumberFormatComponent:l["a"],Loader:it},data:function(){return{is_saving:!1,project_modal:!1,search_key:"",results:[]}},watch:{search_key:{immediate:!0,handler:function(){""!=this.search_key&&this.get()}}},created:function(){},methods:{get:function(){var t=this;this.axios.get("maintenance/materials/search?search="+this.search_key).then((function(e){t.results=e.data})).catch((function(t){return console.log(t)}))},select:function(t){this.$emit("select",t)}}},ot=rt,nt=Object(m["a"])(ot,K,X,!1,null,null,null),ct=nt.exports,lt={mixins:[c["a"]],components:{NumberFormatComponent:l["a"],MaterialSearch:ct},props:{material_usages:{type:Array,default:function(){return[]},required:!1},daily_log_id:{type:Number,required:!1}},computed:{total_usage:function(){return this.material_usages.reduce((function(t,e){return t+Number(e.total)}),0)}},data:function(){return{form:{id:-1,daily_log_id:this.daily_log_id,material_id:-1,material:{},price:"",qty:"",total:""},form_copy:{},is_saving:!1,modal:!1}},watch:{material_usages:{immediate:!0,deep:!0,handler:function(){}}},created:function(){this.form_copy=JSON.parse(JSON.stringify(this.form))},methods:{save:function(){var t=this;if(event.preventDefault(),-1==this.form.material_id)return this.swal_transaction_error_data.text="Please select material.",void this.swalRequestError();this.swalConfirmSubmit((function(e){e.value&&(t.is_saving=!0,t.axios.post("daily_log/material_usages/save",t.form).then((function(e){t.swalTransactionCompleted(),t.form=JSON.parse(JSON.stringify(t.form_copy)),t.is_saving=!1,t.$emit("addMaterial")})).catch((function(e){t.swal_transaction_error_data.text=e.response.data,t.swalRequestError(),t.modal_is_saving=!1})))}))},deleteItem:function(t){var e=this;this.swalConfirmDelete((function(a){a.value&&(e.is_saving=!0,e.axios.delete("daily_log/material_usages/delete",{data:{id:t}}).then((function(t){e.swalTransactionCompleted(),e.is_saving=!1,e.$emit("addMaterial")})).catch((function(t){e.swal_transaction_error_data.text=t.response.data,e.swalRequestError(),e.is_saving=!1})))}))},select:function(t){this.form.material=t,this.form.material_id=t.id,this.modal=!1}}},ut=lt,dt=Object(m["a"])(ut,G,Y,!1,null,null,null),mt=dt.exports,_t=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-row",{staticClass:"m-0"},[a("b-col",{staticClass:"p-0"},[a("div",{staticClass:"card bg-light mb-0"},[a("div",{staticClass:"card-header bg-dark text-white d-flex justify-content-between align-items-center"},[a("h6",{staticClass:"mb-0"},[a("font-awesome-icon",{attrs:{icon:"list"}}),t._v(" Other Expenses")],1),a("b-button",{attrs:{variant:"secondary",size:"sm"},on:{click:function(e){t.modal=!0}}},[a("font-awesome-icon",{attrs:{icon:"plus"}}),t._v(" Add New ")],1)],1),a("div",{staticClass:"card-body bg-white position-relative"},[t.is_saving?a("b-row",{staticClass:"loader",attrs:{"align-v":"center"}},[a("b-col",[a("b-spinner"),a("br"),a("br"),a("strong",[t._v("Loading")])],1)],1):t._e(),a("table",{staticClass:"table table-bordered mb-0"},[a("thead",{staticClass:"bg-light text-dark"},[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("Expense Description")]),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Details")]),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Voucher Number")]),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Check Number")]),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Amount")]),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Action ")])])]),a("tbody",t._l(t.other_expense_usages,(function(e,s){return a("tr",[a("th",{attrs:{scope:"row"}},[t._v(t._s(e.other_expense.description))]),a("th",{attrs:{scope:"row"}},[t._v(t._s(e.details))]),a("th",{attrs:{scope:"row"}},[t._v(t._s(e.voucher_number))]),a("th",{attrs:{scope:"row"}},[t._v(t._s(e.check_number))]),a("td",{staticClass:"text-right"},[a("number-format-component",{attrs:{input_value:Number(e.amount),currency:!1}})],1),a("td",{staticClass:"text-center"},[a("b-button",{attrs:{type:"submit",size:"sm",variant:"danger"},on:{click:function(a){return t.deleteItem(e.id)}}},[a("font-awesome-icon",{attrs:{icon:"minus-circle"}}),t._v(" Remove")],1)],1)])})),0),a("tfoot",{staticClass:"bg-light text-dark"},[a("tr",[a("th",{staticClass:"text-right",attrs:{scope:"col",colspan:"4"}},[t._v("TOTAL")]),a("th",{staticClass:"text-right",attrs:{scope:"col"}},[a("number-format-component",{attrs:{input_value:Number(t.total_usage)}})],1),a("th",{staticClass:"text-center",attrs:{scope:"col"}})])])])],1)])])],1),a("b-modal",{attrs:{centered:"",size:"xl","body-class":"p-0","hide-footer":!0,"hide-header":!0},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[a("div",{staticClass:"card bg-light mb-0"},[a("div",{staticClass:"card-header bg-dark text-white d-flex justify-content-between align-items-center"},[a("h6",{staticClass:"mb-0"},[a("font-awesome-icon",{attrs:{icon:"plus-circle"}}),t._v(" Labor Estimates")],1)]),a("div",{staticClass:"card-body bg-white position-relative"},[t.modal_is_saving?a("b-row",{staticClass:"loader",attrs:{"align-v":"center"}},[a("b-col",[a("b-spinner"),a("br"),a("br"),a("strong",[t._v("Loading")])],1)],1):t._e(),a("b-row",{staticClass:"m-0 border"},[a("b-col",{staticClass:"p-2 bg-dark",attrs:{cols:"6"}},[a("b-row",{staticClass:"m-0"},[a("b-col",{staticClass:"text-center p-1 bg-success text-white d-flex align-items-center justify-content-center",attrs:{cols:"1"}},[a("font-awesome-icon",{staticClass:"h3 mb-0",attrs:{icon:"search"}})],1),a("b-col",{staticClass:"p-2 bg-white"},[a("b-input-group",{scopedSlots:t._u([{key:"append",fn:function(){return[a("b-button",{attrs:{variant:"info"},on:{click:function(e){return t.addOtherExpense()}}},[t._v("New Record")])]},proxy:!0}])},[a("b-form-input",{attrs:{type:"text",debounce:"500",placeholder:"Search...",autocomplete:"off"},model:{value:t.search_key,callback:function(e){t.search_key=e},expression:"search_key"}})],1)],1)],1),a("div",{staticClass:"list-group bg-white mt-2 flex-grow-1",staticStyle:{"max-height":"424px","overflow-y":"auto"}},t._l(t.other_expenses,(function(e){return a("a",{staticClass:"list-group-item list-group-item-action",attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.select(e)}}},[t._v(t._s(e.description))])})),0)],1),a("b-col",{staticClass:"p-3"},[a("b-form",{on:{submit:t.save}},[a("b-row",{staticClass:"m-0 border mb-3"},[a("b-col",{staticClass:"text-center p-2 bg-info text-white d-flex align-items-center justify-content-center",attrs:{cols:"2"}},[a("font-awesome-icon",{staticClass:"h2 mb-0",attrs:{icon:"list"}})],1),a("b-col",{staticClass:"p-2 bg-white d-flex align-items-center"},[a("div",[a("h6",{staticClass:"mb-0 text-muted"},[t._v("Description")]),a("h2",{staticClass:"mb-0"},[a("strong",["undefined"!=typeof t.form.other_expense.description?[t._v(" "+t._s(t.form.other_expense.description)+" ")]:[t._v(" NA ")]],2)])])])],1),a("b-form-group",{attrs:{label:"Voucher Number:",description:"This field is required"}},[a("b-form-input",{attrs:{type:"text",required:""},model:{value:t.form.voucher_number,callback:function(e){t.$set(t.form,"voucher_number",e)},expression:"form.voucher_number"}})],1),a("b-form-group",{attrs:{label:"Check Number:",description:"This field is required"}},[a("b-form-input",{attrs:{type:"text",required:""},model:{value:t.form.check_number,callback:function(e){t.$set(t.form,"check_number",e)},expression:"form.check_number"}})],1),a("b-form-group",{attrs:{label:"Amount:",description:"This field is required"}},[a("b-form-input",{attrs:{type:"number",step:"any",required:""},model:{value:t.form.amount,callback:function(e){t.$set(t.form,"amount",e)},expression:"form.amount"}})],1),a("b-form-group",{attrs:{label:"Details:",description:"This field is required"}},[a("b-form-input",{attrs:{type:"text",required:""},model:{value:t.form.details,callback:function(e){t.$set(t.form,"details",e)},expression:"form.details"}})],1),a("div",{staticClass:"text-right"},[a("b-button",{attrs:{type:"submit",variant:"dark",size:"sm"}},[a("font-awesome-icon",{attrs:{icon:"save"}}),t._v(" Save")],1)],1)],1)],1)],1)],1)])])],1)},pt=[],bt={mixins:[c["a"]],components:{NumberFormatComponent:l["a"]},props:{other_expense_usages:{type:Array,default:function(){return[]},required:!1},daily_log_id:{type:Number,required:!1}},computed:{total_usage:function(){return this.other_expense_usages.reduce((function(t,e){return t+Number(e.amount)}),0)}},data:function(){return{form:{id:-1,daily_log_id:this.daily_log_id,other_expense_id:-1,other_expense:{},voucher_number:"",check_number:"",amount:"",details:""},is_saving:!1,modal_is_saving:!1,other_expenses:[],modal:!1,search_key:""}},watch:{other_expense_usages:{immediate:!0,deep:!0,handler:function(){}},search_key:{immediate:!0,handler:function(){""!=this.search_key&&this.getDescriptions()}}},created:function(){},methods:{save:function(){var t=this;if(event.preventDefault(),-1==this.form.other_expense_id)return this.swal_transaction_error_data.text="Please select an expense description.",void this.swalRequestError();this.swalConfirmSubmit((function(e){e.value&&(t.modal_is_saving=!0,t.axios.post("daily_log/other_expense_usages/save",t.form).then((function(e){t.swalTransactionCompleted(),t.modal_is_saving=!1,t.modal=!1,t.$emit("addOtherExpense")})).catch((function(e){t.swal_transaction_error_data.text=e.response.data,t.swalRequestError(),t.modal_is_saving=!1})))}))},getDescriptions:function(){var t=this;this.axios.get("maintenance/other_expenses/search?search="+this.search_key).then((function(e){t.other_expenses=e.data})).catch((function(t){return console.log(t)}))},deleteItem:function(t){var e=this;this.swalConfirmDelete((function(a){a.value&&(e.is_saving=!0,e.axios.delete("daily_log/other_expense_usages/delete",{data:{id:t}}).then((function(t){e.swalTransactionCompleted(),e.is_saving=!1,e.$emit("addOtherExpense")})).catch((function(t){e.swal_transaction_error_data.text=t.response.data,e.swalRequestError(),e.is_saving=!1})))}))},select:function(t){this.form.other_expense=t,this.form.other_expense_id=t.id},addOtherExpense:function(){var t=this;event.preventDefault(),this.swalConfirmSubmit((function(e){if(e.value){t.is_saving=!0;var a={id:-1,description:t.search_key};t.axios.post("maintenance/other_expenses/save",a).then((function(e){t.swalTransactionCompleted(),t.select(e.data),t.is_saving=!1})).catch((function(e){t.swal_transaction_error_data.text=e.response.data,t.swalRequestError(),t.is_saving=!1}))}}))}}},ft=bt,ht=Object(m["a"])(ft,_t,pt,!1,null,null,null),gt=ht.exports,vt={mixins:[c["a"]],components:{NumberFormatComponent:l["a"],LaborUsage:B,EquipmentUsage:W,OtherExpenseUsage:gt,MaterialUsage:mt},props:{project_location_structure_item:{type:Object,default:function(){},required:!1},daily_log_id:{type:Number,required:!1}},data:function(){return{is_saving:!1,modal:!1,daily_log:{id:this.daily_log_id,transaction_date:"",project_location_structure_item_id:this.$route.params.project_location_structure_item_id,manpower_usages:[],equipment_usages:[],material_usages:[],other_expense_usages:[]}}},computed:{total:function(){return this.total_manpower_usage+this.total_equipment_usage+this.total_other_expense_usage+this.total_material_usage},total_manpower_usage:function(){return this.daily_log.manpower_usages.reduce((function(t,e){return t+Number(e.total)}),0)},total_equipment_usage:function(){return this.daily_log.equipment_usages.reduce((function(t,e){return t+Number(e.total)}),0)},total_other_expense_usage:function(){return this.daily_log.other_expense_usages.reduce((function(t,e){return t+Number(e.amount)}),0)},total_material_usage:function(){return 0}},watch:{project_location_structure_item:{immediate:!0,deep:!0,handler:function(){}},daily_log_id:{immediate:!0,deep:!0,handler:function(){-1!=this.daily_log_id&&this.get()}}},created:function(){},methods:{save:function(){var t=this;if(""==this.daily_log.transaction_date)return this.swal_transaction_error_data.text="Transaction date is required.",void this.swalRequestError();this.swalConfirmSubmit((function(e){if(e.value){t.is_saving=!0;var a=JSON.parse(JSON.stringify(t.daily_log));a.total_labor=t.total_manpower_usage,a.total_equipment=t.total_equipment_usage,a.total_material=t.total_material_usage,a.total_other_expense=t.total_other_expense_usage,a.grand_total=t.total,t.axios.post("daily_logs/save",a).then((function(e){t.swalTransactionCompleted(),t.is_saving=!1,-1!=t.daily_log.id?t.$emit("save"):t.daily_log.id=e.data.id})).catch((function(e){t.swal_transaction_error_data.text=e.response.data,t.swalRequestError(),t.is_saving=!1}))}}))},get:function(){var t=this;this.is_saving=!0,this.axios.get("daily_logs/get",{params:{id:this.daily_log.id}}).then((function(e){var a=e.data;a.transaction_date=e.data.transaction_date.default,r["bus"].$emit("refreshComputations"),t.daily_log=a,t.is_saving=!1})).catch((function(t){return console.log(t)}))}}},Ct=vt,xt=Object(m["a"])(Ct,R,L,!1,null,null,null),yt=xt.exports,wt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"card bg-light mb-3"},[a("div",{staticClass:"card-header bg-dark text-white"},[a("b-row",[a("b-col",[t.loading?a("div",[a("strong",[t._v(" Fetching result... ")])]):a("div",[a("font-awesome-icon",{attrs:{icon:"database"}}),a("strong",[t._v(" "+t._s(t.list.total)+" ")]),a("small",[t._v("Result/s found")])],1)]),a("b-col",{staticClass:"text-right"},[a("b-button",{attrs:{variant:"secondary",size:"sm"},on:{click:t.clickTopRightBtn}},[a("font-awesome-icon",{attrs:{icon:"plus"}}),t._v(" Add New Log ")],1)],1)],1)],1),a("div",{staticClass:"card-body bg-white mb-0"},[a("b-row",{staticClass:"mb-3"},[a("b-col",{attrs:{sm:"2"}},[a("b-form-select",{attrs:{options:t.options,size:"sm"},on:{change:t.changeDisplayNo},model:{value:t.selected_display_no,callback:function(e){t.selected_display_no=e},expression:"selected_display_no"}})],1),a("b-col",{attrs:{sm:"6","offset-sm":"4"}},[a("b-input-group",[a("b-input-group-prepend",[a("b-input-group-text",{staticClass:"bg-dark text-white"},[a("font-awesome-icon",{attrs:{icon:"search"}})],1)],1),a("b-form-input",{attrs:{type:"text",debounce:"500",placeholder:"Search...",autocomplete:"off"},model:{value:t.search_term,callback:function(e){t.search_term=e},expression:"search_term"}}),a("b-input-group-append",[a("b-button",{staticClass:"bg-dark text-white px-4",attrs:{variant:"dark",size:"sm",disabled:""==t.search_term},on:{click:t.clearSearch}},[a("font-awesome-icon",{attrs:{icon:"times"}})],1)],1)],1)],1)],1),a("b-table",{attrs:{selectable:"",selectedVariant:"info","select-mode":"single",dark:t.dark,hover:t.hover,striped:t.striped,bordered:t.bordered,fixed:t.fixed,responsive:"sm",items:t.table_items,fields:t.captions,busy:t.loading,"show-empty":"","head-variant":"dark"},on:{"row-dblclicked":t.rowDbClicked},scopedSlots:t._u([{key:"cell(labor)",fn:function(t){return[a("div",{staticClass:"text-center"},[a("number-format-component",{attrs:{input_value:Number(t.item.total_labor)}})],1)]}},{key:"cell(equipment)",fn:function(t){return[a("div",{staticClass:"text-center"},[a("number-format-component",{attrs:{input_value:Number(t.item.total_equipment)}})],1)]}},{key:"cell(material)",fn:function(t){return[a("div",{staticClass:"text-center"},[a("number-format-component",{attrs:{input_value:Number(t.item.total_material)}})],1)]}},{key:"cell(other_expense)",fn:function(t){return[a("div",{staticClass:"text-center"},[a("number-format-component",{attrs:{input_value:Number(t.item.total_other_expense)}})],1)]}},{key:"cell(total)",fn:function(t){return[a("div",{staticClass:"text-center"},[a("number-format-component",{attrs:{input_value:Number(t.item.grand_total)}})],1)]}},{key:"cell(action)",fn:function(e){return[a("div",{staticClass:"text-center"},[a("b-button",{attrs:{variant:"danger",size:"sm"},on:{click:function(a){return t.deleteRow(e.item.id)}}},[a("font-awesome-icon",{attrs:{icon:"minus-circle"}}),t._v(" Delete ")],1)],1)]}}])},[a("div",{staticClass:"text-center my-2",attrs:{slot:"table-busy"},slot:"table-busy"},[a("br"),a("b-spinner",{staticClass:"align-middle",attrs:{small:""}}),a("br"),a("br"),a("strong",[t._v("Loading")])],1)]),t.list.total>0?a("nav",[a("b-pagination",{staticClass:"mb-0",attrs:{disabled:t.loading,align:"right","total-rows":t.total_rows,"per-page":t.per_page},on:{input:t.getAll},model:{value:t.list.current_page,callback:function(e){t.$set(t.list,"current_page",e)},expression:"list.current_page"}})],1):t._e()],1)])])},kt=[],qt={name:"server-side-paginated-table",inheritAttrs:!1,mixins:[c["a"]],components:{NumberFormatComponent:l["a"]},props:{hover:{type:Boolean,default:!0},striped:{type:Boolean,default:!0},bordered:{type:Boolean,default:!0},small:{type:Boolean,default:!0},fixed:{type:Boolean,default:!0},fields:{type:[Array,Object],default:function(){return[]}},dark:{type:Boolean,default:!1},api_url:{type:String,required:!0},delete_url:{type:String,required:!0},top_right_btn:{type:String,default:"",required:!1},project_location_structure_item_id:{type:Number,default:-1,required:!0}},data:function(){return{selected:[],list:{data:[],from:1,to:0,current_page:1,total:0,per_page:1},result:[],loading:!0,searchTimeout:function(){return{type:Function,default:function(){return{}}}},search_term:"",options:[{value:10,text:"Display 10 records"},{value:25,text:"Display 25 records"},{value:50,text:"Display 50 records"},{value:100,text:"Display 100 records"}],selected_display_no:10}},computed:{table_items:function(){return this.list.data},per_page:function(){return parseInt(this.list.per_page)},total_rows:function(){return parseInt(this.list.total)},captions:function(){return this.fields},total_selected:function(){return parseInt(this.selected.length)}},created:function(){var t=this;r["bus"].$on("refreshComputations",(function(){t.getAll()}))},mounted:function(){},watch:{search_term:{immediate:!0,handler:function(){""!=this.search_term&&(this.loading=!0),this.list.current_page=1,this.getAll()}},project_location_structure_item_id:{immediate:!0,handler:function(){-1!=this.project_location_structure_item_id&&""!=this.project_location_structure_item_id&&(this.loading=!0,this.list.current_page=1,this.getAll())}}},methods:{getAll:function(){var t=this;this.loading=!0,this.axios.get(this.api_url+"?id="+this.project_location_structure_item_id+"&page="+this.list.current_page+"&per_page="+this.selected_display_no+"&search="+this.search_term).then((function(e){var a=e.data;t.list=a,t.loading=!1})).catch((function(t){return console.log(t)}))},clickTopRightBtn:function(){r["bus"].$emit("serverSidePaginatedTableTopRightBtnClicked")},rowDbClicked:function(t){this.$emit("itemDbClicked",t)},clearSearch:function(){this.search_term="",this.getAll()},changeDisplayNo:function(){this.loading=!0,this.list.current_page=1,this.getAll()},deleteRow:function(t){var e=this;this.swalConfirmDelete((function(a){a.value&&(e.loading=!0,e.axios.delete(e.delete_url,{data:{id:t}}).then((function(t){e.getAll(),e.swal_transaction_completed_data.text="Record successfully deleted.",e.swalTransactionCompleted(),e.loading=!1,r["bus"].$emit("refreshComputations")})).catch((function(t){e.swalRequestError(),e.loading=!1})))}))}}},jt=qt,Et=Object(m["a"])(jt,wt,kt,!1,null,null,null),Nt=Et.exports,Tt={mixins:[c["a"]],components:{NumberFormatComponent:l["a"],Modal:yt,ServerSidePaginatedTable:Nt},props:{project_location_structure_item:{type:Object,default:function(){},required:!1}},data:function(){return{table_settings:{api_url:"daily_logs/get_by_item",delete_url:"daily_logs/delete",fields:[{key:"transaction_date.other_formats.format_1",label:"Transaction Date"},{key:"labor",label:"Labor",class:"text-center"},{key:"equipment",label:"Equipment",class:"text-center"},{key:"other_expense",label:"Other Expense",class:"text-center"},{key:"total",label:"Total",class:"text-center"},{key:"action",label:"Action",class:"text-center"}]},is_saving:!1,modal:!1,daily_log_id:-1}},watch:{project_location_structure_item:{immediate:!0,deep:!0,handler:function(){}}},created:function(){var t=this;r["bus"].$on("serverSidePaginatedTableTopRightBtnClicked",(function(){t.modal=!0}))},methods:{viewItem:function(t){this.daily_log_id=t,this.modal=!0},save:function(){this.modal=!1,r["bus"].$emit("refreshComputations")},itemDbClicked:function(t){this.viewItem(t.id)}}},$t=Tt,At=Object(m["a"])($t,D,O,!1,null,null,null),St=At.exports,Dt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("table",{staticClass:"table border-bottom"},[t._m(0),a("tbody",[t._l(t.inventory,(function(e,s){return[a("tr",[a("th",{attrs:{scope:"row"}},[t._v(t._s(e.name))]),a("td",{staticClass:"text-right"},[a("a",{attrs:{href:"#"},on:{click:function(a){return t.show_log_details(e)}}},[a("number-format-component",{attrs:{input_value:Number(e.balance),currency:!1}}),t._v(" "+t._s(e.description)+" ")],1)])])]}))],2)]),a("b-modal",{attrs:{centered:"",size:"xl","body-class":"p-0","hide-footer":!0,"hide-header":!0},model:{value:t.log_details_modal,callback:function(e){t.log_details_modal=e},expression:"log_details_modal"}},[a("log-details",{attrs:{material:t.material}})],1)],1)},Ot=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",{staticClass:"thead-dark"},[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("Material")]),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Qty")])])])}],Rt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"card bg-light mb-0"},[a("div",{staticClass:"card-header bg-dark text-white d-flex justify-content-between align-items-center"},[a("h6",{staticClass:"mb-0"},[a("font-awesome-icon",{attrs:{icon:"plus-circle"}}),t._v(" Log Details")],1)]),a("div",{staticClass:"card-body bg-white position-relative min-height-300"},[t.is_saving?a("b-row",{staticClass:"loader",attrs:{"align-v":"center"}},[a("b-col",[a("b-spinner"),a("br"),a("br"),a("strong",[t._v("Loading")])],1)],1):t._e(),a("table",{staticClass:"table border-bottom"},[t._m(0),a("tbody",[t._l(t.materials,(function(e,s){return[a("tr",[a("th",{attrs:{scope:"row"}},[t._v(t._s(e.name))]),a("td",[t._v("P "+t._s(e.price))]),a("td",{staticClass:"text-right"},[a("a",{attrs:{href:"#"},on:{click:function(a){return t.show_log_details(e)}}},[a("number-format-component",{attrs:{input_value:Number(e.balance),currency:!1}}),t._v(" "+t._s(e.description)+" ")],1)])])]}))],2)])],1)]),a("b-modal",{attrs:{centered:"",size:"xl","body-class":"p-0","hide-footer":!0,"hide-header":!0},model:{value:t.log_details_modal,callback:function(e){t.log_details_modal=e},expression:"log_details_modal"}},[a("log-details",{attrs:{material:t.selected_material}})],1)],1)},Lt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",{staticClass:"thead-dark"},[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("Material")]),a("th",{attrs:{scope:"col"}},[t._v("Price")]),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Qty Left")])])])}],Mt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"card bg-light mb-0"},[a("div",{staticClass:"card-header bg-dark text-white d-flex justify-content-between align-items-center"},[a("h6",{staticClass:"mb-0"},[a("font-awesome-icon",{attrs:{icon:"plus-circle"}}),t._v(" Log Details")],1)]),a("div",{staticClass:"card-body bg-white position-relative min-height-300"},[t.is_saving?a("b-row",{staticClass:"loader",attrs:{"align-v":"center"}},[a("b-col",[a("b-spinner"),a("br"),a("br"),a("strong",[t._v("Loading")])],1)],1):t._e(),a("log-details-table",{ref:"displayTable",attrs:{fields:t.table_settings.fields,api_url:t.table_settings.api_url,delete_url:t.table_settings.delete_url,material:t.material}})],1)]),a("b-modal",{attrs:{centered:"",size:"xl","body-class":"p-0","hide-footer":!0,"hide-header":!0},model:{value:t.log_details_modal,callback:function(e){t.log_details_modal=e},expression:"log_details_modal"}},[a("log-details",{attrs:{material:t.material}})],1)],1)},zt=[],It=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-row",{staticClass:"mb-3"},[a("b-col",{attrs:{sm:"5"}},[a("b-form-select",{attrs:{options:t.options,size:"sm"},on:{change:t.changeDisplayNo},model:{value:t.selected_display_no,callback:function(e){t.selected_display_no=e},expression:"selected_display_no"}})],1),a("b-col",{staticClass:"text-right"},[t.loading?a("div",[a("strong",[t._v(" Fetching result... ")])]):a("div",[a("font-awesome-icon",{attrs:{icon:"database"}}),a("strong",[t._v(" "+t._s(t.list.total)+" ")]),a("small",[t._v("Result/s found")])],1)])],1),a("b-table",{attrs:{selectable:"",selectedVariant:"info","select-mode":"single",dark:t.dark,hover:t.hover,striped:t.striped,bordered:t.bordered,fixed:t.fixed,responsive:"sm",items:t.table_items,fields:t.captions,busy:t.loading,"show-empty":"","head-variant":"dark"},on:{"row-dblclicked":t.rowDbClicked},scopedSlots:t._u([{key:"cell(price)",fn:function(t){return[a("div",{staticClass:"text-right"},[a("number-format-component",{attrs:{input_value:Number(t.item.price)}})],1)]}},{key:"cell(action)",fn:function(e){return[a("div",{staticClass:"text-center"},[a("b-button",{attrs:{variant:"danger",size:"sm"},on:{click:function(a){return t.deleteRow(e.item.id)}}},[a("font-awesome-icon",{attrs:{icon:"minus-circle"}}),t._v(" Delete ")],1)],1)]}}])},[a("div",{staticClass:"text-center my-2",attrs:{slot:"table-busy"},slot:"table-busy"},[a("br"),a("b-spinner",{staticClass:"align-middle",attrs:{small:""}}),a("br"),a("br"),a("strong",[t._v("Loading")])],1)]),t.list.total>0?a("nav",[a("b-pagination",{staticClass:"mb-0",attrs:{disabled:t.loading,align:"right","total-rows":t.total_rows,"per-page":t.per_page},on:{input:t.getAll},model:{value:t.list.current_page,callback:function(e){t.$set(t.list,"current_page",e)},expression:"list.current_page"}})],1):t._e()],1)},Ft=[],Pt={name:"server-side-paginated-table",inheritAttrs:!1,mixins:[c["a"]],components:{NumberFormatComponent:l["a"]},props:{hover:{type:Boolean,default:!0},striped:{type:Boolean,default:!0},bordered:{type:Boolean,default:!0},small:{type:Boolean,default:!0},fixed:{type:Boolean,default:!0},fields:{type:[Array,Object],default:function(){return[]}},dark:{type:Boolean,default:!1},api_url:{type:String,required:!0},delete_url:{type:String,required:!0},top_right_btn:{type:String,default:"",required:!1},top_right_btn_redirect:{type:Boolean,default:!0,required:!1},material:{type:[Array,Object],default:function(){return[]}}},data:function(){return{selected:[],list:{data:[],from:1,to:0,current_page:1,total:0,per_page:1},result:[],loading:!0,searchTimeout:function(){return{type:Function,default:function(){return{}}}},search_term:"",options:[{value:10,text:"Display 10 records"},{value:25,text:"Display 25 records"},{value:50,text:"Display 50 records"},{value:100,text:"Display 100 records"}],selected_display_no:10}},computed:{table_items:function(){return this.list.data},per_page:function(){return parseInt(this.list.per_page)},total_rows:function(){return parseInt(this.list.total)},captions:function(){return this.fields},total_selected:function(){return parseInt(this.selected.length)}},mounted:function(){this.getAll()},methods:{getAll:function(){var t=this;this.loading=!0,this.axios.get(this.api_url+"?id="+this.$route.params.project_location_structure_item_id+"&material_id="+this.material.material_id+"&price="+this.material.price+"&page="+this.list.current_page+"&per_page="+this.selected_display_no+"&search="+this.search_term).then((function(e){var a=e.data;t.list=a,t.loading=!1})).catch((function(t){return console.log(t)}))},clickTopRightBtn:function(){r["bus"].$emit("serverSidePaginatedTableTopRightBtnClicked")},rowDbClicked:function(t){r["bus"].$emit("serverSidePaginatedTableDbClick",t)},searching:function(){this.loading=!0,clearTimeout(this.searchTimeout)},search:function(){var t=this;this.searchTimeout=setTimeout((function(){t.list.current_page=1,t.getAll(),clearTimeout(t.searchTimeout)}),1e3)},clearSearch:function(){this.search_term="",this.getAll()},changeDisplayNo:function(){this.loading=!0,this.list.current_page=1,this.getAll()},deleteRow:function(t){var e=this;this.swalConfirmDelete((function(a){a.value&&(e.loading=!0,e.axios.delete(e.delete_url,{data:{id:t}}).then((function(t){e.getAll(),e.swal_transaction_completed_data.text="Record successfully deleted.",e.swalTransactionCompleted(),e.loading=!1})).catch((function(t){e.swalRequestError(),e.loading=!1})))}))}}},Bt=Pt,Ht=Object(m["a"])(Bt,It,Ft,!1,null,null,null),Ut=Ht.exports,Jt={mixins:[c["a"]],components:{NumberFormatComponent:l["a"],LogDetailsTable:Ut},props:{material:{type:Object,default:function(){},required:!1}},data:function(){return{is_saving:!1,table_settings:{api_url:"project/location/structure/items/log-details",delete_url:"maintenance/warehouses/delete",fields:[{key:"remarks",label:"Remarks"},{key:"price",label:"Price"},{key:"in",label:"IN",class:"text-center"},{key:"out",label:"OUT",class:"text-center"},{key:"balance",label:"BALANCE",class:"text-center"},{key:"logs.create_details.date_time.other_formats.format_1",label:"DATE ENCODED",class:"text-center"}]}}},watch:{material:{immediate:!0,handler:function(){}}},created:function(){},methods:{}},Qt=Jt,Vt=Object(m["a"])(Qt,Mt,zt,!1,null,null,null),Wt=Vt.exports,Gt={mixins:[c["a"]],components:{NumberFormatComponent:l["a"],LogDetails:Wt},props:{material:{type:Object,default:function(){},required:!1}},data:function(){return{is_saving:!1,materials:[],log_details_modal:!1,selected_material:{}}},watch:{material:{immediate:!0,handler:function(){}}},created:function(){this.get(),console.log(this.$route.params)},methods:{get:function(){var t=this;this.is_saving=!0,this.axios.get("project/location/structure/items/log-details-per-price",{params:{id:this.$route.params.project_location_structure_item_id,material_id:this.material.material_id}}).then((function(e){t.materials=e.data,t.is_saving=!1})).catch((function(t){return console.log(t)}))},show_log_details:function(t){this.log_details_modal=!0,this.selected_material=t}}},Yt=Gt,Kt=Object(m["a"])(Yt,Rt,Lt,!1,null,null,null),Xt=Kt.exports,Zt={mixins:[c["a"]],components:{NumberFormatComponent:l["a"],LogDetails:Xt},props:{inventory:{type:[Array,Object],default:function(){return[]},required:!1}},data:function(){return{is_saving:!1,log_details_modal:!1,material:{}}},watch:{inventory:{immediate:!0,deep:!0,handler:function(){}}},created:function(){},methods:{show_log_details:function(t){this.log_details_modal=!0,this.material=t}}},te=Zt,ee=Object(m["a"])(te,Dt,Ot,!1,null,null,null),ae=ee.exports,se=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"card bg-light mb-0"},[a("div",{staticClass:"card-header bg-dark text-white d-flex justify-content-between align-items-center"},[a("h6",{staticClass:"mb-0"},[a("font-awesome-icon",{attrs:{icon:"check-square"}}),t._v(" Progress Report")],1),a("b-button",{attrs:{variant:"secondary",size:"sm"},on:{click:function(e){t.modal=!0}}},[a("font-awesome-icon",{attrs:{icon:"plus-circle"}}),t._v(" Add Monthly Estimate ")],1)],1),a("div",{staticClass:"card-body bg-white position-relative"},[t.is_saving?a("b-row",{staticClass:"loader",attrs:{"align-v":"center"}},[a("b-col",[a("b-spinner"),a("br"),a("br"),a("strong",[t._v("Loading")])],1)],1):t._e(),a("b-row",{staticClass:"m-0 mb-3"},[a("b-col",{staticClass:"p-0"},[a("b-row",{staticClass:"m-0 border"},[a("b-col",{staticClass:"text-center p-2 bg-primary text-white d-flex align-items-center justify-content-center",attrs:{cols:"2"}},[a("font-awesome-icon",{staticClass:"h2 mb-0",attrs:{icon:"check-circle"}})],1),a("b-col",{staticClass:"p-3 bg-white d-flex align-items-center"},[a("div",[a("h4",{staticClass:"mb-0"},[a("strong",[a("number-format-component",{attrs:{input_value:Number(t.project_location_structure_item.qty),currency:!1}})],1)]),a("small",{staticClass:"text-muted text-uppercase font-weight-bold"},[t._v("ITEM QUANTITY")])])])],1)],1),a("b-col",{staticClass:"p-0 pl-3"},[a("b-row",{staticClass:"m-0 h-100 border"},[a("b-col",{staticClass:"text-center p-2 bg-warning text-white d-flex align-items-center justify-content-center",attrs:{cols:"2"}},[a("font-awesome-icon",{staticClass:"h2 mb-0",attrs:{icon:"check-circle"}})],1),a("b-col",{staticClass:"p-3 bg-white d-flex align-items-center"},[a("div",[a("h4",{staticClass:"mb-0"},[a("strong",[a("number-format-component",{attrs:{input_value:Number(t.project_location_structure_item.progress_estimate),currency:!1}})],1)]),a("small",{staticClass:"text-muted text-uppercase font-weight-bold"},[t._v("TOTAL ESTIMATE")])])])],1)],1),a("b-col",{staticClass:"p-0 pl-3"},[a("b-row",{staticClass:"m-0 h-100 border"},[a("b-col",{staticClass:"text-center p-2 bg-success text-white d-flex align-items-center justify-content-center",attrs:{cols:"2"}},[a("font-awesome-icon",{staticClass:"h2 mb-0",attrs:{icon:"check-circle"}})],1),a("b-col",{staticClass:"p-3 bg-white d-flex align-items-center"},[a("div",[a("h4",{staticClass:"mb-0"},[a("strong",[a("number-format-component",{attrs:{input_value:Number(t.project_location_structure_item.progress_accomplishment),currency:!1}})],1)]),a("small",{staticClass:"text-muted text-uppercase font-weight-bold"},[t._v("TOTAL ACCOMPLISHMENT")])])])],1)],1),a("b-col",{staticClass:"p-0 pl-3"},[a("b-row",{staticClass:"m-0 h-100 border"},[a("b-col",{staticClass:"text-center p-2 bg-danger text-white d-flex align-items-center justify-content-center",attrs:{cols:"2"}},[a("font-awesome-icon",{staticClass:"h2 mb-0",attrs:{icon:"check-circle"}})],1),a("b-col",{staticClass:"p-3 bg-white d-flex align-items-center"},[a("div",[a("h4",{staticClass:"mb-0"},[a("strong",[a("number-format-component",{attrs:{input_value:Number(t.project_location_structure_item.progress_balance),currency:!1}})],1)]),a("small",{staticClass:"text-muted text-uppercase font-weight-bold"},[t._v("TOTAL BALANCE")])])])],1)],1)],1),a("b-row",[a("b-col",{staticClass:"px-3"},[a("table",{staticClass:"table table-bordered mb-0"},[a("thead",{staticClass:"bg-light text-dark"},[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("Date")]),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Estimated Qty")]),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Accomplishment")]),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Balance")]),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Details")]),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Action")])])]),a("tbody",t._l(t.project_location_structure_item.progresses,(function(e,s){return a("tr",[a("th",{attrs:{scope:"row"}},[t._v(t._s(e.transaction_date.other_formats.format_1))]),a("td",{staticClass:"text-right"},[a("number-format-component",{attrs:{input_value:Number(e.qty),currency:!1}})],1),a("td",{staticClass:"text-right"},[a("number-format-component",{attrs:{input_value:Number(e.usage),currency:!1}})],1),a("td",{staticClass:"text-right"},[a("number-format-component",{attrs:{input_value:Number(e.balance),currency:!1}})],1),a("td",[t._v(" "+t._s(e.details)+" ")]),a("td",{staticClass:"text-center"},[a("b-button",{staticClass:"mr-2",attrs:{type:"button",size:"sm",variant:"info"},on:{click:function(a){return t.selectProgress(e)}}},[a("font-awesome-icon",{attrs:{icon:"edit"}}),t._v(" View")],1),a("b-button",{attrs:{type:"submit",size:"sm",variant:"danger"},on:{click:function(a){return t.deleteProgress(e.id)}}},[a("font-awesome-icon",{attrs:{icon:"minus-circle"}}),t._v(" Remove")],1)],1)])})),0)])])],1)],1)]),a("b-modal",{attrs:{centered:"",size:"xl","body-class":"p-0","modal-class":"xxl-modal","hide-footer":!0,"hide-header":!0},on:{hidden:function(e){return t.refresh()}},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[a("form-component",{attrs:{progress_id:t.selected_progress.id}})],1)],1)},ie=[],re=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-row",{staticClass:"m-0"},[a("b-col",{staticClass:"p-0"},[a("div",{staticClass:"card bg-light mb-0"},[a("div",{staticClass:"card-header bg-dark text-white"},[a("h6",{staticClass:"mb-0"},[a("font-awesome-icon",{attrs:{icon:"plus-circle"}}),t._v(" Add New Item")],1)]),a("div",{staticClass:"card-body bg-white"},[t.is_saving?a("b-row",{staticClass:"loader",attrs:{"align-v":"center"}},[a("b-col",[a("b-spinner"),a("br"),a("br"),a("strong",[t._v("Loading")])],1)],1):t._e(),a("b-row",[a("b-col",{attrs:{cols:"4"}},[a("CRow",[a("CCol",[a("CWidgetBrand",{staticClass:"w-100",attrs:{color:"facebook",rightHeader:t.form.qty,rightFooter:"ESTIMATE",leftHeader:t.form.usage,leftFooter:"USAGE"}},[a("div",{staticClass:"p-4 w-100"},[a("h1",{staticClass:"mb-0"},[a("number-format-component",{attrs:{input_value:Number(t.form.balance),currency:!1}})],1),a("h5",[t._v("BALANCE")])])])],1)],1),a("b-form",{on:{submit:t.save}},[a("b-form-group",{attrs:{label:"Month:",description:"This field is required"}},[a("b-form-input",{attrs:{type:"month",required:"",size:"sm"},model:{value:t.form.transaction_date,callback:function(e){t.$set(t.form,"transaction_date",e)},expression:"form.transaction_date"}})],1),a("b-form-group",{attrs:{label:"Estimated Qty:",description:"This field is required"}},[a("b-form-input",{attrs:{type:"number",step:"any",required:"",size:"sm"},model:{value:t.form.qty,callback:function(e){t.$set(t.form,"qty",e)},expression:"form.qty"}})],1),a("b-form-group",{attrs:{label:"Details:",description:"This field is required"}},[a("b-form-textarea",{attrs:{id:"textarea",placeholder:"Enter something...",rows:"3","max-rows":"6",size:"sm"},model:{value:t.form.details,callback:function(e){t.$set(t.form,"details",e)},expression:"form.details"}})],1),a("div",{staticClass:"text-right"},[a("b-button",{attrs:{type:"submit",variant:"dark",size:"sm"}},[a("font-awesome-icon",{attrs:{icon:"save"}}),t._v(" Save")],1)],1)],1)],1),a("b-col",[a("div",{staticClass:"card bg-light mb-0"},[a("div",{staticClass:"card-header bg-dark text-white d-flex justify-content-between align-items-center"},[a("h6",{staticClass:"mb-0"},[a("font-awesome-icon",{attrs:{icon:"check-square"}}),t._v(" Accomplishments")],1)]),a("div",{staticClass:"card-body bg-white position-relative"},[t.is_saving_details?a("b-row",{staticClass:"loader",attrs:{"align-v":"center"}},[a("b-col",[a("b-spinner"),a("br"),a("br"),a("strong",[t._v("Loading")])],1)],1):t._e(),a("locked-component",{attrs:{status:-1==t.form.id,display_text:"Save your monthly estimate first."}}),a("fieldset",{staticClass:"border p-3 mb-3 bg-light"},[a("legend",{staticClass:"w-auto bg-facebook px-3 py-1 text-white rounded border h5"},[t._v("DAILY ACCOMPLISHMENT")]),a("b-form",{on:{submit:t.saveDetail}},[a("b-row",[a("b-col",[a("b-form-group",{attrs:{label:"Date:",description:"This field is required"}},[a("b-form-input",{attrs:{type:"date",required:"",size:"sm"},model:{value:t.progress_details_form.transaction_date,callback:function(e){t.$set(t.progress_details_form,"transaction_date",e)},expression:"progress_details_form.transaction_date"}})],1)],1),a("b-col",[a("b-form-group",{attrs:{label:"Qty:",description:"This field is required"}},[a("b-form-input",{attrs:{type:"number",step:"any",required:"",size:"sm"},model:{value:t.progress_details_form.qty,callback:function(e){t.$set(t.progress_details_form,"qty",e)},expression:"progress_details_form.qty"}})],1)],1),a("b-col",[a("b-form-group",{attrs:{label:"Details:",description:"This field is required"}},[a("b-input-group",{attrs:{size:"sm"},scopedSlots:t._u([{key:"append",fn:function(){return[a("b-button",{attrs:{type:"submit",variant:"facebook",size:"sm"}},[a("font-awesome-icon",{attrs:{icon:"plus-circle"}}),t._v(" Add Accomplishment")],1)]},proxy:!0}])},[a("b-form-input",{attrs:{type:"text",required:"",size:"sm"},model:{value:t.progress_details_form.details,callback:function(e){t.$set(t.progress_details_form,"details",e)},expression:"progress_details_form.details"}})],1)],1)],1)],1)],1)],1),a("b-row",[a("b-col",{staticClass:"px-3"},[a("table",{staticClass:"table border mb-0"},[a("thead",{staticClass:"bg-light text-dark"},[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("Date")]),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Qty")]),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Details")]),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Action ")])])]),a("tbody",t._l(t.form.progress_details,(function(e,s){return a("tr",[a("th",{attrs:{scope:"row"}},[t._v(t._s(e.transaction_date.other_formats.format_1))]),a("td",{staticClass:"text-right"},[a("number-format-component",{attrs:{input_value:Number(e.qty),currency:!1}})],1),a("td",{staticClass:"text-right"},[t._v(" "+t._s(e.details)+" ")]),a("td",{staticClass:"text-center"},[a("b-button",{attrs:{type:"submit",size:"sm",variant:"danger"},on:{click:function(a){return t.deleteDetail(e.id)}}},[a("font-awesome-icon",{attrs:{icon:"minus-circle"}}),t._v(" Remove")],1)],1)])})),0)])])],1)],1)])])],1)],1)])])],1)],1)},oe=[],ne=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.status?a("b-row",{staticClass:"loader",attrs:{"align-v":"center"}},[a("b-col",[a("font-awesome-icon",{staticClass:"h1 mb-0 text-muted",attrs:{icon:"lock"}}),a("br"),a("br"),a("strong",[t._v(t._s(t.display_text))])],1)],1):t._e()],1)},ce=[],le={props:{status:{type:Boolean,default:!1,required:!1},display_text:{type:String,default:"Not Applicable",required:!1}},watch:{status:{immediate:!0,deep:!0,handler:function(){}}},data:function(){return{}},created:function(){},methods:{}},ue=le,de=Object(m["a"])(ue,ne,ce,!1,null,null,null),me=de.exports,_e={mixins:[c["a"]],components:{NumberFormatComponent:l["a"],LockedComponent:me},props:{progress_id:{type:Number,default:function(){return-1},required:!1}},data:function(){return{form:{id:-1,project_location_structure_item_id:this.$route.params.project_location_structure_item_id,transaction_date:"",qty:"",usage:0,balance:0,details:"",progress_details:[]},progress_details_form:{id:-1,transaction_date:"",qty:"",details:"",is_deleted:!1},progress_details_form_copy:{},is_saving:!1,is_saving_details:!1,is_locked:!1}},watch:{progress_id:{immediate:!0,deep:!0,handler:function(){this.get()}}},created:function(){console.log(this.progress_id),this.progress_details_form_copy=JSON.parse(JSON.stringify(this.progress_details_form))},methods:{save:function(){var t=this;event.preventDefault(),this.swalConfirmSubmit((function(e){e.value&&(t.is_saving=!0,t.axios.post("progresses/save",t.form).then((function(e){t.swalTransactionCompleted(),t.is_saving=!1,t.form.id=e.data.id})).catch((function(e){t.swal_transaction_error_data.text=e.response.data,t.swalRequestError(),t.is_saving=!1})))}))},saveDetail:function(){var t=this;event.preventDefault(),this.swalConfirmSubmit((function(e){if(e.value){t.is_saving_details=!0;var a=t.progress_details_form;a.progress_id=t.form.id,t.axios.post("progress_details/save",a).then((function(e){t.swalTransactionCompleted(),t.is_saving_details=!1,t.progress_details_form=JSON.parse(JSON.stringify(t.progress_details_form_copy)),t.get()})).catch((function(e){t.swal_transaction_error_data.text=e.response.data,t.swalRequestError(),t.is_saving_details=!1}))}}))},deleteDetail:function(t){var e=this;this.swalConfirmDelete((function(a){a.value&&(e.is_saving_details=!0,e.axios.delete("progress_details/delete",{data:{id:t}}).then((function(t){e.swalTransactionCompleted(),e.is_saving_details=!1,e.get()})).catch((function(t){e.swal_transaction_error_data.text=t.response.data,e.swalRequestError(),e.is_saving_details=!1})))}))},get:function(){var t=this;-1!=this.progress_id&&(this.is_saving=!0,this.axios.get("progresses/get",{params:{id:this.progress_id}}).then((function(e){var a=e.data;a.transaction_date=a.transaction_date.default,t.form=e.data,t.is_saving=!1})).catch((function(t){return console.log(t)})))}}},pe=_e,be=Object(m["a"])(pe,re,oe,!1,null,null,null),fe=be.exports,he={mixins:[c["a"]],components:{NumberFormatComponent:l["a"],FormComponent:fe},props:{project_location_structure_item:{type:Object,default:function(){},required:!1}},data:function(){return{is_saving:!1,modal:!1,selected_progress:{}}},watch:{project_location_structure_item:{immediate:!0,deep:!0,handler:function(){}}},created:function(){},methods:{deleteProgress:function(t){var e=this;this.swalConfirmDelete((function(a){a.value&&(e.is_saving_details=!0,e.axios.delete("progresses/delete",{data:{id:t}}).then((function(t){e.swalTransactionCompleted(),e.is_saving_details=!1,e.refresh()})).catch((function(t){e.swal_transaction_error_data.text=t.response.data,e.swalRequestError(),e.is_saving_details=!1})))}))},selectProgress:function(t){var e=JSON.parse(JSON.stringify(t));e.transaction_date=t.transaction_date.default,this.selected_progress=e,this.modal=!0},refresh:function(){this.selected_progress={},this.$emit("refresh")}}},ge=he,ve=Object(m["a"])(ge,se,ie,!1,null,null,null),Ce=ve.exports,xe=a("8210"),ye=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-row",{staticClass:"m-0"},[a("b-col",{staticClass:"p-0"},[a("div",{staticClass:"card bg-light mb-0"},[a("div",{staticClass:"card-header bg-dark text-white"},[a("h6",{staticClass:"mb-0"},[a("font-awesome-icon",{attrs:{icon:"chart-pie"}}),t._v(" Reports")],1)]),a("div",{staticClass:"card-body bg-white"},[a("div",{staticClass:"list-group"},[a("a",{staticClass:"list-group-item list-group-item-action",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.progressReport()}}},[t._v("Progress Report")]),a("a",{staticClass:"list-group-item list-group-item-action",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.billOfMaterials()}}},[t._v("Bill of Materials")]),a("a",{staticClass:"list-group-item list-group-item-action",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.detailedEstimate()}}},[t._v("Detailed Estimate")]),a("a",{staticClass:"list-group-item list-group-item-action",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.materialInventory()}}},[t._v("Material Inventory")])])])])])],1)],1)},we=[],ke={mixins:[c["a"]],props:{project_location_structure_item:{type:Object,default:function(){},required:!1}},data:function(){return{}},watch:{project_location_structure_item:{immediate:!0,deep:!0,handler:function(){}}},created:function(){},methods:{progressReport:function(){var t=this.$router.resolve({path:"/reports/progress/"+this.project_location_structure_item.id});window.open(t.href,"_blank")},billOfMaterials:function(){var t=this.$router.resolve({path:"/reports/bill-of-materials/"+this.project_location_structure_item.id});window.open(t.href,"_blank")},detailedEstimate:function(){var t=this.$router.resolve({path:"/reports/detailed-estimate/"+this.project_location_structure_item.id});window.open(t.href,"_blank")},materialInventory:function(){var t=this.$router.resolve({path:"/reports/material-inventory/"+this.project_location_structure_item.id});window.open(t.href,"_blank")}}},qe=ke,je=Object(m["a"])(qe,ye,we,!1,null,null,null),Ee=je.exports,Ne=a("edf9"),Te={components:{BreadCrumbs:Ne["a"],ProjectLocationStructureFormComponent:xe["a"],LaborEstimate:p,EquipmentEstimate:C,MaterialEstimate:j,Manpower:S,UsagesIndex:St,Inventory:ae,ProgressReport:Ce,Reports:Ee},data:function(){return{project_location_structure_item:{description:"",labor_estimates:[],equipment_estimates:[],material_estimates:[],project_location_structure_item_manpowers:[]},inventory:[],is_saving:!1}},created:function(){var t=this;this.get(),r["bus"].$on("refreshComputations",(function(e){t.get()}))},methods:{addProjectLocationStructureItem:function(){this.add_project_location_structure_item_modal=!1},get:function(){var t=this;this.is_saving=!0,this.axios.get("project/location/structure/items/get",{params:{id:this.$route.params.project_location_structure_item_id}}).then((function(e){t.project_location_structure_item=e.data.details,t.inventory=e.data.materials,t.is_saving=!1})).catch((function(t){return console.log(t)}))}}},$e=Te,Ae=Object(m["a"])($e,s,i,!1,null,null,null);e["default"]=Ae.exports},"73e4":function(t,e,a){"use strict";e["a"]={data:function(){return{swal_confirm_submit_data:{title:"Please confirm your submission.",text:"Your changes will be saved after this process.",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, save it!",cancelButtonText:"Wait, im not done yet!"},swal_confirm_delete_data:{title:"Are you sure you want to delete this record?",text:"Note: This action will not be undone.",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete!",cancelButtonText:"No, I dont want to delete it!"},swal_transaction_completed_data:{title:"Transaction Completed!",text:"Data Successfully Saved.",icon:"success",showConfirmButton:!1,timer:1e3},swal_transaction_warning_data:{title:"Warning!",text:"Complete all necessary fields!",icon:"warning"},swal_transaction_error_data:{title:"Error!",text:"Please contact your Administrator.",icon:"error"}}},methods:{swalConfirmSubmit:function(t){this.$swal(this.swal_confirm_submit_data).then((function(e){t(e)}))},swalFieldsRequired:function(){this.$swal.fire("Error!","Please fill out all required fields","error")},swalRequestError:function(){this.$swal.fire(this.swal_transaction_error_data)},swalTransactionCompleted:function(){this.$swal.fire(this.swal_transaction_completed_data)},swalConfirmDelete:function(t){this.$swal(this.swal_confirm_delete_data).then((function(e){t(e)}))},swalTransactionWarning:function(){this.$swal.fire(this.swal_transaction_warning_data)}}}},8210:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-row",{staticClass:"m-0"},[a("b-col",{staticClass:"p-0"},[a("div",{staticClass:"card bg-light mb-0"},[a("div",{staticClass:"card-header bg-dark text-white"},[a("h6",{staticClass:"mb-0"},[a("font-awesome-icon",{attrs:{icon:"plus-circle"}}),t._v(" Add New Item")],1)]),a("div",{staticClass:"card-body bg-white"},[t.is_saving?a("b-row",{staticClass:"loader",attrs:{"align-v":"center"}},[a("b-col",[a("b-spinner"),a("br"),a("br"),a("strong",[t._v("Loading")])],1)],1):t._e(),a("b-form",{on:{submit:t.save}},[a("b-form-group",{attrs:{label:"Item Name:",description:"This field is required"}},[a("b-form-input",{attrs:{type:"text",required:""},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1),a("b-form-group",{attrs:{label:"Item Unit:",description:"This field is required"}},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.form.item_unit_id,expression:"form.item_unit_id"}],staticClass:"form-control",attrs:{required:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.form,"item_unit_id",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:""}},[t._v("Please Select")]),t._l(t.item_units,(function(e){return a("option",{domProps:{value:e.id}},[t._v(" "+t._s(e.description)+" ")])}))],2)]),a("b-form-group",{attrs:{label:"Qty:",description:"This field is required"}},[a("b-form-input",{attrs:{type:"number",step:"any",required:""},model:{value:t.form.qty,callback:function(e){t.$set(t.form,"qty",e)},expression:"form.qty"}})],1),a("b-form-group",{attrs:{label:"Estimated Hours:",description:"This field is required"}},[a("b-form-input",{attrs:{type:"number",step:"any",required:""},model:{value:t.form.estimated_hours,callback:function(e){t.$set(t.form,"estimated_hours",e)},expression:"form.estimated_hours"}})],1),a("b-form-group",{attrs:{label:"Estimated Days:",description:"This field is required"}},[a("b-form-input",{attrs:{type:"number",step:"any",required:""},model:{value:t.form.estimated_days,callback:function(e){t.$set(t.form,"estimated_days",e)},expression:"form.estimated_days"}})],1),a("b-form-group",{attrs:{label:"Estimated Budget:",description:"This field is required"}},[a("b-form-input",{attrs:{type:"number",step:"any",required:""},model:{value:t.form.estimated_budget,callback:function(e){t.$set(t.form,"estimated_budget",e)},expression:"form.estimated_budget"}})],1),a("div",{staticClass:"text-right"},[a("b-button",{attrs:{type:"submit",variant:"dark",size:"sm"}},[a("font-awesome-icon",{attrs:{icon:"save"}}),t._v(" Save")],1)],1)],1)],1)])])],1)],1)},i=[],r=a("73e4"),o={mixins:[r["a"]],props:{project_location_structure_item:{type:Object,default:function(){},required:!1}},data:function(){return{form:{id:-1,description:"",project_location_structure_id:this.$route.params.project_location_structure_id,item_unit_id:"",qty:"",estimated_hours:"",estimated_days:"",estimated_budget:""},is_saving:!1,item_units:[]}},watch:{project_location_structure_item:{immediate:!0,deep:!0,handler:function(){"undefined"!==typeof this.project_location_structure_item&&this.get()}}},created:function(){"undefined"!==typeof this.project_location_structure_item&&this.get(),this.getFields()},methods:{get:function(){this.is_saving=!0,this.form=this.project_location_structure_item,this.is_saving=!1},save:function(){var t=this;event.preventDefault(),this.swalConfirmSubmit((function(e){e.value&&(t.is_saving=!0,t.axios.post("project/location/structure/items/save",t.form).then((function(e){t.swalTransactionCompleted(),t.is_saving=!1,t.$emit("addProjectLocationStructureItem")})).catch((function(e){t.swal_transaction_error_data.text=e.response.data,t.swalRequestError(),t.is_saving=!1})))}))},getFields:function(){var t=this;this.is_saving=!0,this.axios.get("maintenance/item_units/all").then((function(e){t.item_units=e.data,t.is_saving=!1})).catch((function(t){return console.log(t)}))}}},n=o,c=a("2877"),l=Object(c["a"])(n,s,i,!1,null,null,null);e["a"]=l.exports},"86db":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"d-inline text-nowrap"},[t.currency?[t._v(" ")]:t._e(),t._v(t._s(t.input_value.toLocaleString("en-US",{minimumFractionDigits:t.decimal}))+" ")],2)},i=[],r={props:{input_value:{type:[Number,String],default:0,required:!0},decimal:{type:Number,default:2,required:!1},currency:{type:Boolean,default:!0,required:!1}},data:function(){return{}},created:function(){},methods:{}},o=r,n=a("2877"),c=Object(n["a"])(o,s,i,!1,null,null,null);e["a"]=c.exports},edf9:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("nav",{staticClass:"bg-white",attrs:{"aria-label":"breadcrumb"}},[a("ol",{staticClass:"breadcrumb"},[t.is_saving?a("li",{staticClass:"breadcrumb-item text-dark"},[t._v("Loading...")]):t._l(t.crumbs,(function(e){return a("li",{staticClass:"breadcrumb-item"},[a("router-link",{attrs:{to:e.link}},[t._v(" "+t._s(e.label)+" ")])],1)}))],2)])])},i=[],r=(a("56d7"),{data:function(){return{crumbs:[{label:"",link:""}],is_saving:!1}},created:function(){this.setCrumbs()},methods:{setCrumbs:function(){var t=this;this.is_saving=!0,"undefined"!=typeof this.$route.params.project_location_id&&"undefined"==typeof this.$route.params.project_location_structure_id?this.axios.get("crumbs/generate_from_location",{params:{id:this.$route.params.project_location_id}}).then((function(e){t.crumbs=[],t.crumbs.push({label:e.data.location_description,link:"/projects/"+e.data.id+"/"+e.data.location_id}),t.is_saving=!1})).catch((function(t){return console.log(t)})):"undefined"!=typeof this.$route.params.project_location_structure_id&&"undefined"==typeof this.$route.params.project_location_structure_item_id?this.axios.get("crumbs/generate_from_structure",{params:{id:this.$route.params.project_location_structure_id}}).then((function(e){t.crumbs=[],t.crumbs.push({label:e.data.location_description,link:"/projects/"+e.data.id+"/"+e.data.location_id}),t.crumbs.push({label:e.data.structure_description,link:"/projects/"+e.data.id+"/"+e.data.location_id+"/"+e.data.structure_id}),t.is_saving=!1})).catch((function(t){return console.log(t)})):"undefined"!=typeof this.$route.params.project_location_structure_item_id&&this.axios.get("crumbs/generate_from_item",{params:{id:this.$route.params.project_location_structure_item_id}}).then((function(e){t.crumbs=[],t.crumbs.push({label:e.data.location_description,link:"/projects/"+e.data.id+"/"+e.data.location_id}),t.crumbs.push({label:e.data.structure_description,link:"/projects/"+e.data.id+"/"+e.data.location_id+"/"+e.data.structure_id}),t.crumbs.push({label:e.data.item_description,link:"/projects/"+e.data.id+"/"+e.data.location_id+"/"+e.data.structure_id+"/"+e.data.item_id}),t.is_saving=!1})).catch((function(t){return console.log(t)}))}}}),o=r,n=a("2877"),c=Object(n["a"])(o,s,i,!1,null,null,null);e["a"]=c.exports}}]);
//# sourceMappingURL=chunk-63623788.ba22ce40.js.map