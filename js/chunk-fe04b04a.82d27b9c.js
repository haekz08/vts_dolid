(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fe04b04a"],{"3a81":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-row",{staticClass:"m-0"},[a("b-col",{attrs:{cols:"12"}},[a("b-row",[a("b-col",{attrs:{cols:"12",md:"6",lg:"4"}},[a("b-row",{staticClass:"m-0"},[a("b-col",{staticClass:"p-0"},[a("div",{staticClass:"card bg-light mb-3"},[a("div",{staticClass:"card-header bg-dark text-white",attrs:{id:"capture"}},[a("h6",{staticClass:"mb-0"},[a("font-awesome-icon",{attrs:{icon:"plus-circle"}}),t._v(" Generate Concert Ticket/s")],1)]),a("div",{staticClass:"card-body bg-white"},[t.is_loading?a("b-row",{staticClass:"loader",attrs:{"align-v":"center"}},[a("b-col",[a("b-spinner"),a("br"),a("br"),a("strong",[t._v("Loading")])],1)],1):t._e(),a("b-form",{on:{submit:t.generate}},[a("b-form-group",{attrs:{label:"Person In-charge:",description:"This field is required"}},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.form.owner_id,expression:"form.owner_id"}],staticClass:"form-control",attrs:{required:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.form,"owner_id",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:""}},[t._v("Please Select")]),a("option",{attrs:{value:"-1"}},[t._v("New Record")]),t._l(t.owners,(function(e){return a("option",{domProps:{value:e.id}},[t._v(" "+t._s(e.name)+" ")])}))],2)]),"-1"==t.form.owner_id?a("b-form-group",{attrs:{label:"Name:"}},[a("b-form-input",{attrs:{type:"text",description:"This field is required",required:""},model:{value:t.form.owner_name,callback:function(e){t.$set(t.form,"owner_name",e)},expression:"form.owner_name"}})],1):t._e(),a("b-form-group",{attrs:{label:"Details:"}},[a("b-form-input",{attrs:{type:"text"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),a("b-form-group",{attrs:{label:"Number of Ticket/s:",description:"This field is required"}},[a("b-form-input",{attrs:{type:"number",required:"",min:"1"},model:{value:t.form.qty,callback:function(e){t.$set(t.form,"qty",e)},expression:"form.qty"}})],1),a("div",{staticClass:"text-right"},[a("b-button",{attrs:{type:"submit",variant:"dark",size:"sm"}},[a("font-awesome-icon",{attrs:{icon:"save"}}),t._v(" Generate")],1)],1)],1)],1)])])],1),a("div",{attrs:{id:"qr"}})],1),t.tickets.length>0?a("b-col",{attrs:{cols:"12"}},[a("div",{staticClass:"card bg-light mb-3"},[a("div",{staticClass:"card-header bg-dark text-white d-flex flex-row-reverse align-items-center justify-content-between text-right"},[a("b-button",{attrs:{type:"button",variant:"facebook",size:"sm"},on:{click:function(e){return t.downloadImages()}}},[a("font-awesome-icon",{attrs:{icon:"save"}}),t._v(" PREVIEW & DOWNLOAD")],1),a("b-button",{attrs:{type:"button",variant:"facebook",size:"sm"},on:{click:function(e){return t.print()}}},[a("font-awesome-icon",{attrs:{icon:"print"}}),t._v(" PRINT")],1)],1),a("div",{staticClass:"card-body bg-white",staticStyle:{"overflow-x":"auto"}},t._l(t.tickets,(function(e,n){return a("b-row",[a("b-col",[a("b-row",[a("b-col",[a("div",{staticClass:"ticket-holder",attrs:{id:"ticket-"+e.ticket_number}},[a("span",{staticClass:"ticket-number"},[t._v(t._s(e.ticket_number))]),a("img",{staticStyle:{width:"100%",border:"1px solid #000"},attrs:{src:t.assets_path.DEFAULT_URL+"TICKET_TEMPLATE.png"}}),a("qrcode-vue",{staticStyle:{position:"absolute",top:"68px",right:"83px"},attrs:{value:e.code,size:t.size,level:"H"}})],1)])],1)],1)],1)})),1)])]):t._e()],1)],1),a("b-modal",{attrs:{centered:"",size:"xl","body-class":"p-0","hide-footer":!0,"hide-header":!0},model:{value:t.download,callback:function(e){t.download=e},expression:"download"}},[a("div",{staticClass:"card mb-0"},[a("div",{staticClass:"card-header bg-dark text-white d-flex flex-row-reverse align-items-center justify-content-between text-right"},[a("b-button",{attrs:{type:"button",variant:"facebook",size:"sm"},on:{click:function(e){return t.downloadAll()}}},[a("font-awesome-icon",{attrs:{icon:"save"}}),t._v(" DOWNLOAD ALL")],1)],1),a("div",{staticClass:"card-body position-relative"},[a("div",{attrs:{id:"qr-images"}})])])])],1)},i=[],o=a("db49"),r=a("4e73"),s=a("73e4"),c=a("d7b0"),l=a("c0e9"),d=a.n(l),u={name:"Login",mixins:[s["a"]],components:{Loading:r["a"],QrcodeVue:c["a"]},data:function(){return{size:300,form:{owner_name:"",owner_id:"",name:"",qty:""},assets_path:{},tickets:[],download:!1,is_loading:!1,result:{},owners:[]}},watch:{},created:function(){this.assets_path=o["a"],this.getOwners()},methods:{downloadImage:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"untitled.jpeg",a=document.createElement("a");a.href=t,a.download=e,document.body.appendChild(a),a.click()},downloadAll:function(){var t=this;this.tickets.forEach((function(e){var a=document.querySelector("#canvas-"+e.ticket_number),n=a.toDataURL("image/jpeg",1);t.downloadImage(n,"ticket-"+e.ticket_number+".jpeg")})),this.download=!1},downloadImages:function(){this.download=!0,this.tickets.forEach((function(t){d()(document.querySelector("#ticket-"+t.ticket_number)).then((function(e){e.id="canvas-"+t.ticket_number,document.querySelector("#qr-images").appendChild(e)}))}))},print:function(){window.open("/ticket-print/"+this.result.id,"_blank").focus()},generate:function(){var t=this;event.preventDefault(),this.swalConfirmSubmit((function(e){e.value&&(t.is_saving=!0,t.axios.post("ticket/generate",t.form).then((function(e){t.tickets=e.data.tickets,t.result=e.data})).catch((function(e){console.log(e),t.swal_transaction_error_data.text=e.response.data,t.swalRequestError()})))}))},getOwners:function(){var t=this;this.is_loading=!0,this.axios.get("ticket/owners").then((function(e){t.owners=e.data,t.is_loading=!1})).catch((function(t){return console.log(t)}))}}},m=u,b=(a("532b"),a("2877")),f=Object(b["a"])(m,n,i,!1,null,null,null);e["default"]=f.exports},"4e73":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.visibility?a("div",{staticClass:"animated fadeIn"},[a("b-row",{staticClass:"loader",attrs:{"align-v":"center"}},[a("b-col",[a("b-spinner"),a("br"),a("br"),a("strong",[t._v(t._s(t.label))])],1)],1)],1):t._e()])},i=[],o={name:"Loading",props:{label:{type:String,default:"Loading..."},visibility:{type:Boolean,default:!1}}},r=o,s=a("2877"),c=Object(s["a"])(r,n,i,!1,null,"ce53867a",null);e["a"]=c.exports},"532b":function(t,e,a){"use strict";var n=a("70c7"),i=a.n(n);i.a},"70c7":function(t,e,a){}}]);
//# sourceMappingURL=chunk-fe04b04a.82d27b9c.js.map