(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1e24a095"],{1835:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.status?a("b-row",{staticClass:"loader",attrs:{"align-v":"center"}},[a("b-col",[a("b-spinner"),a("br"),a("br"),a("strong",[t._v("Loading")])],1)],1):t._e()],1)},r=[],n={props:{status:{type:Boolean,default:!1,required:!1}},watch:{status:{immediate:!0,deep:!0,handler:function(){}}},data:function(){return{}},created:function(){},methods:{}},i=n,o=a("2877"),l=Object(o["a"])(i,s,r,!1,null,null,null);e["a"]=l.exports},"73e4":function(t,e,a){"use strict";e["a"]={data:function(){return{swal_confirm_submit_data:{title:"Please confirm your submission.",text:"Your changes will be saved after this process.",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, save it!",cancelButtonText:"Wait, im not done yet!"},swal_confirm_delete_data:{title:"Are you sure you want to delete this record?",text:"Note: This action will not be undone.",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete!",cancelButtonText:"No, I dont want to delete it!"},swal_transaction_completed_data:{title:"Transaction Completed!",text:"Data Successfully Saved.",icon:"success",showConfirmButton:!1,timer:1e3},swal_transaction_warning_data:{title:"Warning!",text:"Complete all necessary fields!",icon:"warning"},swal_transaction_error_data:{title:"Error!",text:"Please contact your Administrator.",icon:"error"}}},methods:{swalConfirmSubmit:function(t){this.$swal(this.swal_confirm_submit_data).then((function(e){t(e)}))},swalFieldsRequired:function(){this.$swal.fire("Error!","Please fill out all required fields","error")},swalRequestError:function(){this.$swal.fire(this.swal_transaction_error_data)},swalTransactionCompleted:function(){this.$swal.fire(this.swal_transaction_completed_data)},swalConfirmDelete:function(t){this.$swal(this.swal_confirm_delete_data).then((function(e){t(e)}))},swalTransactionWarning:function(){this.$swal.fire(this.swal_transaction_warning_data)}}}},"86d8":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"animated fadeIn"},[a("b-tabs",{staticClass:"bg-white",attrs:{"content-class":"bg-white"}},[a("b-tab",{attrs:{active:""},scopedSlots:t._u([{key:"title",fn:function(){return[a("span",{staticClass:"d-md-down-none"},[t._v("All")])]},proxy:!0}])},[a("per-barangay-table",{ref:"displayTable",attrs:{fields:t.table_settings.fields,api_url:t.table_settings.api_url,delete_url:t.table_settings.delete_url,top_right_btn_redirect:!1}})],1)],1),a("b-modal",{attrs:{centered:"",size:"xl","body-class":"p-0","hide-footer":!0,"hide-header":!0,"modal-class":"xxl-modal"},on:{hide:function(e){return t.refresh()}},model:{value:t.voter_modal,callback:function(e){t.voter_modal=e},expression:"voter_modal"}},[a("div",{staticClass:"card bg-light mb-0"},[a("div",{staticClass:"card-header bg-dark text-white d-flex"},[a("h6",{staticClass:"mb-0"},[t._v("Barangay Details")])]),a("div",{staticClass:"card-body bg-white",staticStyle:{"overflow-x":"auto"}},[a("barangay",{attrs:{id:t.id}})],1)])])],1)},r=[],n=a("56d7"),i=a("73e4"),o=a("db49"),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"card bg-light mb-3"},[a("div",{staticClass:"card-header bg-dark text-white"},[a("b-row",[a("b-col",[t.loading?a("div",[a("strong",[t._v(" Fetching result... ")])]):a("div",[a("font-awesome-icon",{attrs:{icon:"database"}}),a("strong",[t._v(" "+t._s(t.list.total)+" ")]),a("small",[t._v("Result/s found")])],1)])],1)],1),a("div",{staticClass:"card-body bg-white"},[a("b-row",{staticClass:"mb-3"},[a("b-col",{attrs:{sm:"2"}},[a("b-form-select",{attrs:{options:t.options,size:"sm"},on:{change:t.changeDisplayNo},model:{value:t.selected_display_no,callback:function(e){t.selected_display_no=e},expression:"selected_display_no"}})],1),a("b-col",{attrs:{sm:"6","offset-sm":"4"}},[a("b-input-group",[a("b-input-group-prepend",[a("b-input-group-text",{staticClass:"bg-dark text-white"},[a("font-awesome-icon",{attrs:{icon:"search"}})],1)],1),a("b-form-input",{staticClass:"form-control",attrs:{type:"text",placeholder:"Search",autocomplete:"off",size:"sm",debounce:"500"},nativeOn:{keypress:function(e){return t.searching(e)},keyup:function(e){return t.search(e)}},model:{value:t.search_term,callback:function(e){t.search_term=e},expression:"search_term"}}),a("b-input-group-append",[a("b-button",{staticClass:"bg-dark text-white px-4",attrs:{variant:"dark",size:"sm",disabled:""==t.search_term},on:{click:t.clearSearch}},[a("font-awesome-icon",{attrs:{icon:"times"}})],1)],1)],1)],1)],1),a("b-table",{attrs:{selectable:"",selectedVariant:"info","select-mode":"single",dark:t.dark,hover:t.hover,striped:t.striped,bordered:t.bordered,fixed:t.fixed,responsive:"sm",items:t.table_items,fields:t.captions,busy:t.loading,"show-empty":"","head-variant":"dark"},on:{"row-dblclicked":t.rowDbClicked},scopedSlots:t._u([{key:"cell(percentage)",fn:function(e){return[a("div",{staticClass:"progress-group-header"},[a("CIcon",{staticClass:"progress-group-icon",attrs:{name:"cil-user"}}),a("span",{staticClass:"title"},[a("number-format-component",{attrs:{currency:!1,input_value:Number(t.calculatePercentage(e.item)),decimal:2}}),t._v("%")],1),a("span",{staticClass:"ml-auto font-weight-bold"},[a("number-format-component",{attrs:{currency:!1,input_value:Number(e.item.members_count),decimal:0}}),t._v(" / "),a("number-format-component",{attrs:{currency:!1,input_value:Number(e.item.voters_count),decimal:0}}),t._v(" "),a("span",{staticClass:"text-muted small"})],1)],1),a("div",{staticClass:"progress-group-bars"},[a("CProgress",{attrs:{value:t.calculatePercentage(e.item),color:"success"}})],1)]}}])},[a("div",{staticClass:"text-center  my-2",attrs:{slot:"table-busy"},slot:"table-busy"},[a("br"),a("b-spinner",{staticClass:"align-middle",attrs:{small:""}}),a("br"),a("br"),a("strong",[t._v("Loading")])],1)]),t.list.total>0?a("nav",[a("b-pagination",{staticClass:"mb-0",attrs:{disabled:t.loading,align:"right","total-rows":t.total_rows,"per-page":t.per_page},on:{input:t.getAll},model:{value:t.list.current_page,callback:function(e){t.$set(t.list,"current_page",e)},expression:"list.current_page"}})],1):t._e()],1)])])},c=[],u=a("86db"),d={name:"per-barangay-table",components:{NumberFormatComponent:u["a"]},inheritAttrs:!1,mixins:[i["a"]],props:{hover:{type:Boolean,default:!0},striped:{type:Boolean,default:!0},bordered:{type:Boolean,default:!0},small:{type:Boolean,default:!0},fixed:{type:Boolean,default:!0},fields:{type:[Array,Object],default:function(){return[]}},dark:{type:Boolean,default:!1},api_url:{type:String,required:!0},delete_url:{type:String,required:!0},top_right_btn:{type:String,default:"",required:!1},top_right_btn_redirect:{type:Boolean,default:!0,required:!1}},data:function(){return{selected:[],list:{data:[],from:1,to:0,current_page:1,total:0,per_page:1},result:[],loading:!0,searchTimeout:function(){return{type:Function,default:function(){return{}}}},search_term:"",options:[{value:10,text:"Display 10 records"},{value:25,text:"Display 25 records"},{value:50,text:"Display 50 records"},{value:100,text:"Display 100 records"},{value:200,text:"Display 200 records"}],selected_display_no:200}},computed:{table_items:function(){return this.list.data},per_page:function(){return parseInt(this.list.per_page)},total_rows:function(){return parseInt(this.list.total)},captions:function(){return this.fields},total_selected:function(){return parseInt(this.selected.length)}},mounted:function(){this.getAll()},methods:{getAll:function(){var t=this;this.loading=!0,this.axios.get(this.api_url+"?page="+this.list.current_page+"&per_page="+this.selected_display_no+"&search="+this.search_term).then((function(e){var a=e.data;t.list=a,t.loading=!1})).catch((function(t){return console.log(t)}))},clickTopRightBtn:function(){n["bus"].$emit("serverSidePaginatedTableTopRightBtnClicked")},rowDbClicked:function(t){n["bus"].$emit("voterDbClick",t)},searching:function(){this.loading=!0,clearTimeout(this.searchTimeout)},search:function(){var t=this;this.searchTimeout=setTimeout((function(){t.list.current_page=1,t.getAll(),clearTimeout(t.searchTimeout)}),1e3)},clearSearch:function(){this.search_term="",this.getAll()},changeDisplayNo:function(){this.loading=!0,this.list.current_page=1,this.getAll()},deleteRow:function(t){var e=this;this.swalConfirmDelete((function(a){a.value&&(e.loading=!0,e.axios.delete(e.delete_url,{data:{id:t}}).then((function(t){e.getAll(),e.swal_transaction_completed_data.text="Record successfully deleted.",e.swalTransactionCompleted(),e.loading=!1})).catch((function(t){e.swalRequestError(),e.loading=!1})))}))},calculatePercentage:function(t){var e=t.members_count/t.voters_count*100;return e}}},m=d,p=a("2877"),b=Object(p["a"])(m,l,c,!1,null,null,null),_=b.exports,g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("loader",{attrs:{status:t.is_saving}}),a("b-row",{staticClass:"m-0"},[a("b-col",{staticClass:"text-center p-2 bg-dark text-white d-flex align-items-center justify-content-center",attrs:{cols:"1"}},[a("font-awesome-icon",{staticClass:"h2 mb-0",attrs:{icon:"map-marker"}})],1),a("b-col",{staticClass:"p-3 bg-facebook text-white d-flex align-items-center"},[a("div",[a("h4",{staticClass:"mb-0"},[a("strong",[t._v(t._s(t.barangay.name))])]),a("small",{staticClass:"text-muted text-uppercase font-weight-bold"},[t._v("BARANGAY")])])])],1),a("CCardGroup",{staticClass:"mb-4"},[a("CWidgetProgressIcon",{attrs:{header:t.formatNumber(Number(t.barangay.voters_count)),text:"Registered Voters",color:"info",value:100}},[a("CIcon",{attrs:{name:"cil-people",height:"36"}})],1),a("CWidgetProgressIcon",{attrs:{header:t.formatNumber(Number(t.barangay.members_count)),text:"Total Members",value:Number(t.barangay.members_count),color:"success"}},[a("CIcon",{attrs:{name:"cil-userFollow",height:"36"}})],1),a("CWidgetProgressIcon",{attrs:{header:t.formatNumber(Number(t.barangay.members_count/t.barangay.voters_count*100),2)+"%",text:"Total Percentage",value:Number(t.barangay.members_count/t.barangay.voters_count*100)}},[a("CIcon",{attrs:{name:"cil-chartPie",height:"36"}})],1),a("CWidgetProgressIcon",{attrs:{header:"₱ "+t.formatNumber(Number(t.est_budget)),text:"Total Est. Budget",color:"warning",value:100}},[a("CIcon",{attrs:{name:"cil-tags",height:"36"}})],1)],1),a("b-tabs",{attrs:{"content-class":"mt-3"}},[a("b-tab",{attrs:{title:"Barangay Master List",active:""}},[a("barangay-members-table",{attrs:{fields:t.table_settings.fields,api_url:t.table_settings.api_url,delete_url:t.table_settings.delete_url,top_right_btn_redirect:!1,id:t.id}})],1),a("b-tab",{attrs:{title:"Budget"}},t._l(t.member_types,(function(e,s){return a("div",{staticClass:"progress-group"},[a("div",{staticClass:"progress-group-header"},[a("CIcon",{staticClass:"progress-group-icon",attrs:{name:"cil-user"}}),a("span",{staticClass:"title"},[t._v(t._s(e.name))]),a("span",{staticClass:"ml-auto font-weight-bold"},[t._v(" ₱ "),a("number-format-component",{attrs:{currency:!1,input_value:Number(e.members_count*e.estimated_budget),decimal:0}}),a("small",[t._v("("),a("number-format-component",{attrs:{currency:!1,input_value:Number(e.members_count*e.estimated_budget/t.est_budget*100),decimal:0}}),t._v(" %)")],1)],1)],1),a("div",{staticClass:"progress-group-bars"},[a("CProgress",{attrs:{value:Number(e.members_count*e.estimated_budget/t.est_budget*100),color:e.color}})],1)])})),0)],1)],1)},h=[],f=a("1835"),v=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"card bg-light mb-3"},[a("div",{staticClass:"card-header bg-dark text-white"},[a("b-row",[a("b-col",[t.loading?a("div",[a("strong",[t._v(" Fetching result... ")])]):a("div",[a("font-awesome-icon",{attrs:{icon:"database"}}),a("strong",[t._v(" "),a("number-format-component",{attrs:{currency:!1,input_value:Number(t.list.total),decimal:0}})],1),a("small",[t._v("Result/s found")])],1)])],1)],1),a("div",{staticClass:"card-body bg-white"},[a("b-row",{staticClass:"mb-3"},[a("b-col",{attrs:{sm:"2"}},[a("b-form-select",{attrs:{options:t.options,size:"sm"},on:{change:t.changeDisplayNo},model:{value:t.selected_display_no,callback:function(e){t.selected_display_no=e},expression:"selected_display_no"}})],1),a("b-col",{attrs:{sm:"2"}},[a("b-form-select",{attrs:{options:t.members_only_options,size:"sm"},on:{change:t.changeDisplayNo},model:{value:t.selected_members_only,callback:function(e){t.selected_members_only=e},expression:"selected_members_only"}})],1),a("b-col",{attrs:{sm:"6","offset-sm":"2"}},[a("b-input-group",[a("b-input-group-prepend",[a("b-input-group-text",{staticClass:"bg-dark text-white"},[a("font-awesome-icon",{attrs:{icon:"search"}})],1)],1),a("b-form-input",{staticClass:"form-control",attrs:{type:"text",placeholder:"Search",autocomplete:"off",size:"sm",debounce:"1500"},nativeOn:{keypress:function(e){return t.searching(e)},keyup:function(e){return t.search(e)}},model:{value:t.search_term,callback:function(e){t.search_term=e},expression:"search_term"}}),a("b-input-group-append",[a("b-button",{staticClass:"bg-dark text-white px-4",attrs:{variant:"dark",size:"sm",disabled:""==t.search_term},on:{click:t.clearSearch}},[a("font-awesome-icon",{attrs:{icon:"times"}})],1)],1)],1)],1)],1),a("b-table",{staticClass:"cursor-pointer",attrs:{selectable:"",selectedVariant:"info","select-mode":"single",dark:t.dark,hover:t.hover,striped:t.striped,bordered:t.bordered,fixed:t.fixed,responsive:"sm",items:t.table_items,fields:t.captions,busy:t.loading,"show-empty":"","head-variant":"dark"},on:{"row-dblclicked":t.rowDbClicked},scopedSlots:t._u([{key:"cell(name)",fn:function(e){return[0!=e.item.member_type_id?[a("font-awesome-icon",{staticClass:"text-success",attrs:{icon:"check-circle",title:"Member"}}),t._v(" "+t._s(e.item.name)),a("br"),null!=e.item.leader_id?a("small",[t._v("Leader : "+t._s(e.item.leader.name))]):t._e()]:[a("font-awesome-icon",{staticClass:"text-dark",attrs:{icon:"check-circle",title:"Not a Member"}}),t._v(" "+t._s(e.item.name)+" ")]]}}])},[a("div",{staticClass:"text-center  my-2",attrs:{slot:"table-busy"},slot:"table-busy"},[a("br"),a("b-spinner",{staticClass:"align-middle",attrs:{small:""}}),a("br"),a("br"),a("strong",[t._v("Loading")])],1)]),t.list.total>0?a("nav",[a("b-pagination",{staticClass:"mb-0",attrs:{disabled:t.loading,align:"right","total-rows":t.total_rows,"per-page":t.per_page},on:{input:t.getAll},model:{value:t.list.current_page,callback:function(e){t.$set(t.list,"current_page",e)},expression:"list.current_page"}})],1):t._e()],1)])])},y=[],w={name:"barangay-members-table",inheritAttrs:!1,components:{Loader:f["a"],NumberFormatComponent:u["a"]},mixins:[i["a"]],props:{hover:{type:Boolean,default:!0},striped:{type:Boolean,default:!0},bordered:{type:Boolean,default:!0},small:{type:Boolean,default:!0},fixed:{type:Boolean,default:!0},fields:{type:[Array,Object],default:function(){return[]}},dark:{type:Boolean,default:!1},api_url:{type:String,required:!0},top_right_btn:{type:String,default:"",required:!1},top_right_btn_redirect:{type:Boolean,default:!0,required:!1},id:{type:Number,required:!0}},data:function(){return{selected:[],list:{data:[],from:1,to:0,current_page:1,total:0,per_page:1},result:[],loading:!0,searchTimeout:function(){return{type:Function,default:function(){return{}}}},search_term:"",options:[{value:10,text:"Display 10 records"},{value:25,text:"Display 25 records"},{value:50,text:"Display 50 records"},{value:100,text:"Display 100 records"}],members_only_options:[{value:"all",text:"Display All"},{value:"members",text:"Display Members Only"}],selected_members_only:"all",selected_display_no:10}},computed:{table_items:function(){return this.list.data},per_page:function(){return parseInt(this.list.per_page)},total_rows:function(){return parseInt(this.list.total)},captions:function(){return this.fields},total_selected:function(){return parseInt(this.selected.length)}},mounted:function(){this.getAll()},methods:{getAll:function(){var t=this;this.loading=!0,this.axios.get(this.api_url+"?id="+this.id+"&page="+this.list.current_page+"&per_page="+this.selected_display_no+"&members_only="+this.selected_members_only+"&search="+this.search_term).then((function(e){var a=e.data;t.list=a,t.loading=!1})).catch((function(t){return console.log(t)}))},clickTopRightBtn:function(){n["bus"].$emit("membersTableTopRightBtnClicked")},rowDbClicked:function(t){this.$emit("membersTableDbClick",t)},searching:function(){this.loading=!0,clearTimeout(this.searchTimeout)},search:function(){var t=this;this.searchTimeout=setTimeout((function(){t.list.current_page=1,t.getAll(),clearTimeout(t.searchTimeout)}),1e3)},clearSearch:function(){this.search_term="",this.getAll()},changeDisplayNo:function(){this.loading=!0,this.list.current_page=1,this.getAll()},removeMember:function(t){var e=this;this.swalConfirmSubmit((function(a){a.value&&(e.loading=!0,e.axios.post(e.remove_member_url,{id:t}).then((function(t){e.getAll(),e.swal_transaction_completed_data.text="Member Successfully Removed",e.swalTransactionCompleted(),e.loading=!1})).catch((function(t){e.swalRequestError(),e.loading=!1})))}))}}},C=w,x=Object(p["a"])(C,v,y,!1,null,null,null),k=x.exports,T={mixins:[i["a"]],components:{Loader:f["a"],BarangayMembersTable:k,NumberFormatComponent:u["a"]},props:{id:{type:Number,default:-1}},data:function(){return{assets_path:{},is_saving:!1,barangay:{},est_budget:0,table_settings:{api_url:"barangays/get-voters",delete_url:"",fields:[{key:"precint.name",label:"PRECINT"},{key:"name",label:"NAME"},{key:"address",label:"ADDRESS"},{key:"member_type.name",label:"TYPE"},{key:"total_child",label:"MEMBERS"}]},member_types:[]}},computed:{},created:function(){this.assets_path=o["a"],this.get(),this.getReportsPerMemberType()},methods:{get:function(){var t=this;this.is_saving=!0,this.membersTableKey++,this.axios.get("barangays/get",{params:{id:this.id}}).then((function(e){t.barangay=e.data,t.is_saving=!1})).catch((function(t){return console.log(t)}))},formatNumber:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.toLocaleString("en-US",{minimumFractionDigits:e,maximumFractionDigits:e})},getReportsPerMemberType:function(){var t=this;this.axios.get("/barangays/per-member-type",{params:{id:this.id}}).then((function(e){t.member_types=e.data;var a=t.member_types.map((function(t){return t.estimated_budget*t.members_count}));t.est_budget=a.reduce((function(t,e){return t+e}),0)})).catch((function(t){return console.log(t)}))}}},B=T,N=Object(p["a"])(B,g,h,!1,null,null,null),D=N.exports,A={mixins:[i["a"]],components:{PerBarangayTable:_,Barangay:D},data:function(){return{table_settings:{api_url:"barangays/all",delete_url:"",fields:[{key:"name",label:"BARANGAY"},{key:"percentage",label:"PERCENTAGE"}]},assets_path:{},voter:{},id:-1,voter_modal:!1}},created:function(){var t=this;this.assets_path=o["a"],n["bus"].$on("voterDbClick",(function(e){t.voter_modal=!0,t.id=e.id}))},methods:{refresh:function(){this.$refs.displayTable.getAll()}}},S=A,R=Object(p["a"])(S,s,r,!1,null,null,null);e["default"]=R.exports},"86db":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"d-inline text-nowrap"},[t.currency?[t._v("₱ ")]:t._e(),t._v(t._s(t.input_value.toLocaleString("en-US",{minimumFractionDigits:t.decimal,maximumFractionDigits:t.decimal}))+" ")],2)},r=[],n={props:{input_value:{type:[Number,String],default:0,required:!0},decimal:{type:Number,default:2,required:!1},currency:{type:Boolean,default:!0,required:!1}},data:function(){return{}},created:function(){},methods:{}},i=n,o=a("2877"),l=Object(o["a"])(i,s,r,!1,null,null,null);e["a"]=l.exports}}]);
//# sourceMappingURL=chunk-1e24a095.a3602c19.js.map