(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-63623788"],{"506c":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("bread-crumbs"),s("b-card",{attrs:{"no-body":""}},[s("b-tabs",{attrs:{pills:"",card:"",vertical:"","nav-class":"bg-secondary p-2","active-nav-item-class":"bg-dark text-white","nav-wrapper-class":"nav-wrapper-custom-width"}},[s("b-tab",{attrs:{"title-item-class":"mb-2"}},[s("template",{slot:"title"},[s("h6",{staticClass:"mb-0 p-2 d-flex justify-content-between align-items-center"},[s("span",[t._v("Item Details")]),s("div",{staticClass:"text-center",staticStyle:{width:"25px"}},[s("font-awesome-icon",{attrs:{icon:"edit"}})],1)])]),s("b-card-text",{staticClass:"w-50"},[s("project-location-structure-form-component",{attrs:{project_location_structure_item:t.project_location_structure_item}})],1)],2),s("b-tab",{attrs:{"title-item-class":"mb-2"}},[s("template",{slot:"title"},[s("h6",{staticClass:"mb-0 p-2 d-flex justify-content-between align-items-center"},[s("span",[t._v("Estimates")]),s("div",{staticClass:"text-center",staticStyle:{width:"25px"}},[s("font-awesome-icon",{attrs:{icon:"list"}})],1)])]),s("b-tabs",{attrs:{"content-class":"mt-3"}},[s("b-tab",{attrs:{title:"Labor",active:""}},[s("labor-estimate",{attrs:{labor_estimates:t.project_location_structure_item.labor_estimates},on:{addLaborEstimate:function(e){return t.get()}}})],1),s("b-tab",{attrs:{title:"Equipment"}},[s("equipment-estimate",{attrs:{equipment_estimates:t.project_location_structure_item.equipment_estimates},on:{addEquipmentEstimate:function(e){return t.get()}}})],1),s("b-tab",{attrs:{title:"Material"}},[s("material-estimate",{attrs:{material_estimates:t.project_location_structure_item.material_estimates},on:{addMaterialEstimate:function(e){return t.get()}}})],1)],1)],2),s("b-tab",{attrs:{"title-item-class":"mb-0"}},[s("template",{slot:"title"},[s("h6",{staticClass:"mb-0 p-2 d-flex justify-content-between align-items-center"},[s("span",[t._v("Manpower")]),s("div",{staticClass:"text-center",staticStyle:{width:"25px"}},[s("font-awesome-icon",{attrs:{icon:"users"}})],1)])]),s("manpower",{attrs:{project_location_structure_item_manpowers:t.project_location_structure_item.project_location_structure_item_manpowers},on:{addManpower:function(e){return t.get()}}})],2),s("b-tab",{attrs:{"title-item-class":"mb-0",active:""}},[s("template",{slot:"title"},[s("h6",{staticClass:"mb-0 p-2 d-flex justify-content-between align-items-center"},[s("span",[t._v("Usage")]),s("div",{staticClass:"text-center",staticStyle:{width:"25px"}},[s("font-awesome-icon",{attrs:{icon:"chart-line"}})],1)])]),s("usages-index",{attrs:{project_location_structure_item:t.project_location_structure_item}})],2),s("b-tab",{attrs:{"title-item-class":"mb-0"}},[s("template",{slot:"title"},[s("h6",{staticClass:"mb-0 p-2 d-flex justify-content-between align-items-center"},[s("span",[t._v("Material Inventory")]),s("div",{staticClass:"text-center",staticStyle:{width:"25px"}},[s("font-awesome-icon",{attrs:{icon:"cubes"}})],1)])]),s("inventory")],2),s("b-tab",{attrs:{"title-item-class":"mb-0"}},[s("template",{slot:"title"},[s("h6",{staticClass:"mb-0 p-2 d-flex justify-content-between align-items-center"},[s("span",[t._v("Progress")]),s("div",{staticClass:"text-center",staticStyle:{width:"25px"}},[s("font-awesome-icon",{attrs:{icon:"check-square"}})],1)])]),s("progress-report",{attrs:{project_location_structure_item:t.project_location_structure_item},on:{refresh:function(e){return t.get()}}})],2)],1)],1)],1)},i=[],r=s("56d7"),o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("b-row",{staticClass:"m-0"},[s("b-col",{staticClass:"p-0"},[s("div",{staticClass:"card bg-light mb-0"},[s("div",{staticClass:"card-header bg-dark text-white d-flex justify-content-between align-items-center"},[s("h6",{staticClass:"mb-0"},[s("font-awesome-icon",{attrs:{icon:"list"}}),t._v(" Labor Estimates")],1),s("b-button",{attrs:{variant:"secondary",size:"sm"},on:{click:function(e){t.modal=!0}}},[s("font-awesome-icon",{attrs:{icon:"plus"}}),t._v(" Add New ")],1)],1),s("div",{staticClass:"card-body bg-white position-relative"},[t.is_saving?s("b-row",{staticClass:"loader",attrs:{"align-v":"center"}},[s("b-col",[s("b-spinner"),s("br"),s("br"),s("strong",[t._v("Loading")])],1)],1):t._e(),s("table",{staticClass:"table border"},[s("thead",{staticClass:"bg-light text-dark"},[s("tr",[s("th",{attrs:{scope:"col"}},[t._v("Job Description")]),s("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Daily Rate")]),s("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Hourly Rate")]),s("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Est. Duration (Hours)")]),s("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Number of Manpower")]),s("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Total")]),s("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Action ")])])]),s("tbody",t._l(t.labor_estimates,(function(e,a){return s("tr",[s("th",{attrs:{scope:"row"}},[t._v(t._s(e.job_description.description))]),s("td",{staticClass:"text-right"},[s("number-format-component",{attrs:{input_value:Number(e.daily_rate)}})],1),s("td",{staticClass:"text-right"},[s("number-format-component",{attrs:{input_value:Number(e.hourly_rate)}})],1),s("td",{staticClass:"text-right"},[s("number-format-component",{attrs:{input_value:Number(e.duration_in_hour)}})],1),s("td",{staticClass:"text-right"},[s("number-format-component",{attrs:{input_value:Number(e.qty)}})],1),s("td",{staticClass:"text-right"},[s("number-format-component",{attrs:{input_value:Number(e.total)}})],1),s("td",{staticClass:"text-center"},[s("b-button",{attrs:{type:"submit",size:"sm",variant:"danger"},on:{click:function(s){return t.deleteItem(e.id)}}},[s("font-awesome-icon",{attrs:{icon:"minus-circle"}}),t._v(" Remove")],1)],1)])})),0),s("tfoot",{staticClass:"bg-light text-dark"},[s("tr",[s("th",{staticClass:"text-right",attrs:{scope:"col",colspan:"5"}},[t._v("TOTAL EST. AMOUNT FOR LABOR")]),s("th",{staticClass:"text-right",attrs:{scope:"col"}},[s("number-format-component",{attrs:{input_value:Number(t.total_estimate)}})],1),s("th",{staticClass:"text-center",attrs:{scope:"col"}})])])])],1)])])],1),s("b-modal",{attrs:{centered:"",size:"md","body-class":"p-0","hide-footer":!0,"hide-header":!0},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[s("div",{staticClass:"card bg-light mb-0"},[s("div",{staticClass:"card-header bg-dark text-white d-flex justify-content-between align-items-center"},[s("h6",{staticClass:"mb-0"},[s("font-awesome-icon",{attrs:{icon:"plus-circle"}}),t._v(" Labor Estimates")],1)]),s("div",{staticClass:"card-body bg-white position-relative"},[t.modal_is_saving?s("b-row",{staticClass:"loader",attrs:{"align-v":"center"}},[s("b-col",[s("b-spinner"),s("br"),s("br"),s("strong",[t._v("Loading")])],1)],1):t._e(),s("b-form",{on:{submit:t.save}},[s("b-form-group",{attrs:{label:"Job Description:",description:"This field is required"}},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.form.job_description_id,expression:"form.job_description_id"}],staticClass:"form-control",attrs:{required:""},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.form,"job_description_id",e.target.multiple?s:s[0])}}},[s("option",{attrs:{value:""}},[t._v("Please Select")]),t._l(t.job_descriptions,(function(e){return s("option",{domProps:{value:e.id}},[t._v(" "+t._s(e.description)+" ")])}))],2)]),s("b-form-group",{attrs:{label:"Daily Rate:",description:"This field is required"}},[s("b-form-input",{attrs:{type:"number",step:"any",required:""},model:{value:t.form.daily_rate,callback:function(e){t.$set(t.form,"daily_rate",e)},expression:"form.daily_rate"}})],1),s("b-form-group",{attrs:{label:"Hourly Rate:",description:"This field is required"}},[s("b-form-input",{attrs:{type:"number",step:"any",required:""},model:{value:t.form.hourly_rate,callback:function(e){t.$set(t.form,"hourly_rate",e)},expression:"form.hourly_rate"}})],1),s("b-form-group",{attrs:{label:"Estimated Duration in Hours:",description:"This field is required"}},[s("b-form-input",{attrs:{type:"number",step:"any",required:""},model:{value:t.form.duration_in_hour,callback:function(e){t.$set(t.form,"duration_in_hour",e)},expression:"form.duration_in_hour"}})],1),s("b-form-group",{attrs:{label:"Number of Manpower:",description:"This field is required"}},[s("b-form-input",{attrs:{type:"number",step:"any",required:""},model:{value:t.form.qty,callback:function(e){t.$set(t.form,"qty",e)},expression:"form.qty"}})],1),s("div",{staticClass:"text-right"},[s("b-button",{attrs:{type:"submit",variant:"dark",size:"sm"}},[s("font-awesome-icon",{attrs:{icon:"save"}}),t._v(" Save")],1)],1)],1)],1)])])],1)},n=[],c=s("73e4"),l=s("86db"),u={mixins:[c["a"]],components:{NumberFormatComponent:l["a"]},props:{labor_estimates:{type:Array,default:function(){return[]},required:!1}},computed:{total_estimate:function(){return this.labor_estimates.reduce((function(t,e){return t+Number(e.total)}),0)}},data:function(){return{form:{id:-1,project_location_structure_item_id:this.$route.params.project_location_structure_item_id,job_description_id:"",daily_rate:"",hourly_rate:"",duration_in_hour:"",qty:"",total:""},is_saving:!1,modal_is_saving:!1,job_descriptions:[],modal:!1}},watch:{labor_estimates:{immediate:!0,deep:!0,handler:function(){}}},created:function(){this.getFields()},methods:{save:function(){var t=this;event.preventDefault(),this.swalConfirmSubmit((function(e){e.value&&(t.modal_is_saving=!0,t.axios.post("labor_estimates/save",t.form).then((function(e){t.swalTransactionCompleted(),t.modal_is_saving=!1,t.modal=!1,t.$emit("addLaborEstimate")})).catch((function(e){t.swal_transaction_error_data.text=e.response.data,t.swalRequestError(),t.modal_is_saving=!1})))}))},getFields:function(){var t=this;this.is_saving=!0,this.axios.get("maintenance/job_descriptions/all").then((function(e){t.job_descriptions=e.data,t.is_saving=!1})).catch((function(t){return console.log(t)}))},deleteItem:function(t){var e=this;this.swalConfirmDelete((function(s){s.value&&(e.is_saving=!0,e.axios.delete("labor_estimates/delete",{data:{id:t}}).then((function(t){e.swalTransactionCompleted(),e.is_saving=!1,e.$emit("addLaborEstimate")})).catch((function(t){e.swal_transaction_error_data.text=t.response.data,e.swalRequestError(),e.is_saving=!1})))}))}}},d=u,m=s("2877"),_=Object(m["a"])(d,o,n,!1,null,null,null),p=_.exports,b=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("b-row",{staticClass:"m-0"},[s("b-col",{staticClass:"p-0"},[s("div",{staticClass:"card bg-light mb-0"},[s("div",{staticClass:"card-header bg-dark text-white d-flex justify-content-between align-items-center"},[s("h6",{staticClass:"mb-0"},[s("font-awesome-icon",{attrs:{icon:"list"}}),t._v(" Equipment Estimates")],1),s("b-button",{attrs:{variant:"secondary",size:"sm"},on:{click:function(e){t.modal=!0}}},[s("font-awesome-icon",{attrs:{icon:"plus"}}),t._v(" Add New ")],1)],1),s("div",{staticClass:"card-body bg-white position-relative"},[t.is_saving?s("b-row",{staticClass:"loader",attrs:{"align-v":"center"}},[s("b-col",[s("b-spinner"),s("br"),s("br"),s("strong",[t._v("Loading")])],1)],1):t._e(),s("table",{staticClass:"table border"},[s("thead",{staticClass:"bg-light text-dark"},[s("tr",[s("th",{attrs:{scope:"col"}},[t._v("Equipment Description")]),s("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Hourly Rate")]),s("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Est. Duration (Hours)")]),s("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Est. Duration (Days)")]),s("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Number of Equipment")]),s("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Total")]),s("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Action ")])])]),s("tbody",t._l(t.equipment_estimates,(function(e,a){return s("tr",[s("th",{attrs:{scope:"row"}},[t._v(t._s(e.equipment_type.description))]),s("td",{staticClass:"text-right"},[s("number-format-component",{attrs:{input_value:Number(e.hourly_rate)}})],1),s("td",{staticClass:"text-right"},[s("number-format-component",{attrs:{input_value:Number(e.duration_in_hour)}})],1),s("td",{staticClass:"text-right"},[s("number-format-component",{attrs:{input_value:Number(e.duration_in_day)}})],1),s("td",{staticClass:"text-right"},[s("number-format-component",{attrs:{input_value:Number(e.qty)}})],1),s("td",{staticClass:"text-right"},[s("number-format-component",{attrs:{input_value:Number(e.total)}})],1),s("td",{staticClass:"text-center"},[s("b-button",{attrs:{type:"submit",size:"sm",variant:"danger"},on:{click:function(s){return t.deleteItem(e.id)}}},[s("font-awesome-icon",{attrs:{icon:"minus-circle"}}),t._v(" Remove")],1)],1)])})),0),s("tfoot",{staticClass:"bg-light text-dark"},[s("tr",[s("th",{staticClass:"text-right",attrs:{scope:"col",colspan:"5"}},[t._v("TOTAL EST. AMOUNT FOR EQUPMENT")]),s("th",{staticClass:"text-right",attrs:{scope:"col"}},[s("number-format-component",{attrs:{input_value:Number(t.total_estimate)}})],1),s("th",{staticClass:"text-center",attrs:{scope:"col"}})])])])],1)])])],1),s("b-modal",{attrs:{centered:"",size:"md","body-class":"p-0","hide-footer":!0,"hide-header":!0},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[s("div",{staticClass:"card bg-light mb-0"},[s("div",{staticClass:"card-header bg-dark text-white d-flex justify-content-between align-items-center"},[s("h6",{staticClass:"mb-0"},[s("font-awesome-icon",{attrs:{icon:"plus-circle"}}),t._v(" Equipment Estimates")],1)]),s("div",{staticClass:"card-body bg-white position-relative"},[t.modal_is_saving?s("b-row",{staticClass:"loader",attrs:{"align-v":"center"}},[s("b-col",[s("b-spinner"),s("br"),s("br"),s("strong",[t._v("Loading")])],1)],1):t._e(),s("b-form",{on:{submit:t.save}},[s("b-form-group",{attrs:{label:"Equipment:",description:"This field is required"}},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.form.equipment_type_id,expression:"form.equipment_type_id"}],staticClass:"form-control",attrs:{required:""},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.form,"equipment_type_id",e.target.multiple?s:s[0])}}},[s("option",{attrs:{value:""}},[t._v("Please Select")]),t._l(t.equipment_types,(function(e){return s("option",{domProps:{value:e.id}},[t._v(" "+t._s(e.description)+" ")])}))],2)]),s("b-form-group",{attrs:{label:"Hourly Rate:",description:"This field is required"}},[s("b-form-input",{attrs:{type:"number",step:"any",required:""},model:{value:t.form.hourly_rate,callback:function(e){t.$set(t.form,"hourly_rate",e)},expression:"form.hourly_rate"}})],1),s("b-form-group",{attrs:{label:"Estimated Duration in Hours:",description:"This field is required"}},[s("b-form-input",{attrs:{type:"number",step:"any",required:""},model:{value:t.form.duration_in_hour,callback:function(e){t.$set(t.form,"duration_in_hour",e)},expression:"form.duration_in_hour"}})],1),s("b-form-group",{attrs:{label:"Estimated Duration in Days:",description:"This field is required"}},[s("b-form-input",{attrs:{type:"number",step:"any",required:""},model:{value:t.form.duration_in_day,callback:function(e){t.$set(t.form,"duration_in_day",e)},expression:"form.duration_in_day"}})],1),s("b-form-group",{attrs:{label:"Number of Equipment:",description:"This field is required"}},[s("b-form-input",{attrs:{type:"number",step:"any",required:""},model:{value:t.form.qty,callback:function(e){t.$set(t.form,"qty",e)},expression:"form.qty"}})],1),s("div",{staticClass:"text-right"},[s("b-button",{attrs:{type:"submit",variant:"dark",size:"sm"}},[s("font-awesome-icon",{attrs:{icon:"save"}}),t._v(" Save")],1)],1)],1)],1)])])],1)},f=[],h={mixins:[c["a"]],components:{NumberFormatComponent:l["a"]},props:{equipment_estimates:{type:Array,default:function(){return[]},required:!1}},computed:{total_estimate:function(){return this.equipment_estimates.reduce((function(t,e){return t+Number(e.total)}),0)}},data:function(){return{form:{id:-1,project_location_structure_item_id:this.$route.params.project_location_structure_item_id,equipment_type_id:"",hourly_rate:"",duration_in_hour:"",duration_in_day:"",qty:"",total:""},is_saving:!1,modal_is_saving:!1,equipment_types:[],modal:!1}},watch:{equipment_estimates:{immediate:!0,deep:!0,handler:function(){}}},created:function(){this.getFields()},methods:{save:function(){var t=this;event.preventDefault(),this.swalConfirmSubmit((function(e){e.value&&(t.modal_is_saving=!0,t.axios.post("equipment_estimates/save",t.form).then((function(e){t.swalTransactionCompleted(),t.modal_is_saving=!1,t.modal=!1,t.$emit("addEquipmentEstimate")})).catch((function(e){t.swal_transaction_error_data.text=e.response.data,t.swalRequestError(),t.modal_is_saving=!1})))}))},getFields:function(){var t=this;this.is_saving=!0,this.axios.get("maintenance/equipment_types/all").then((function(e){t.equipment_types=e.data,t.is_saving=!1})).catch((function(t){return console.log(t)}))},deleteItem:function(t){var e=this;this.swalConfirmDelete((function(s){s.value&&(e.is_saving=!0,e.axios.delete("equipment_estimates/delete",{data:{id:t}}).then((function(t){e.swalTransactionCompleted(),e.is_saving=!1,e.$emit("addEquipmentEstimate")})).catch((function(t){e.swal_transaction_error_data.text=t.response.data,e.swalRequestError(),e.is_saving=!1})))}))}}},v=h,g=Object(m["a"])(v,b,f,!1,null,null,null),C=g.exports,x=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("b-row",{staticClass:"m-0"},[s("b-col",{staticClass:"p-0"},[s("div",{staticClass:"card bg-light mb-0"},[s("div",{staticClass:"card-header bg-dark text-white d-flex justify-content-between align-items-center"},[s("h6",{staticClass:"mb-0"},[s("font-awesome-icon",{attrs:{icon:"list"}}),t._v(" Equipment Estimates")],1),s("b-button",{attrs:{variant:"secondary",size:"sm"},on:{click:function(e){t.modal=!0}}},[s("font-awesome-icon",{attrs:{icon:"plus"}}),t._v(" Add New ")],1)],1),s("div",{staticClass:"card-body bg-white position-relative"},[t.is_saving?s("b-row",{staticClass:"loader",attrs:{"align-v":"center"}},[s("b-col",[s("b-spinner"),s("br"),s("br"),s("strong",[t._v("Loading")])],1)],1):t._e(),s("table",{staticClass:"table border"},[s("thead",{staticClass:"bg-light text-dark"},[s("tr",[s("th",{attrs:{scope:"col"}},[t._v("Material Description")]),s("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Price per Unit")]),s("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Qty")]),s("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Total")]),s("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Action ")])])]),s("tbody",t._l(t.material_estimates,(function(e,a){return s("tr",[s("th",{attrs:{scope:"row"}},[t._v(t._s(e.material.name))]),s("td",{staticClass:"text-right"},[s("number-format-component",{attrs:{input_value:Number(e.price)}})],1),s("td",{staticClass:"text-right"},[s("number-format-component",{attrs:{input_value:Number(e.qty)}}),t._v(" "+t._s(e.material.material_unit.description))],1),s("td",{staticClass:"text-right"},[s("number-format-component",{attrs:{input_value:Number(e.total)}})],1),s("td",{staticClass:"text-center"},[s("b-button",{attrs:{type:"submit",size:"sm",variant:"danger"},on:{click:function(s){return t.deleteItem(e.id)}}},[s("font-awesome-icon",{attrs:{icon:"minus-circle"}}),t._v(" Remove")],1)],1)])})),0),s("tfoot",{staticClass:"bg-light text-dark"},[s("tr",[s("th",{staticClass:"text-right",attrs:{scope:"col",colspan:"3"}},[t._v("TOTAL EST. AMOUNT FOR MATERIALS")]),s("th",{staticClass:"text-right",attrs:{scope:"col"}},[s("number-format-component",{attrs:{input_value:Number(t.total_estimate)}})],1),s("th",{staticClass:"text-center",attrs:{scope:"col"}})])])])],1)])])],1),s("b-modal",{attrs:{centered:"",size:"xl","body-class":"p-0","hide-footer":!0,"hide-header":!0},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[s("div",{staticClass:"card bg-light mb-0"},[s("div",{staticClass:"card-header bg-dark text-white d-flex justify-content-between align-items-center"},[s("h6",{staticClass:"mb-0"},[s("font-awesome-icon",{attrs:{icon:"plus-circle"}}),t._v(" Material Estimates")],1)]),s("div",{staticClass:"card-body bg-white position-relative p-2"},[t.modal_is_saving?s("b-row",{staticClass:"loader",attrs:{"align-v":"center"}},[s("b-col",[s("b-spinner"),s("br"),s("br"),s("strong",[t._v("Loading")])],1)],1):t._e(),s("b-row",{staticClass:"m-0 border"},[s("b-col",{staticClass:"p-2 bg-dark",attrs:{cols:"6"}},[s("b-row",{staticClass:"m-0"},[s("b-col",{staticClass:"text-center p-1 bg-success text-white d-flex align-items-center justify-content-center",attrs:{cols:"1"}},[s("font-awesome-icon",{staticClass:"h3 mb-0",attrs:{icon:"search"}})],1),s("b-col",{staticClass:"p-2 bg-white"},[s("b-form-input",{attrs:{type:"text",debounce:"500",placeholder:"Search..."},model:{value:t.search_key,callback:function(e){t.search_key=e},expression:"search_key"}})],1)],1),s("div",{staticClass:"list-group bg-white mt-2",staticStyle:{"max-height":"260px","overflow-y":"auto"}},t._l(t.materials,(function(e){return s("a",{staticClass:"list-group-item list-group-item-action",attrs:{href:"#"},on:{click:function(s){return s.preventDefault(),t.select(e)}}},[t._v(t._s(e.name))])})),0)],1),s("b-col",{staticClass:"p-2"},[s("b-form",{on:{submit:t.save}},[s("b-row",{staticClass:"m-0 border mb-3"},[s("b-col",{staticClass:"text-center p-2 bg-info text-white d-flex align-items-center justify-content-center",attrs:{cols:"2"}},[s("font-awesome-icon",{staticClass:"h2 mb-0",attrs:{icon:"cube"}})],1),s("b-col",{staticClass:"p-2 bg-white d-flex align-items-center"},[s("div",[s("h6",{staticClass:"mb-0 text-muted"},[t._v("Material")]),s("h2",{staticClass:"mb-0"},[s("strong",[t._v(t._s(t.form.material.name))])])])])],1),s("b-form-group",{attrs:{label:"Price:",description:"This field is required"}},[s("b-form-input",{attrs:{type:"number",step:"any",required:""},model:{value:t.form.price,callback:function(e){t.$set(t.form,"price",e)},expression:"form.price"}})],1),s("b-form-group",{attrs:{label:"Qty:",description:"This field is required"}},[s("b-form-input",{attrs:{type:"number",step:"any",required:""},model:{value:t.form.qty,callback:function(e){t.$set(t.form,"qty",e)},expression:"form.qty"}})],1),s("div",{staticClass:"text-right"},[s("b-button",{attrs:{type:"submit",variant:"dark",size:"sm"}},[s("font-awesome-icon",{attrs:{icon:"save"}}),t._v(" Save")],1)],1)],1)],1)],1)],1)])])],1)},y=[],w={mixins:[c["a"]],components:{NumberFormatComponent:l["a"]},props:{material_estimates:{type:Array,default:function(){return[]},required:!1}},computed:{total_estimate:function(){return this.material_estimates.reduce((function(t,e){return t+Number(e.total)}),0)}},data:function(){return{form:{id:-1,project_location_structure_item_id:this.$route.params.project_location_structure_item_id,material:{},material_id:"",price:"",qty:"",total:""},is_saving:!1,modal_is_saving:!1,materials:[],modal:!1,search_key:""}},watch:{material_estimates:{immediate:!0,deep:!0,handler:function(){}},search_key:{immediate:!0,handler:function(){""!=this.search_key&&this.getMaterials()}}},created:function(){},methods:{save:function(){var t=this;event.preventDefault(),this.swalConfirmSubmit((function(e){if(e.value){t.modal_is_saving=!0;var s=JSON.parse(JSON.stringify(t.form));s.material_id=s.material.id,t.axios.post("material_estimates/save",s).then((function(e){t.swalTransactionCompleted(),t.modal_is_saving=!1,t.modal=!1,t.$emit("addMaterialEstimate")})).catch((function(e){t.swal_transaction_error_data.text=e.response.data,t.swalRequestError(),t.modal_is_saving=!1}))}}))},getMaterials:function(){var t=this;this.axios.get("maintenance/materials/search?search="+this.search_key).then((function(e){t.materials=e.data})).catch((function(t){return console.log(t)}))},deleteItem:function(t){var e=this;this.swalConfirmDelete((function(s){s.value&&(e.is_saving=!0,e.axios.delete("material_estimates/delete",{data:{id:t}}).then((function(t){e.swalTransactionCompleted(),e.is_saving=!1,e.$emit("addMaterialEstimate")})).catch((function(t){e.swal_transaction_error_data.text=t.response.data,e.swalRequestError(),e.is_saving=!1})))}))},select:function(t){this.form.material=t}}},k=w,q=Object(m["a"])(k,x,y,!1,null,null,null),j=q.exports,N=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("b-row",{staticClass:"m-0"},[s("b-col",{staticClass:"p-0"},[s("div",{staticClass:"card bg-light mb-0"},[s("div",{staticClass:"card-header bg-dark text-white d-flex justify-content-between align-items-center"},[s("h6",{staticClass:"mb-0"},[s("font-awesome-icon",{attrs:{icon:"list"}}),t._v(" Manpower")],1),s("b-button",{attrs:{variant:"secondary",size:"sm"},on:{click:function(e){t.modal=!0}}},[s("font-awesome-icon",{attrs:{icon:"plus"}}),t._v(" Add New ")],1)],1),s("div",{staticClass:"card-body bg-white position-relative"},[t.is_saving?s("b-row",{staticClass:"loader",attrs:{"align-v":"center"}},[s("b-col",[s("b-spinner"),s("br"),s("br"),s("strong",[t._v("Loading")])],1)],1):t._e(),s("table",{staticClass:"table border"},[s("thead",{staticClass:"bg-light text-dark"},[s("tr",[s("th",{attrs:{scope:"col"}},[t._v("Name")]),s("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Job Description")]),s("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Daily Rate")]),s("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Action ")])])]),s("tbody",t._l(t.project_location_structure_item_manpowers,(function(e,a){return s("tr",[s("th",{attrs:{scope:"row"}},[t._v(t._s(e.manpower.full_name))]),s("td",{staticClass:"text-right"},[t._v(t._s(e.job_description.description))]),s("td",{staticClass:"text-right"},[s("number-format-component",{attrs:{input_value:Number(e.daily_rate)}})],1),s("td",{staticClass:"text-center"},[s("b-button",{attrs:{type:"submit",size:"sm",variant:"danger"},on:{click:function(s){return t.deleteItem(e.id)}}},[s("font-awesome-icon",{attrs:{icon:"minus-circle"}}),t._v(" Remove")],1)],1)])})),0)])],1)])])],1),s("b-modal",{attrs:{centered:"",size:"xl","body-class":"p-0","hide-footer":!0,"hide-header":!0},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[s("div",{staticClass:"card bg-light mb-0"},[s("div",{staticClass:"card-header bg-dark text-white d-flex justify-content-between align-items-center"},[s("h6",{staticClass:"mb-0"},[s("font-awesome-icon",{attrs:{icon:"plus-circle"}}),t._v(" Material Estimates")],1)]),s("div",{staticClass:"card-body bg-white position-relative p-2"},[t.modal_is_saving?s("b-row",{staticClass:"loader",attrs:{"align-v":"center"}},[s("b-col",[s("b-spinner"),s("br"),s("br"),s("strong",[t._v("Loading")])],1)],1):t._e(),s("b-row",{staticClass:"m-0 border"},[s("b-col",{staticClass:"p-2 bg-dark",attrs:{cols:"6"}},[s("b-row",{staticClass:"m-0"},[s("b-col",{staticClass:"text-center p-1 bg-success text-white d-flex align-items-center justify-content-center",attrs:{cols:"1"}},[s("font-awesome-icon",{staticClass:"h3 mb-0",attrs:{icon:"search"}})],1),s("b-col",{staticClass:"p-2 bg-white"},[s("b-form-input",{attrs:{type:"text",debounce:"500",placeholder:"Search..."},model:{value:t.search_key,callback:function(e){t.search_key=e},expression:"search_key"}})],1)],1),s("div",{staticClass:"list-group bg-white mt-2",staticStyle:{"max-height":"260px","overflow-y":"auto"}},t._l(t.manpowers,(function(e){return s("a",{staticClass:"list-group-item list-group-item-action",attrs:{href:"#"},on:{click:function(s){return s.preventDefault(),t.select(e)}}},[t._v(t._s(e.full_name))])})),0)],1),s("b-col",{staticClass:"p-2"},[s("b-form",{on:{submit:t.save}},[s("b-row",{staticClass:"m-0 border mb-3"},[s("b-col",{staticClass:"text-center p-2 bg-info text-white d-flex align-items-center justify-content-center",attrs:{cols:"2"}},[s("font-awesome-icon",{staticClass:"h2 mb-0",attrs:{icon:"user"}})],1),s("b-col",{staticClass:"p-2 bg-white d-flex align-items-center"},[s("div",[s("h6",{staticClass:"mb-0 text-muted"},[t._v("Manpower Name")]),s("h2",{staticClass:"mb-0"},[s("strong",[t._v(t._s(t.form.manpower.full_name))])])])])],1),s("b-form-group",{attrs:{label:"Job Description:",description:"This field is required"}},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.form.job_description_id,expression:"form.job_description_id"}],staticClass:"form-control",attrs:{required:""},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.form,"job_description_id",e.target.multiple?s:s[0])}}},[s("option",{attrs:{value:""}},[t._v("Please Select")]),t._l(t.job_descriptions,(function(e){return s("option",{domProps:{value:e.id}},[t._v(" "+t._s(e.description)+" ")])}))],2)]),s("b-form-group",{attrs:{label:"Daily Rate:",description:"This field is required"}},[s("b-form-input",{attrs:{type:"number",step:"any",required:""},model:{value:t.form.daily_rate,callback:function(e){t.$set(t.form,"daily_rate",e)},expression:"form.daily_rate"}})],1),s("div",{staticClass:"text-right"},[s("b-button",{attrs:{type:"submit",variant:"dark",size:"sm"}},[s("font-awesome-icon",{attrs:{icon:"save"}}),t._v(" Save")],1)],1)],1)],1)],1)],1)])])],1)},E=[],T={mixins:[c["a"]],components:{NumberFormatComponent:l["a"]},props:{project_location_structure_item_manpowers:{type:Array,default:function(){return[]},required:!1}},data:function(){return{form:{id:-1,project_location_structure_item_id:this.$route.params.project_location_structure_item_id,manpower:{},manpower_id:"",job_description_id:"",daily_rate:""},is_saving:!1,modal_is_saving:!1,manpowers:[],job_descriptions:[],modal:!1,search_key:""}},watch:{project_location_structure_item_manpowers:{immediate:!0,deep:!0,handler:function(){}},search_key:{immediate:!0,handler:function(){""!=this.search_key&&this.getManpowers()}}},created:function(){this.getFields()},methods:{save:function(){var t=this;event.preventDefault(),this.swalConfirmSubmit((function(e){if(e.value){t.modal_is_saving=!0;var s=JSON.parse(JSON.stringify(t.form));s.manpower_id=s.manpower.id,t.axios.post("project/location/structure/item/manpowers/save",s).then((function(e){t.swalTransactionCompleted(),t.modal_is_saving=!1,t.modal=!1,t.$emit("addManpower")})).catch((function(e){t.swal_transaction_error_data.text=e.response.data,t.swalRequestError(),t.modal_is_saving=!1}))}}))},getFields:function(){var t=this;this.is_saving=!0,this.axios.get("maintenance/job_descriptions/all").then((function(e){t.job_descriptions=e.data,t.is_saving=!1})).catch((function(t){return console.log(t)}))},getManpowers:function(){var t=this;this.axios.get("maintenance/manpowers/search?search="+this.search_key).then((function(e){t.manpowers=e.data})).catch((function(t){return console.log(t)}))},deleteItem:function(t){var e=this;this.swalConfirmDelete((function(s){s.value&&(e.is_saving=!0,e.axios.delete("project/location/structure/item/manpowers/delete",{data:{id:t}}).then((function(t){e.swalTransactionCompleted(),e.is_saving=!1,e.$emit("addManpower")})).catch((function(t){e.swal_transaction_error_data.text=t.response.data,e.swalRequestError(),e.is_saving=!1})))}))},select:function(t){this.form.manpower=t,this.form.job_description_id=t.job_description_id}}},$=T,S=Object(m["a"])($,N,E,!1,null,null,null),A=S.exports,D=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",["undefined"!=typeof t.project_location_structure_item.labor_est?s("CRow",[s("CCol",[s("CWidgetBrand",{directives:[{name:"b-popover",rawName:"v-b-popover.hover.top",value:"Manpower estimate and usage.",expression:"'Manpower estimate and usage.'",modifiers:{hover:!0,top:!0}}],staticClass:"w-100 custom-font",attrs:{color:"info",rightHeader:t.project_location_structure_item.labor_est.other_formats.format_1,rightFooter:"ESTIMATE",leftHeader:t.project_location_structure_item.labor.other_formats.format_1,leftFooter:"USAGE",title:"Manpower"}},[s("div",{staticClass:"p-4"},[s("font-awesome-icon",{staticClass:"h1 mb-0",attrs:{icon:"users"}})],1)])],1),s("CCol",[s("CWidgetBrand",{directives:[{name:"b-popover",rawName:"v-b-popover.hover.top",value:"Equipment estimate and usage.",expression:"'Equipment estimate and usage.'",modifiers:{hover:!0,top:!0}}],staticClass:"w-100 custom-font",attrs:{color:"success",rightHeader:t.project_location_structure_item.equipment_est.other_formats.format_1,rightFooter:"ESTIMATE",leftHeader:t.project_location_structure_item.equipment.other_formats.format_1,leftFooter:"USAGE",title:"Equipment"}},[s("div",{staticClass:"p-4"},[s("font-awesome-icon",{staticClass:"h1 mb-0",attrs:{icon:"truck"}})],1)])],1),s("CCol",[s("CWidgetBrand",{directives:[{name:"b-popover",rawName:"v-b-popover.hover.top",value:"Material estimate and usage.",expression:"'Material estimate and usage.'",modifiers:{hover:!0,top:!0}}],staticClass:"w-100 custom-font",attrs:{color:"warning",rightHeader:t.project_location_structure_item.material_est.other_formats.format_1,rightFooter:"ESTIMATE",leftHeader:t.project_location_structure_item.material.other_formats.format_1,leftFooter:"USAGE",title:"Material"}},[s("div",{staticClass:"p-4"},[s("font-awesome-icon",{staticClass:"h1 mb-0",attrs:{icon:"cubes"}})],1)])],1),s("CCol",[s("CWidgetBrand",{directives:[{name:"b-popover",rawName:"v-b-popover.hover.top",value:"Other expense usage.",expression:"'Other expense usage.'",modifiers:{hover:!0,top:!0}}],staticClass:"w-100 custom-font",attrs:{color:"primary",rightHeader:"NA",rightFooter:"ESTIMATE",leftHeader:t.project_location_structure_item.other_expense.other_formats.format_1,leftFooter:"USAGE",title:"Other Expense"}},[s("div",{staticClass:"p-4"},[s("font-awesome-icon",{staticClass:"h1 mb-0",attrs:{icon:"list-ol"}})],1)])],1)],1):t._e(),s("server-side-paginated-table",{ref:"displayTable",attrs:{fields:t.table_settings.fields,api_url:t.table_settings.api_url,delete_url:t.table_settings.delete_url,project_location_structure_item_id:t.project_location_structure_item.id}}),s("b-modal",{attrs:{centered:"",size:"xl","body-class":"p-0","modal-class":"xxl-modal","hide-footer":!0,"hide-header":!0},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[s("modal",{attrs:{project_location_structure_item:t.project_location_structure_item,daily_log_id:t.daily_log_id},on:{save:function(e){return t.save()}}})],1)],1)},O=[],R=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"card bg-light mb-0"},[s("div",{staticClass:"card-header bg-dark text-white d-flex justify-content-between align-items-center"},[s("h6",{staticClass:"mb-0"},[s("font-awesome-icon",{attrs:{icon:"plus-circle"}}),t._v(" Transaction Log")],1)]),s("div",{staticClass:"card-body bg-white position-relative",staticStyle:{"min-height":"80vh"}},[t.is_saving?s("b-row",{staticClass:"loader",attrs:{"align-v":"center"}},[s("b-col",[s("b-spinner"),s("br"),s("br"),s("strong",[t._v("Loading")])],1)],1):t._e(),s("b-row",{staticClass:"m-0 mb-3"},[s("b-col",{staticClass:"p-0",attrs:{cols:"3"}},[s("b-row",{staticClass:"m-0 h-100"},[s("b-col",{staticClass:"text-center p-2 bg-dark text-white d-flex align-items-center justify-content-center",attrs:{cols:"2"}},[s("font-awesome-icon",{staticClass:"h2 mb-0",attrs:{icon:"list"}})],1),s("b-col",{staticClass:"p-3 bg-white d-flex align-items-center border"},[s("div",[s("h4",{staticClass:"mb-0"},[s("strong",[t._v(t._s(t.project_location_structure_item.description))])]),s("small",{staticClass:"text-muted text-uppercase font-weight-bold"},[t._v("ITEM NAME")])])])],1)],1),s("b-col",{staticClass:"p-0 pl-3",attrs:{cols:"3"}},[s("b-row",{staticClass:"m-0 h-100"},[s("b-col",{staticClass:"text-center p-2 bg-dark text-white d-flex align-items-center justify-content-center",attrs:{cols:"2"}},[s("font-awesome-icon",{staticClass:"h2 mb-0",attrs:{icon:"calendar"}})],1),s("b-col",{staticClass:"p-3 bg-white d-flex align-items-center border"},[s("div",{staticClass:"w-100"},[s("b-form-input",{attrs:{type:"date",required:""},model:{value:t.daily_log.transaction_date,callback:function(e){t.$set(t.daily_log,"transaction_date",e)},expression:"daily_log.transaction_date"}}),s("small",{staticClass:"text-muted text-uppercase font-weight-bold"},[t._v("TRANSACTION DATE")])],1)])],1)],1),s("b-col",{staticClass:"p-0 pl-3",attrs:{cols:"3"}},[s("b-row",{staticClass:"m-0 h-100"},[s("b-col",{staticClass:"text-center p-2 bg-dark text-white d-flex align-items-center justify-content-center",attrs:{cols:"2"}},[s("font-awesome-icon",{staticClass:"h2 mb-0",attrs:{icon:"flag"}})],1),s("b-col",{staticClass:"p-3 bg-white d-flex align-items-center border"},[s("div",[s("h4",{staticClass:"mb-0"},[s("strong",[s("number-format-component",{attrs:{input_value:Number(t.total)}})],1)]),s("small",{staticClass:"text-muted text-uppercase font-weight-bold"},[t._v("TOTAL")])])])],1)],1),s("b-col",{staticClass:"p-0 pl-3 cursor-pointer",attrs:{cols:"3"}},[s("b-row",{staticClass:"m-0 h-100",on:{click:function(e){return t.save()}}},[s("b-col",{staticClass:"text-center p-2 bg-success text-white d-flex align-items-center justify-content-center",attrs:{cols:"2"}},[s("font-awesome-icon",{staticClass:"h2 mb-0",attrs:{icon:"save"}})],1),s("b-col",{staticClass:"p-3 bg-white d-flex align-items-center border"},[s("div",[s("h4",{staticClass:"mb-0"},[s("strong",[t._v("SAVE")])]),s("small",{staticClass:"text-muted text-uppercase font-weight-bold"},[t._v("CLICK TO SAVE TRANSACTION")])])])],1)],1)],1),-1!=t.daily_log.id?[s("hr"),s("b-tabs",{attrs:{"content-class":"mt-3"}},[s("b-tab",{attrs:{title:"Labor",active:""}},[s("labor-usage",{attrs:{manpower_usages:t.daily_log.manpower_usages,daily_log_id:t.daily_log.id,project_location_structure_item_manpowers:t.project_location_structure_item.project_location_structure_item_manpowers},on:{addLabor:function(e){return t.get()}}})],1),s("b-tab",{attrs:{title:"Equipment"}},[s("equipment-usage",{attrs:{equipment_usages:t.daily_log.equipment_usages,daily_log_id:t.daily_log.id},on:{addEquipment:function(e){return t.get()}}})],1),s("b-tab",{attrs:{title:"Material"}},[s("material-usage",{attrs:{material_usages:t.daily_log.material_usages,daily_log_id:t.daily_log.id},on:{addMaterial:function(e){return t.get()}}})],1),s("b-tab",{attrs:{title:"Other Expensees"}},[s("other-expense-usage",{attrs:{other_expense_usages:t.daily_log.other_expense_usages,daily_log_id:t.daily_log.id},on:{addOtherExpense:function(e){return t.get()}}})],1)],1)]:t._e()],2)])])},M=[],L=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("b-row",{staticClass:"m-0"},[s("b-col",{staticClass:"p-0"},[s("div",{staticClass:"card bg-light mb-0"},[s("div",{staticClass:"card-header bg-dark text-white d-flex justify-content-between align-items-center"},[s("h6",{staticClass:"mb-0"},[s("font-awesome-icon",{attrs:{icon:"list"}}),t._v(" Labor Usage")],1),s("b-button",{attrs:{variant:"secondary",size:"sm"},on:{click:function(e){t.modal=!0}}},[s("font-awesome-icon",{attrs:{icon:"plus"}}),t._v(" Add New ")],1)],1),s("div",{staticClass:"card-body bg-white position-relative"},[t.is_saving?s("b-row",{staticClass:"loader",attrs:{"align-v":"center"}},[s("b-col",[s("b-spinner"),s("br"),s("br"),s("strong",[t._v("Loading")])],1)],1):t._e(),s("table",{staticClass:"table table-bordered mb-0"},[s("thead",{staticClass:"bg-light text-dark"},[s("tr",[s("th",{attrs:{scope:"col"}},[t._v("Name")]),s("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Job Description")]),s("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Daily Rate")]),s("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Regular Hours")]),s("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("OT Hours")]),s("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Total")]),s("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Action ")])])]),s("tbody",t._l(t.manpower_usages,(function(e,a){return s("tr",[s("th",{attrs:{scope:"row"}},[t._v(t._s(e.manpower.full_name))]),s("th",{attrs:{scope:"row"}},[t._v(t._s(e.job_description.description))]),s("td",{staticClass:"text-right"},[s("number-format-component",{attrs:{input_value:Number(e.daily_rate)}})],1),s("td",{staticClass:"text-right"},[s("number-format-component",{attrs:{input_value:Number(e.regular_hours),currency:!1}})],1),s("td",{staticClass:"text-right"},[s("number-format-component",{attrs:{input_value:Number(e.ot_hours),currency:!1}})],1),s("td",{staticClass:"text-right"},[s("number-format-component",{attrs:{input_value:Number(e.total)}})],1),s("td",{staticClass:"text-center"},[s("b-button",{attrs:{type:"submit",size:"sm",variant:"danger"},on:{click:function(s){return t.deleteItem(e.id)}}},[s("font-awesome-icon",{attrs:{icon:"minus-circle"}}),t._v(" Remove")],1)],1)])})),0),s("tfoot",{staticClass:"bg-light text-dark"},[s("tr",[s("th",{staticClass:"text-right",attrs:{scope:"col",colspan:"5"}},[t._v("TOTAL")]),s("th",{staticClass:"text-right",attrs:{scope:"col"}},[s("number-format-component",{attrs:{input_value:Number(t.total_usage)}})],1),s("th",{staticClass:"text-center",attrs:{scope:"col"}})])])])],1)])])],1),s("b-modal",{attrs:{centered:"",size:"xl","body-class":"p-0","hide-footer":!0,"hide-header":!0},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[s("div",{staticClass:"card bg-light mb-0"},[s("div",{staticClass:"card-header bg-dark text-white d-flex justify-content-between align-items-center"},[s("h6",{staticClass:"mb-0"},[s("font-awesome-icon",{attrs:{icon:"plus-circle"}}),t._v(" Labor Estimates")],1)]),s("div",{staticClass:"card-body bg-white position-relative"},[t.modal_is_saving?s("b-row",{staticClass:"loader",attrs:{"align-v":"center"}},[s("b-col",[s("b-spinner"),s("br"),s("br"),s("strong",[t._v("Loading")])],1)],1):t._e(),s("table",{staticClass:"table border"},[s("thead",{staticClass:"bg-light text-dark"},[s("tr",[s("th",{attrs:{scope:"col"}},[t._v("Name")]),s("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Job Description")]),s("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Daily Rate")]),s("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Regular Hours")]),s("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("OT Hours")])])]),s("tbody",t._l(t.project_location_structure_item_manpowers,(function(e,a){return s("tr",[s("th",{attrs:{scope:"row"}},[t._v(t._s(e.manpower.full_name))]),s("td",[s("select",{directives:[{name:"model",rawName:"v-model",value:e.job_description_id,expression:"project_location_structure_item_manpower.job_description_id"}],staticClass:"form-control",attrs:{required:""},on:{change:function(s){var a=Array.prototype.filter.call(s.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(e,"job_description_id",s.target.multiple?a:a[0])}}},[s("option",{attrs:{value:""}},[t._v("Please Select")]),t._l(t.job_descriptions,(function(e){return s("option",{domProps:{value:e.id}},[t._v(" "+t._s(e.description)+" ")])}))],2)]),s("td",[s("b-form-input",{attrs:{type:"number",step:"any",required:""},model:{value:e.daily_rate,callback:function(s){t.$set(e,"daily_rate",s)},expression:"project_location_structure_item_manpower.daily_rate"}})],1),s("td",[s("b-form-input",{attrs:{type:"number",step:"any",required:""},model:{value:e.regular_hours,callback:function(s){t.$set(e,"regular_hours",s)},expression:"project_location_structure_item_manpower.regular_hours"}})],1),s("td",[s("b-form-input",{attrs:{type:"number",step:"any",required:""},model:{value:e.ot_hours,callback:function(s){t.$set(e,"ot_hours",s)},expression:"project_location_structure_item_manpower.ot_hours"}})],1)])})),0)]),s("div",{staticClass:"text-right"},[s("b-button",{attrs:{type:"submit",variant:"dark",size:"sm"},on:{click:function(e){return t.save()}}},[s("font-awesome-icon",{attrs:{icon:"save"}}),t._v(" Save")],1)],1)],1)])])],1)},z=[],I={mixins:[c["a"]],components:{NumberFormatComponent:l["a"]},props:{manpower_usages:{type:Array,default:function(){return[]},required:!1},project_location_structure_item_manpowers:{type:Array,default:function(){return[]},required:!1},daily_log_id:{type:Number,required:!1}},computed:{total_usage:function(){return this.manpower_usages.reduce((function(t,e){return t+Number(e.total)}),0)}},data:function(){return{is_saving:!1,modal_is_saving:!1,job_descriptions:[],modal:!1}},watch:{manpower_usages:{immediate:!0,deep:!0,handler:function(){}},project_location_structure_item_manpowers:{immediate:!0,deep:!0,handler:function(){}}},created:function(){this.getFields()},methods:{save:function(){var t=this;event.preventDefault(),this.swalConfirmSubmit((function(e){if(e.value){t.modal_is_saving=!0;var s={project_location_structure_item_manpowers:t.project_location_structure_item_manpowers,daily_log_id:t.daily_log_id};t.axios.post("daily_log/manpower_usages/save",s).then((function(e){t.swalTransactionCompleted(),t.modal_is_saving=!1,t.modal=!1,t.$emit("addLabor")})).catch((function(e){t.swal_transaction_error_data.text=e.response.data,t.swalRequestError(),t.modal_is_saving=!1}))}}))},getFields:function(){var t=this;this.is_saving=!0,this.axios.get("maintenance/job_descriptions/all").then((function(e){t.job_descriptions=e.data,t.is_saving=!1})).catch((function(t){return console.log(t)}))},deleteItem:function(t){var e=this;this.swalConfirmDelete((function(s){s.value&&(e.is_saving=!0,e.axios.delete("daily_log/manpower_usages/delete",{data:{id:t}}).then((function(t){e.swalTransactionCompleted(),e.is_saving=!1,e.$emit("addLabor")})).catch((function(t){e.swal_transaction_error_data.text=t.response.data,e.swalRequestError(),e.is_saving=!1})))}))}}},P=I,F=Object(m["a"])(P,L,z,!1,null,null,null),B=F.exports,H=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("b-row",{staticClass:"m-0"},[s("b-col",{staticClass:"p-0"},[s("div",{staticClass:"card bg-light mb-0"},[s("div",{staticClass:"card-header bg-dark text-white d-flex justify-content-between align-items-center"},[s("h6",{staticClass:"mb-0"},[s("font-awesome-icon",{attrs:{icon:"list"}}),t._v(" Equipment Usage")],1),s("b-button",{attrs:{variant:"secondary",size:"sm"},on:{click:function(e){t.modal=!0}}},[s("font-awesome-icon",{attrs:{icon:"plus"}}),t._v(" Add New ")],1)],1),s("div",{staticClass:"card-body bg-white position-relative"},[t.is_saving?s("b-row",{staticClass:"loader",attrs:{"align-v":"center"}},[s("b-col",[s("b-spinner"),s("br"),s("br"),s("strong",[t._v("Loading")])],1)],1):t._e(),s("table",{staticClass:"table table-bordered mb-0"},[s("thead",{staticClass:"bg-light text-dark"},[s("tr",[s("th",{attrs:{scope:"col"}},[t._v("Equipment Code")]),s("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Equipment Type")]),s("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Voucher Number")]),s("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Check Number")]),s("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Price per Hour")]),s("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Hours Used")]),s("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Total")]),s("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Action ")])])]),s("tbody",t._l(t.equipment_usages,(function(e,a){return s("tr",[s("th",{attrs:{scope:"row"}},[t._v(t._s(e.equipment.code))]),s("th",{attrs:{scope:"row"}},[t._v(t._s(e.equipment.equipment_type.description))]),s("th",{attrs:{scope:"row"}},[t._v(t._s(e.voucher_number))]),s("th",{attrs:{scope:"row"}},[t._v(t._s(e.check_number))]),s("td",{staticClass:"text-right"},[s("number-format-component",{attrs:{input_value:Number(e.price_per_hour)}})],1),s("td",{staticClass:"text-right"},[s("number-format-component",{attrs:{input_value:Number(e.hours_used),currency:!1}})],1),s("td",{staticClass:"text-right"},[s("number-format-component",{attrs:{input_value:Number(e.total)}})],1),s("td",{staticClass:"text-center"},[s("b-button",{attrs:{type:"submit",size:"sm",variant:"danger"},on:{click:function(s){return t.deleteItem(e.id)}}},[s("font-awesome-icon",{attrs:{icon:"minus-circle"}}),t._v(" Remove")],1)],1)])})),0),s("tfoot",{staticClass:"bg-light text-dark"},[s("tr",[s("th",{staticClass:"text-right",attrs:{scope:"col",colspan:"6"}},[t._v("TOTAL")]),s("th",{staticClass:"text-right",attrs:{scope:"col"}},[s("number-format-component",{attrs:{input_value:Number(t.total_usage)}})],1),s("th",{staticClass:"text-center",attrs:{scope:"col"}})])])])],1)])])],1),s("b-modal",{attrs:{centered:"",size:"xl","body-class":"p-0","hide-footer":!0,"hide-header":!0},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[s("div",{staticClass:"card bg-light mb-0"},[s("div",{staticClass:"card-header bg-dark text-white d-flex justify-content-between align-items-center"},[s("h6",{staticClass:"mb-0"},[s("font-awesome-icon",{attrs:{icon:"plus-circle"}}),t._v(" Labor Estimates")],1)]),s("div",{staticClass:"card-body bg-white position-relative"},[t.modal_is_saving?s("b-row",{staticClass:"loader",attrs:{"align-v":"center"}},[s("b-col",[s("b-spinner"),s("br"),s("br"),s("strong",[t._v("Loading")])],1)],1):t._e(),s("b-row",{staticClass:"m-0 border"},[s("b-col",{staticClass:"p-2 bg-dark",attrs:{cols:"6"}},[s("b-row",{staticClass:"m-0"},[s("b-col",{staticClass:"text-center p-1 bg-success text-white d-flex align-items-center justify-content-center",attrs:{cols:"1"}},[s("font-awesome-icon",{staticClass:"h3 mb-0",attrs:{icon:"search"}})],1),s("b-col",{staticClass:"p-2 bg-white"},[s("b-form-input",{attrs:{type:"text",debounce:"500",placeholder:"Search..."},model:{value:t.search_key,callback:function(e){t.search_key=e},expression:"search_key"}})],1)],1),s("div",{staticClass:"list-group bg-white mt-2 flex-grow-1",staticStyle:{"max-height":"424px","overflow-y":"auto"}},t._l(t.equipments,(function(e){return s("a",{staticClass:"list-group-item list-group-item-action",attrs:{href:"#"},on:{click:function(s){return s.preventDefault(),t.select(e)}}},[t._v(t._s(e.code)+" - "+t._s(e.equipment_type.description))])})),0)],1),s("b-col",{staticClass:"p-2"},[s("b-form",{on:{submit:t.save}},[s("b-row",{staticClass:"m-0 border mb-3"},[s("b-col",{staticClass:"text-center p-2 bg-info text-white d-flex align-items-center justify-content-center",attrs:{cols:"2"}},[s("font-awesome-icon",{staticClass:"h2 mb-0",attrs:{icon:"user"}})],1),s("b-col",{staticClass:"p-2 bg-white d-flex align-items-center"},[s("div",[s("h6",{staticClass:"mb-0 text-muted"},[t._v("Equipment")]),s("h2",{staticClass:"mb-0"},[s("strong",["undefined"!=typeof t.form.equipment.code?[t._v(" "+t._s(t.form.equipment.code)+" - "+t._s(t.form.equipment.equipment_type.description)+" ")]:[t._v(" NA ")]],2)])])])],1),s("b-form-group",{attrs:{label:"Voucher Number:",description:"This field is required"}},[s("b-form-input",{attrs:{type:"text",required:""},model:{value:t.form.voucher_number,callback:function(e){t.$set(t.form,"voucher_number",e)},expression:"form.voucher_number"}})],1),s("b-form-group",{attrs:{label:"Check Number:",description:"This field is required"}},[s("b-form-input",{attrs:{type:"text",required:""},model:{value:t.form.check_number,callback:function(e){t.$set(t.form,"check_number",e)},expression:"form.check_number"}})],1),s("b-form-group",{attrs:{label:"Price per Hour:",description:"This field is required"}},[s("b-form-input",{attrs:{type:"number",step:"any",required:""},model:{value:t.form.price_per_hour,callback:function(e){t.$set(t.form,"price_per_hour",e)},expression:"form.price_per_hour"}})],1),s("b-form-group",{attrs:{label:"Number of Hour/s used:",description:"This field is required"}},[s("b-form-input",{attrs:{type:"number",step:"any",required:""},model:{value:t.form.hours_used,callback:function(e){t.$set(t.form,"hours_used",e)},expression:"form.hours_used"}})],1),s("div",{staticClass:"text-right"},[s("b-button",{attrs:{type:"submit",variant:"dark",size:"sm"}},[s("font-awesome-icon",{attrs:{icon:"save"}}),t._v(" Save")],1)],1)],1)],1)],1)],1)])])],1)},J=[],U={mixins:[c["a"]],components:{NumberFormatComponent:l["a"]},props:{equipment_usages:{type:Array,default:function(){return[]},required:!1},daily_log_id:{type:Number,required:!1}},computed:{total_usage:function(){return this.equipment_usages.reduce((function(t,e){return t+Number(e.total)}),0)}},data:function(){return{form:{id:-1,daily_log_id:this.daily_log_id,equipment_id:-1,equipment:{},voucher_number:"",check_number:"",hours_used:"",price_per_hour:""},is_saving:!1,modal_is_saving:!1,equipments:[],modal:!1,search_key:""}},watch:{equipment_usages:{immediate:!0,deep:!0,handler:function(){}},search_key:{immediate:!0,handler:function(){""!=this.search_key&&this.getEquipments()}}},created:function(){},methods:{save:function(){var t=this;if(event.preventDefault(),-1==this.form.equipment_id)return this.swal_transaction_error_data.text="Please select an equipment.",void this.swalRequestError();this.swalConfirmSubmit((function(e){e.value&&(t.modal_is_saving=!0,t.axios.post("daily_log/equipment_usages/save",t.form).then((function(e){t.swalTransactionCompleted(),t.modal_is_saving=!1,t.modal=!1,t.$emit("addEquipment")})).catch((function(e){t.swal_transaction_error_data.text=e.response.data,t.swalRequestError(),t.modal_is_saving=!1})))}))},getEquipments:function(){var t=this;this.axios.get("maintenance/equipments/search?search="+this.search_key).then((function(e){t.equipments=e.data})).catch((function(t){return console.log(t)}))},deleteItem:function(t){var e=this;this.swalConfirmDelete((function(s){s.value&&(e.is_saving=!0,e.axios.delete("daily_log/equipment_usages/delete",{data:{id:t}}).then((function(t){e.swalTransactionCompleted(),e.is_saving=!1,e.$emit("addEquipment")})).catch((function(t){e.swal_transaction_error_data.text=t.response.data,e.swalRequestError(),e.is_saving=!1})))}))},select:function(t){this.form.equipment=t,this.form.price_per_hour=t.hourly_rate,this.form.equipment_id=t.id}}},Q=U,V=Object(m["a"])(Q,H,J,!1,null,null,null),W=V.exports,G=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("b-row",{staticClass:"m-0"},[s("b-col",{staticClass:"p-0"},[s("div",{staticClass:"card bg-light mb-0"},[s("div",{staticClass:"card-header bg-dark text-white d-flex justify-content-between align-items-center"},[s("h6",{staticClass:"mb-0"},[s("font-awesome-icon",{attrs:{icon:"list"}}),t._v(" Material Usage")],1)]),s("div",{staticClass:"card-body bg-white position-relative"},[t.is_saving?s("b-row",{staticClass:"loader",attrs:{"align-v":"center"}},[s("b-col",[s("b-spinner"),s("br"),s("br"),s("strong",[t._v("Loading")])],1)],1):t._e(),s("b-form",{on:{submit:function(e){return e.preventDefault(),t.save(e)}}},[s("b-row",[s("b-col",[s("div",{staticClass:"input-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.material.name,expression:"form.material.name"}],staticClass:"form-control bg-white",attrs:{type:"text",placeholder:"Material's Description",readonly:""},domProps:{value:t.form.material.name},on:{input:function(e){e.target.composing||t.$set(t.form.material,"name",e.target.value)}}}),s("div",{staticClass:"input-group-append"},[s("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:function(e){t.modal=!0}}},[s("font-awesome-icon",{attrs:{icon:"search"}}),t._v(" Search")],1)])])]),s("b-col",{attrs:{cols:"2"}},[s("div",{staticClass:"input-group"},[s("div",{staticClass:"input-group-prepend"},[s("span",{staticClass:"input-group-text"},[t._v("Price")])]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.price,expression:"form.price"}],staticClass:"form-control",attrs:{type:"number",step:"any",required:""},domProps:{value:t.form.price},on:{input:function(e){e.target.composing||t.$set(t.form,"price",e.target.value)}}})])]),s("b-col",{attrs:{cols:"2"}},[s("div",{staticClass:"input-group"},[s("div",{staticClass:"input-group-prepend"},[s("span",{staticClass:"input-group-text"},[t._v("Qty Used")])]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.qty,expression:"form.qty"}],staticClass:"form-control",attrs:{type:"number",step:"any",required:""},domProps:{value:t.form.qty},on:{input:function(e){e.target.composing||t.$set(t.form,"qty",e.target.value)}}})])]),s("b-col",{attrs:{cols:"1"}},[s("button",{staticClass:"btn btn-secondary btn-block",attrs:{type:"submit"}},[s("font-awesome-icon",{attrs:{icon:"plus-circle"}}),t._v(" Add")],1)])],1)],1),s("table",{staticClass:"table table-bordered mb-0 mt-3"},[s("thead",{staticClass:"bg-light text-dark"},[s("tr",[s("th",{attrs:{scope:"col"}},[t._v("Material")]),s("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Price")]),s("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Quantity")]),s("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Total")]),s("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Action ")])])]),s("tbody",t._l(t.material_usages,(function(e,a){return s("tr",[s("th",{attrs:{scope:"row"}},[t._v(t._s(e.material.name))]),s("td",{staticClass:"text-right"},[s("number-format-component",{attrs:{input_value:Number(e.price)}})],1),s("td",{staticClass:"text-right"},[s("number-format-component",{attrs:{input_value:Number(e.qty),currency:!1}})],1),s("td",{staticClass:"text-right"},[s("number-format-component",{attrs:{input_value:Number(e.total)}})],1),s("td",{staticClass:"text-center"},[s("b-button",{attrs:{type:"submit",size:"sm",variant:"danger"},on:{click:function(s){return t.deleteItem(e.id)}}},[s("font-awesome-icon",{attrs:{icon:"minus-circle"}}),t._v(" Remove")],1)],1)])})),0),s("tfoot",{staticClass:"bg-light text-dark"},[s("tr",[s("th",{staticClass:"text-right",attrs:{scope:"col",colspan:"3"}},[t._v("TOTAL")]),s("th",{staticClass:"text-right",attrs:{scope:"col"}},[s("number-format-component",{attrs:{input_value:Number(t.total_usage)}})],1),s("th",{staticClass:"text-center",attrs:{scope:"col"}})])])])],1)])])],1),s("b-modal",{attrs:{centered:"",size:"xl","body-class":"p-0","hide-footer":!0,"hide-header":!0},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[s("material-search",{on:{select:t.select}})],1)],1)},Y=[],K=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"card bg-light mb-0"},[s("div",{staticClass:"card-header bg-info text-white d-flex justify-content-between align-items-center"},[s("h6",{staticClass:"mb-0"},[s("font-awesome-icon",{attrs:{icon:"search"}}),t._v(" Search")],1)]),s("div",{staticClass:"card-body bg-white position-relative p-2"},[s("loader",{attrs:{status:t.is_saving}}),s("b-row",{staticClass:"m-0"},[s("b-col",{staticClass:"text-center p-1 bg-dark text-white d-flex align-items-center justify-content-center",attrs:{cols:"1"}},[s("font-awesome-icon",{staticClass:"h3 mb-0",attrs:{icon:"search"}})],1),s("b-col",{staticClass:"p-2 bg-white border"},[s("b-form-input",{attrs:{type:"text",debounce:"500",placeholder:"Search...",autocomplete:"off"},model:{value:t.search_key,callback:function(e){t.search_key=e},expression:"search_key"}})],1)],1),t.results.length>0?s("div",{staticClass:"list-group mt-3"},t._l(t.results,(function(e){return s("button",{staticClass:"list-group-item list-group-item-action",attrs:{type:"button"},on:{click:function(s){return t.select(e)}}},[t._v(" "+t._s(e.name)+" ")])})),0):t._e()],1)])])},X=[],Z=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.status?s("b-row",{staticClass:"loader",attrs:{"align-v":"center"}},[s("b-col",[s("b-spinner"),s("br"),s("br"),s("strong",[t._v("Loading")])],1)],1):t._e()],1)},tt=[],et={props:{status:{type:Boolean,default:!1,required:!1}},watch:{status:{immediate:!0,deep:!0,handler:function(){}}},data:function(){return{}},created:function(){},methods:{}},st=et,at=Object(m["a"])(st,Z,tt,!1,null,null,null),it=at.exports,rt={mixins:[c["a"]],components:{NumberFormatComponent:l["a"],Loader:it},data:function(){return{is_saving:!1,project_modal:!1,search_key:"",results:[]}},watch:{search_key:{immediate:!0,handler:function(){""!=this.search_key&&this.get()}}},created:function(){},methods:{get:function(){var t=this;this.axios.get("maintenance/materials/search?search="+this.search_key).then((function(e){t.results=e.data})).catch((function(t){return console.log(t)}))},select:function(t){this.$emit("select",t)}}},ot=rt,nt=Object(m["a"])(ot,K,X,!1,null,null,null),ct=nt.exports,lt={mixins:[c["a"]],components:{NumberFormatComponent:l["a"],MaterialSearch:ct},props:{material_usages:{type:Array,default:function(){return[]},required:!1},daily_log_id:{type:Number,required:!1}},computed:{total_usage:function(){return this.material_usages.reduce((function(t,e){return t+Number(e.total)}),0)}},data:function(){return{form:{id:-1,daily_log_id:this.daily_log_id,material_id:-1,material:{},price:"",qty:"",total:""},form_copy:{},is_saving:!1,modal:!1}},watch:{material_usages:{immediate:!0,deep:!0,handler:function(){}}},created:function(){this.form_copy=JSON.parse(JSON.stringify(this.form))},methods:{save:function(){var t=this;if(event.preventDefault(),-1==this.form.material_id)return this.swal_transaction_error_data.text="Please select material.",void this.swalRequestError();this.swalConfirmSubmit((function(e){e.value&&(t.is_saving=!0,t.axios.post("daily_log/material_usages/save",t.form).then((function(e){t.swalTransactionCompleted(),t.form=JSON.parse(JSON.stringify(t.form_copy)),t.is_saving=!1,t.$emit("addMaterial")})).catch((function(e){t.swal_transaction_error_data.text=e.response.data,t.swalRequestError(),t.modal_is_saving=!1})))}))},deleteItem:function(t){var e=this;this.swalConfirmDelete((function(s){s.value&&(e.is_saving=!0,e.axios.delete("daily_log/material_usages/delete",{data:{id:t}}).then((function(t){e.swalTransactionCompleted(),e.is_saving=!1,e.$emit("addMaterial")})).catch((function(t){e.swal_transaction_error_data.text=t.response.data,e.swalRequestError(),e.is_saving=!1})))}))},select:function(t){this.form.material=t,this.form.material_id=t.id,this.modal=!1}}},ut=lt,dt=Object(m["a"])(ut,G,Y,!1,null,null,null),mt=dt.exports,_t=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("b-row",{staticClass:"m-0"},[s("b-col",{staticClass:"p-0"},[s("div",{staticClass:"card bg-light mb-0"},[s("div",{staticClass:"card-header bg-dark text-white d-flex justify-content-between align-items-center"},[s("h6",{staticClass:"mb-0"},[s("font-awesome-icon",{attrs:{icon:"list"}}),t._v(" Other Expenses")],1),s("b-button",{attrs:{variant:"secondary",size:"sm"},on:{click:function(e){t.modal=!0}}},[s("font-awesome-icon",{attrs:{icon:"plus"}}),t._v(" Add New ")],1)],1),s("div",{staticClass:"card-body bg-white position-relative"},[t.is_saving?s("b-row",{staticClass:"loader",attrs:{"align-v":"center"}},[s("b-col",[s("b-spinner"),s("br"),s("br"),s("strong",[t._v("Loading")])],1)],1):t._e(),s("table",{staticClass:"table table-bordered mb-0"},[s("thead",{staticClass:"bg-light text-dark"},[s("tr",[s("th",{attrs:{scope:"col"}},[t._v("Expense Description")]),s("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Details")]),s("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Voucher Number")]),s("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Check Number")]),s("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Amount")]),s("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Action ")])])]),s("tbody",t._l(t.other_expense_usages,(function(e,a){return s("tr",[s("th",{attrs:{scope:"row"}},[t._v(t._s(e.other_expense.description))]),s("th",{attrs:{scope:"row"}},[t._v(t._s(e.details))]),s("th",{attrs:{scope:"row"}},[t._v(t._s(e.voucher_number))]),s("th",{attrs:{scope:"row"}},[t._v(t._s(e.check_number))]),s("td",{staticClass:"text-right"},[s("number-format-component",{attrs:{input_value:Number(e.amount),currency:!1}})],1),s("td",{staticClass:"text-center"},[s("b-button",{attrs:{type:"submit",size:"sm",variant:"danger"},on:{click:function(s){return t.deleteItem(e.id)}}},[s("font-awesome-icon",{attrs:{icon:"minus-circle"}}),t._v(" Remove")],1)],1)])})),0),s("tfoot",{staticClass:"bg-light text-dark"},[s("tr",[s("th",{staticClass:"text-right",attrs:{scope:"col",colspan:"4"}},[t._v("TOTAL")]),s("th",{staticClass:"text-right",attrs:{scope:"col"}},[s("number-format-component",{attrs:{input_value:Number(t.total_usage)}})],1),s("th",{staticClass:"text-center",attrs:{scope:"col"}})])])])],1)])])],1),s("b-modal",{attrs:{centered:"",size:"xl","body-class":"p-0","hide-footer":!0,"hide-header":!0},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[s("div",{staticClass:"card bg-light mb-0"},[s("div",{staticClass:"card-header bg-dark text-white d-flex justify-content-between align-items-center"},[s("h6",{staticClass:"mb-0"},[s("font-awesome-icon",{attrs:{icon:"plus-circle"}}),t._v(" Labor Estimates")],1)]),s("div",{staticClass:"card-body bg-white position-relative"},[t.modal_is_saving?s("b-row",{staticClass:"loader",attrs:{"align-v":"center"}},[s("b-col",[s("b-spinner"),s("br"),s("br"),s("strong",[t._v("Loading")])],1)],1):t._e(),s("b-row",{staticClass:"m-0 border"},[s("b-col",{staticClass:"p-2 bg-dark",attrs:{cols:"6"}},[s("b-row",{staticClass:"m-0"},[s("b-col",{staticClass:"text-center p-1 bg-success text-white d-flex align-items-center justify-content-center",attrs:{cols:"1"}},[s("font-awesome-icon",{staticClass:"h3 mb-0",attrs:{icon:"search"}})],1),s("b-col",{staticClass:"p-2 bg-white"},[s("b-input-group",{scopedSlots:t._u([{key:"append",fn:function(){return[s("b-button",{attrs:{variant:"info"},on:{click:function(e){return t.addOtherExpense()}}},[t._v("New Record")])]},proxy:!0}])},[s("b-form-input",{attrs:{type:"text",debounce:"500",placeholder:"Search...",autocomplete:"off"},model:{value:t.search_key,callback:function(e){t.search_key=e},expression:"search_key"}})],1)],1)],1),s("div",{staticClass:"list-group bg-white mt-2 flex-grow-1",staticStyle:{"max-height":"424px","overflow-y":"auto"}},t._l(t.other_expenses,(function(e){return s("a",{staticClass:"list-group-item list-group-item-action",attrs:{href:"#"},on:{click:function(s){return s.preventDefault(),t.select(e)}}},[t._v(t._s(e.description))])})),0)],1),s("b-col",{staticClass:"p-3"},[s("b-form",{on:{submit:t.save}},[s("b-row",{staticClass:"m-0 border mb-3"},[s("b-col",{staticClass:"text-center p-2 bg-info text-white d-flex align-items-center justify-content-center",attrs:{cols:"2"}},[s("font-awesome-icon",{staticClass:"h2 mb-0",attrs:{icon:"list"}})],1),s("b-col",{staticClass:"p-2 bg-white d-flex align-items-center"},[s("div",[s("h6",{staticClass:"mb-0 text-muted"},[t._v("Description")]),s("h2",{staticClass:"mb-0"},[s("strong",["undefined"!=typeof t.form.other_expense.description?[t._v(" "+t._s(t.form.other_expense.description)+" ")]:[t._v(" NA ")]],2)])])])],1),s("b-form-group",{attrs:{label:"Voucher Number:",description:"This field is required"}},[s("b-form-input",{attrs:{type:"text",required:""},model:{value:t.form.voucher_number,callback:function(e){t.$set(t.form,"voucher_number",e)},expression:"form.voucher_number"}})],1),s("b-form-group",{attrs:{label:"Check Number:",description:"This field is required"}},[s("b-form-input",{attrs:{type:"text",required:""},model:{value:t.form.check_number,callback:function(e){t.$set(t.form,"check_number",e)},expression:"form.check_number"}})],1),s("b-form-group",{attrs:{label:"Amount:",description:"This field is required"}},[s("b-form-input",{attrs:{type:"number",step:"any",required:""},model:{value:t.form.amount,callback:function(e){t.$set(t.form,"amount",e)},expression:"form.amount"}})],1),s("b-form-group",{attrs:{label:"Details:",description:"This field is required"}},[s("b-form-input",{attrs:{type:"text",required:""},model:{value:t.form.details,callback:function(e){t.$set(t.form,"details",e)},expression:"form.details"}})],1),s("div",{staticClass:"text-right"},[s("b-button",{attrs:{type:"submit",variant:"dark",size:"sm"}},[s("font-awesome-icon",{attrs:{icon:"save"}}),t._v(" Save")],1)],1)],1)],1)],1)],1)])])],1)},pt=[],bt={mixins:[c["a"]],components:{NumberFormatComponent:l["a"]},props:{other_expense_usages:{type:Array,default:function(){return[]},required:!1},daily_log_id:{type:Number,required:!1}},computed:{total_usage:function(){return this.other_expense_usages.reduce((function(t,e){return t+Number(e.amount)}),0)}},data:function(){return{form:{id:-1,daily_log_id:this.daily_log_id,other_expense_id:-1,other_expense:{},voucher_number:"",check_number:"",amount:"",details:""},is_saving:!1,modal_is_saving:!1,other_expenses:[],modal:!1,search_key:""}},watch:{other_expense_usages:{immediate:!0,deep:!0,handler:function(){}},search_key:{immediate:!0,handler:function(){""!=this.search_key&&this.getDescriptions()}}},created:function(){},methods:{save:function(){var t=this;if(event.preventDefault(),-1==this.form.other_expense_id)return this.swal_transaction_error_data.text="Please select an expense description.",void this.swalRequestError();this.swalConfirmSubmit((function(e){e.value&&(t.modal_is_saving=!0,t.axios.post("daily_log/other_expense_usages/save",t.form).then((function(e){t.swalTransactionCompleted(),t.modal_is_saving=!1,t.modal=!1,t.$emit("addOtherExpense")})).catch((function(e){t.swal_transaction_error_data.text=e.response.data,t.swalRequestError(),t.modal_is_saving=!1})))}))},getDescriptions:function(){var t=this;this.axios.get("maintenance/other_expenses/search?search="+this.search_key).then((function(e){t.other_expenses=e.data})).catch((function(t){return console.log(t)}))},deleteItem:function(t){var e=this;this.swalConfirmDelete((function(s){s.value&&(e.is_saving=!0,e.axios.delete("daily_log/other_expense_usages/delete",{data:{id:t}}).then((function(t){e.swalTransactionCompleted(),e.is_saving=!1,e.$emit("addOtherExpense")})).catch((function(t){e.swal_transaction_error_data.text=t.response.data,e.swalRequestError(),e.is_saving=!1})))}))},select:function(t){this.form.other_expense=t,this.form.other_expense_id=t.id},addOtherExpense:function(){var t=this;event.preventDefault(),this.swalConfirmSubmit((function(e){if(e.value){t.is_saving=!0;var s={id:-1,description:t.search_key};t.axios.post("maintenance/other_expenses/save",s).then((function(e){t.swalTransactionCompleted(),t.select(e.data),t.is_saving=!1})).catch((function(e){t.swal_transaction_error_data.text=e.response.data,t.swalRequestError(),t.is_saving=!1}))}}))}}},ft=bt,ht=Object(m["a"])(ft,_t,pt,!1,null,null,null),vt=ht.exports,gt={mixins:[c["a"]],components:{NumberFormatComponent:l["a"],LaborUsage:B,EquipmentUsage:W,OtherExpenseUsage:vt,MaterialUsage:mt},props:{project_location_structure_item:{type:Object,default:function(){},required:!1},daily_log_id:{type:Number,required:!1}},data:function(){return{is_saving:!1,modal:!1,daily_log:{id:this.daily_log_id,transaction_date:"",project_location_structure_item_id:this.$route.params.project_location_structure_item_id,manpower_usages:[],equipment_usages:[],material_usages:[],other_expense_usages:[]}}},computed:{total:function(){return this.total_manpower_usage+this.total_equipment_usage+this.total_other_expense_usage+this.total_material_usage},total_manpower_usage:function(){return this.daily_log.manpower_usages.reduce((function(t,e){return t+Number(e.total)}),0)},total_equipment_usage:function(){return this.daily_log.equipment_usages.reduce((function(t,e){return t+Number(e.total)}),0)},total_other_expense_usage:function(){return this.daily_log.other_expense_usages.reduce((function(t,e){return t+Number(e.amount)}),0)},total_material_usage:function(){return 0}},watch:{project_location_structure_item:{immediate:!0,deep:!0,handler:function(){}},daily_log_id:{immediate:!0,deep:!0,handler:function(){-1!=this.daily_log_id&&this.get()}}},created:function(){},methods:{save:function(){var t=this;if(""==this.daily_log.transaction_date)return this.swal_transaction_error_data.text="Transaction date is required.",void this.swalRequestError();this.swalConfirmSubmit((function(e){if(e.value){t.is_saving=!0;var s=JSON.parse(JSON.stringify(t.daily_log));s.total_labor=t.total_manpower_usage,s.total_equipment=t.total_equipment_usage,s.total_material=t.total_material_usage,s.total_other_expense=t.total_other_expense_usage,s.grand_total=t.total,t.axios.post("daily_logs/save",s).then((function(e){t.swalTransactionCompleted(),t.is_saving=!1,-1!=t.daily_log.id?t.$emit("save"):t.daily_log.id=e.data.id})).catch((function(e){t.swal_transaction_error_data.text=e.response.data,t.swalRequestError(),t.is_saving=!1}))}}))},get:function(){var t=this;this.is_saving=!0,this.axios.get("daily_logs/get",{params:{id:this.daily_log.id}}).then((function(e){var s=e.data;s.transaction_date=e.data.transaction_date.default,r["bus"].$emit("refreshComputations"),t.daily_log=s,t.is_saving=!1})).catch((function(t){return console.log(t)}))}}},Ct=gt,xt=Object(m["a"])(Ct,R,M,!1,null,null,null),yt=xt.exports,wt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"card bg-light mb-3"},[s("div",{staticClass:"card-header bg-dark text-white"},[s("b-row",[s("b-col",[t.loading?s("div",[s("strong",[t._v(" Fetching result... ")])]):s("div",[s("font-awesome-icon",{attrs:{icon:"database"}}),s("strong",[t._v(" "+t._s(t.list.total)+" ")]),s("small",[t._v("Result/s found")])],1)]),s("b-col",{staticClass:"text-right"},[s("b-button",{attrs:{variant:"secondary",size:"sm"},on:{click:t.clickTopRightBtn}},[s("font-awesome-icon",{attrs:{icon:"plus"}}),t._v(" Add New Log ")],1)],1)],1)],1),s("div",{staticClass:"card-body bg-white mb-0"},[s("b-row",{staticClass:"mb-3"},[s("b-col",{attrs:{sm:"2"}},[s("b-form-select",{attrs:{options:t.options,size:"sm"},on:{change:t.changeDisplayNo},model:{value:t.selected_display_no,callback:function(e){t.selected_display_no=e},expression:"selected_display_no"}})],1),s("b-col",{attrs:{sm:"6","offset-sm":"4"}},[s("b-input-group",[s("b-input-group-prepend",[s("b-input-group-text",{staticClass:"bg-dark text-white"},[s("font-awesome-icon",{attrs:{icon:"search"}})],1)],1),s("b-form-input",{attrs:{type:"text",debounce:"500",placeholder:"Search...",autocomplete:"off"},model:{value:t.search_term,callback:function(e){t.search_term=e},expression:"search_term"}}),s("b-input-group-append",[s("b-button",{staticClass:"bg-dark text-white px-4",attrs:{variant:"dark",size:"sm",disabled:""==t.search_term},on:{click:t.clearSearch}},[s("font-awesome-icon",{attrs:{icon:"times"}})],1)],1)],1)],1)],1),s("b-table",{attrs:{selectable:"",selectedVariant:"info","select-mode":"single",dark:t.dark,hover:t.hover,striped:t.striped,bordered:t.bordered,fixed:t.fixed,responsive:"sm",items:t.table_items,fields:t.captions,busy:t.loading,"show-empty":"","head-variant":"dark"},on:{"row-dblclicked":t.rowDbClicked},scopedSlots:t._u([{key:"cell(labor)",fn:function(t){return[s("div",{staticClass:"text-center"},[s("number-format-component",{attrs:{input_value:Number(t.item.total_labor)}})],1)]}},{key:"cell(equipment)",fn:function(t){return[s("div",{staticClass:"text-center"},[s("number-format-component",{attrs:{input_value:Number(t.item.total_equipment)}})],1)]}},{key:"cell(material)",fn:function(t){return[s("div",{staticClass:"text-center"},[s("number-format-component",{attrs:{input_value:Number(t.item.total_material)}})],1)]}},{key:"cell(other_expense)",fn:function(t){return[s("div",{staticClass:"text-center"},[s("number-format-component",{attrs:{input_value:Number(t.item.total_other_expense)}})],1)]}},{key:"cell(total)",fn:function(t){return[s("div",{staticClass:"text-center"},[s("number-format-component",{attrs:{input_value:Number(t.item.grand_total)}})],1)]}},{key:"cell(action)",fn:function(e){return[s("div",{staticClass:"text-center"},[s("b-button",{attrs:{variant:"danger",size:"sm"},on:{click:function(s){return t.deleteRow(e.item.id)}}},[s("font-awesome-icon",{attrs:{icon:"minus-circle"}}),t._v(" Delete ")],1)],1)]}}])},[s("div",{staticClass:"text-center my-2",attrs:{slot:"table-busy"},slot:"table-busy"},[s("br"),s("b-spinner",{staticClass:"align-middle",attrs:{small:""}}),s("br"),s("br"),s("strong",[t._v("Loading")])],1)]),t.list.total>0?s("nav",[s("b-pagination",{staticClass:"mb-0",attrs:{disabled:t.loading,align:"right","total-rows":t.total_rows,"per-page":t.per_page},on:{input:t.getAll},model:{value:t.list.current_page,callback:function(e){t.$set(t.list,"current_page",e)},expression:"list.current_page"}})],1):t._e()],1)])])},kt=[],qt={name:"server-side-paginated-table",inheritAttrs:!1,mixins:[c["a"]],components:{NumberFormatComponent:l["a"]},props:{hover:{type:Boolean,default:!0},striped:{type:Boolean,default:!0},bordered:{type:Boolean,default:!0},small:{type:Boolean,default:!0},fixed:{type:Boolean,default:!0},fields:{type:[Array,Object],default:function(){return[]}},dark:{type:Boolean,default:!1},api_url:{type:String,required:!0},delete_url:{type:String,required:!0},top_right_btn:{type:String,default:"",required:!1},project_location_structure_item_id:{type:Number,default:-1,required:!0}},data:function(){return{selected:[],list:{data:[],from:1,to:0,current_page:1,total:0,per_page:1},result:[],loading:!0,searchTimeout:function(){return{type:Function,default:function(){return{}}}},search_term:"",options:[{value:10,text:"Display 10 records"},{value:25,text:"Display 25 records"},{value:50,text:"Display 50 records"},{value:100,text:"Display 100 records"}],selected_display_no:10}},computed:{table_items:function(){return this.list.data},per_page:function(){return parseInt(this.list.per_page)},total_rows:function(){return parseInt(this.list.total)},captions:function(){return this.fields},total_selected:function(){return parseInt(this.selected.length)}},created:function(){var t=this;r["bus"].$on("refreshComputations",(function(){t.getAll()}))},mounted:function(){},watch:{search_term:{immediate:!0,handler:function(){""!=this.search_term&&(this.loading=!0),this.list.current_page=1,this.getAll()}},project_location_structure_item_id:{immediate:!0,handler:function(){-1!=this.project_location_structure_item_id&&""!=this.project_location_structure_item_id&&(this.loading=!0,this.list.current_page=1,this.getAll())}}},methods:{getAll:function(){var t=this;this.loading=!0,this.axios.get(this.api_url+"?id="+this.project_location_structure_item_id+"&page="+this.list.current_page+"&per_page="+this.selected_display_no+"&search="+this.search_term).then((function(e){var s=e.data;t.list=s,t.loading=!1})).catch((function(t){return console.log(t)}))},clickTopRightBtn:function(){r["bus"].$emit("serverSidePaginatedTableTopRightBtnClicked")},rowDbClicked:function(t){r["bus"].$emit("serverSidePaginatedTableDbClick",t)},clearSearch:function(){this.search_term="",this.getAll()},changeDisplayNo:function(){this.loading=!0,this.list.current_page=1,this.getAll()},deleteRow:function(t){var e=this;this.swalConfirmDelete((function(s){s.value&&(e.loading=!0,e.axios.delete(e.delete_url,{data:{id:t}}).then((function(t){e.getAll(),e.swal_transaction_completed_data.text="Record successfully deleted.",e.swalTransactionCompleted(),e.loading=!1,r["bus"].$emit("refreshComputations")})).catch((function(t){e.swalRequestError(),e.loading=!1})))}))}}},jt=qt,Nt=Object(m["a"])(jt,wt,kt,!1,null,null,null),Et=Nt.exports,Tt={mixins:[c["a"]],components:{NumberFormatComponent:l["a"],Modal:yt,ServerSidePaginatedTable:Et},props:{project_location_structure_item:{type:Object,default:function(){},required:!1}},data:function(){return{table_settings:{api_url:"daily_logs/get_by_item",delete_url:"daily_logs/delete",fields:[{key:"transaction_date.other_formats.format_1",label:"Transaction Date"},{key:"labor",label:"Labor",class:"text-center"},{key:"equipment",label:"Equipment",class:"text-center"},{key:"material",label:"Material",class:"text-center"},{key:"other_expense",label:"Other Expense",class:"text-center"},{key:"total",label:"Total",class:"text-center"},{key:"action",label:"Action",class:"text-center"}]},is_saving:!1,modal:!1,daily_log_id:-1}},watch:{project_location_structure_item:{immediate:!0,deep:!0,handler:function(){}}},created:function(){var t=this;r["bus"].$on("serverSidePaginatedTableTopRightBtnClicked",(function(){t.modal=!0})),r["bus"].$on("serverSidePaginatedTableDbClick",(function(e){t.viewItem(e.id)}))},methods:{viewItem:function(t){this.daily_log_id=t,this.modal=!0},save:function(){this.modal=!1,r["bus"].$emit("refreshComputations")}}},$t=Tt,St=Object(m["a"])($t,D,O,!1,null,null,null),At=St.exports,Dt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"card bg-light mb-0"},[s("div",{staticClass:"card-header bg-dark text-white d-flex justify-content-between align-items-center"},[s("h6",{staticClass:"mb-0"},[s("font-awesome-icon",{attrs:{icon:"cubes"}}),t._v(" Material Inventory")],1),s("b-button",{attrs:{variant:"secondary",size:"sm"},on:{click:function(e){t.modal=!0}}},[s("font-awesome-icon",{attrs:{icon:"plus"}}),t._v(" Add New ")],1)],1),s("div",{staticClass:"card-body bg-white position-relative"},[t.is_saving?s("b-row",{staticClass:"loader",attrs:{"align-v":"center"}},[s("b-col",[s("b-spinner"),s("br"),s("br"),s("strong",[t._v("Loading")])],1)],1):t._e(),s("b-row",[s("b-col",{staticClass:"bg-light text-dark p-3 ml-3",attrs:{cols:"3"}},[s("b-form",{on:{submit:function(e){return e.preventDefault(),t.save(e)}}},[s("b-form-group",{attrs:{label:"Remarks:",description:"This field is required"}},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.remarks,expression:"form.remarks"}],staticClass:"form-control",attrs:{required:""},domProps:{value:t.form.remarks},on:{input:function(e){e.target.composing||t.$set(t.form,"remarks",e.target.value)}}})]),s("div",{staticClass:"text-right"},[s("b-button",{attrs:{type:"submit",variant:"dark",size:"sm"}},[s("font-awesome-icon",{attrs:{icon:"save"}}),t._v(" Save")],1)],1)],1)],1),s("b-col",{staticClass:"px-3"},[s("table",{staticClass:"table border mb-0"},[s("thead",{staticClass:"bg-light text-dark"},[s("tr",[s("th",{attrs:{scope:"col"}},[t._v("Material")]),s("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Price")]),s("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Qty")]),s("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Action ")])])]),s("tbody",t._l(t.form.starting_inventory_details,(function(e,a){return s("tr",[s("th",{attrs:{scope:"row"}},[t._v(t._s(e.material.name))]),s("td",[s("b-form-input",{attrs:{type:"number",step:"any",required:""},model:{value:e.price,callback:function(s){t.$set(e,"price",s)},expression:"starting_inventory_detail.price"}})],1),s("td",[s("b-form-input",{attrs:{type:"number",step:"any",required:""},model:{value:e.qty,callback:function(s){t.$set(e,"qty",s)},expression:"starting_inventory_detail.qty"}})],1),s("td",{staticClass:"text-center"},[s("b-button",{attrs:{type:"submit",size:"sm",variant:"danger"},on:{click:function(e){return t.deleteMaterial(a)}}},[s("font-awesome-icon",{attrs:{icon:"minus-circle"}}),t._v(" Remove")],1)],1)])})),0)])])],1)],1)]),s("b-modal",{attrs:{centered:"",size:"xl","body-class":"p-0","hide-footer":!0,"hide-header":!0},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[s("div",{staticClass:"card bg-light mb-0"},[s("div",{staticClass:"card-header bg-dark text-white"},[s("h6",{staticClass:"mb-0"},[s("font-awesome-icon",{attrs:{icon:"plus-circle"}}),t._v(" Add New Item")],1)]),s("div",{staticClass:"card-body bg-white p-2"},[t.is_saving?s("b-row",{staticClass:"loader",attrs:{"align-v":"center"}},[s("b-col",[s("b-spinner"),s("br"),s("br"),s("strong",[t._v("Loading")])],1)],1):t._e(),s("b-row",{staticClass:"m-0 border mb-2"},[s("b-col",{staticClass:"text-center p-1 bg-success text-white d-flex align-items-center justify-content-center",attrs:{cols:"1"}},[s("font-awesome-icon",{staticClass:"h3 mb-0",attrs:{icon:"search"}})],1),s("b-col",{staticClass:"p-2 bg-light"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.search_key,expression:"search_key"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Search...",debounce:"500"},domProps:{value:t.search_key},on:{input:function(e){e.target.composing||(t.search_key=e.target.value)}}})])],1),s("b-row",{staticClass:"m-0"},[s("b-col",{staticClass:"p-2 bg-light",attrs:{cols:"6"}},[t.materials.length<=0?s("b-alert",{attrs:{show:"",variant:"danger"}},[t._v("No search result/s found.")]):s("div",{staticClass:"list-group bg-white mt-2",staticStyle:{"max-height":"260px","overflow-y":"auto"}},t._l(t.materials,(function(e){return s("a",{staticClass:"list-group-item list-group-item-action",attrs:{href:"#"},on:{click:function(s){return s.preventDefault(),t.select(e)}}},[t._v(t._s(e.name))])})),0)],1),s("b-col",{staticClass:"p-0 pl-2"},[s("b-form",{on:{submit:function(e){return e.preventDefault(),t.addMeterial(e)}}},[s("b-row",{staticClass:"m-0 border mb-3"},[s("b-col",{staticClass:"text-center p-2 bg-info text-white d-flex align-items-center justify-content-center",attrs:{cols:"2"}},[s("font-awesome-icon",{staticClass:"h2 mb-0",attrs:{icon:"cube"}})],1),s("b-col",{staticClass:"p-2 bg-white d-flex align-items-center"},[s("div",[s("h6",{staticClass:"mb-0 text-muted"},[t._v("Material")]),s("h2",{staticClass:"mb-0"},[s("strong",["undefined"!=typeof t.starting_inventory_detail.material.name?[t._v(" "+t._s(t.starting_inventory_detail.material.name)+" ")]:[t._v(" ..... ")]],2)])])])],1),s("b-form-group",{attrs:{label:"Price:",description:"This field is required"}},[s("b-form-input",{attrs:{type:"number",step:"any",required:""},model:{value:t.starting_inventory_detail.price,callback:function(e){t.$set(t.starting_inventory_detail,"price",e)},expression:"starting_inventory_detail.price"}})],1),s("b-form-group",{attrs:{label:"Qty:",description:"This field is required"}},[s("b-form-input",{attrs:{type:"number",step:"any",required:""},model:{value:t.starting_inventory_detail.qty,callback:function(e){t.$set(t.starting_inventory_detail,"qty",e)},expression:"starting_inventory_detail.qty"}})],1),s("div",{staticClass:"text-right"},[s("b-button",{attrs:{type:"submit",variant:"dark",size:"sm"}},[s("font-awesome-icon",{attrs:{icon:"save"}}),t._v(" Add")],1)],1)],1)],1)],1)],1)])])],1)},Ot=[],Rt={mixins:[c["a"]],components:{NumberFormatComponent:l["a"]},props:{project_location_structure_item:{type:Object,default:function(){},required:!1}},data:function(){return{is_saving:!1,modal:!1,form:{id:-1,project_location_structure_item_id:this.$route.params.project_location_structure_item_id,remarks:"",starting_inventory_details:[]},starting_inventory_detail:{id:-1,material_id:-1,material:{},price:"",qty:""},materials:[],search_key:""}},watch:{project_location_structure_item:{immediate:!0,deep:!0,handler:function(){}},search_key:{immediate:!0,handler:function(){""!=this.search_key&&this.getMaterials()}}},created:function(){},methods:{getMaterials:function(){var t=this;this.axios.get("maintenance/materials/search?search="+this.search_key).then((function(e){t.materials=e.data})).catch((function(t){return console.log(t)}))},select:function(t){this.starting_inventory_detail.material=t,this.starting_inventory_detail.material_id=t.id},save:function(){var t=this;this.swalConfirmSubmit((function(e){e.value&&(t.modal_is_saving=!0,t.axios.post("inventory/reset",t.form).then((function(e){t.swalTransactionCompleted(),t.is_saving=!1})).catch((function(e){t.swal_transaction_error_data.text=e.response.data,t.swalRequestError(),t.is_saving=!1})))}))},addMeterial:function(){if(-1==this.starting_inventory_detail.material_id)return this.swal_transaction_error_data.text="Please select a material.",void this.swalRequestError();var t=JSON.parse(JSON.stringify(this.starting_inventory_detail));this.form.starting_inventory_details.find((function(e){return e.material_id===t.material_id&&e.price==t.price}))?(this.swal_transaction_error_data.text="Material with same price already exist.",this.swalRequestError()):(t.material_id=t.material.id,this.form.starting_inventory_details.push(t),this.modal=!1)},deleteMaterial:function(t){var e=this;this.swalConfirmDelete((function(s){s.value&&e.form.starting_inventory_details.splice(t,1)}))}}},Mt=Rt,Lt=Object(m["a"])(Mt,Dt,Ot,!1,null,null,null),zt=Lt.exports,It=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"card bg-light mb-0"},[s("div",{staticClass:"card-header bg-dark text-white d-flex justify-content-between align-items-center"},[s("h6",{staticClass:"mb-0"},[s("font-awesome-icon",{attrs:{icon:"check-square"}}),t._v(" Progress Report")],1),s("b-button",{attrs:{variant:"secondary",size:"sm"},on:{click:function(e){t.modal=!0}}},[s("font-awesome-icon",{attrs:{icon:"plus-circle"}}),t._v(" Add Monthly Estimate ")],1)],1),s("div",{staticClass:"card-body bg-white position-relative"},[t.is_saving?s("b-row",{staticClass:"loader",attrs:{"align-v":"center"}},[s("b-col",[s("b-spinner"),s("br"),s("br"),s("strong",[t._v("Loading")])],1)],1):t._e(),s("b-row",{staticClass:"m-0 mb-3"},[s("b-col",{staticClass:"p-0"},[s("b-row",{staticClass:"m-0 border"},[s("b-col",{staticClass:"text-center p-2 bg-primary text-white d-flex align-items-center justify-content-center",attrs:{cols:"2"}},[s("font-awesome-icon",{staticClass:"h2 mb-0",attrs:{icon:"check-circle"}})],1),s("b-col",{staticClass:"p-3 bg-white d-flex align-items-center"},[s("div",[s("h4",{staticClass:"mb-0"},[s("strong",[s("number-format-component",{attrs:{input_value:Number(t.project_location_structure_item.qty),currency:!1}})],1)]),s("small",{staticClass:"text-muted text-uppercase font-weight-bold"},[t._v("ITEM QUANTITY")])])])],1)],1),s("b-col",{staticClass:"p-0 pl-3"},[s("b-row",{staticClass:"m-0 h-100 border"},[s("b-col",{staticClass:"text-center p-2 bg-warning text-white d-flex align-items-center justify-content-center",attrs:{cols:"2"}},[s("font-awesome-icon",{staticClass:"h2 mb-0",attrs:{icon:"check-circle"}})],1),s("b-col",{staticClass:"p-3 bg-white d-flex align-items-center"},[s("div",[s("h4",{staticClass:"mb-0"},[s("strong",[s("number-format-component",{attrs:{input_value:Number(t.project_location_structure_item.progress_estimate),currency:!1}})],1)]),s("small",{staticClass:"text-muted text-uppercase font-weight-bold"},[t._v("TOTAL ESTIMATE")])])])],1)],1),s("b-col",{staticClass:"p-0 pl-3"},[s("b-row",{staticClass:"m-0 h-100 border"},[s("b-col",{staticClass:"text-center p-2 bg-success text-white d-flex align-items-center justify-content-center",attrs:{cols:"2"}},[s("font-awesome-icon",{staticClass:"h2 mb-0",attrs:{icon:"check-circle"}})],1),s("b-col",{staticClass:"p-3 bg-white d-flex align-items-center"},[s("div",[s("h4",{staticClass:"mb-0"},[s("strong",[s("number-format-component",{attrs:{input_value:Number(t.project_location_structure_item.progress_accomplishment),currency:!1}})],1)]),s("small",{staticClass:"text-muted text-uppercase font-weight-bold"},[t._v("TOTAL ACCOMPLISHMENT")])])])],1)],1),s("b-col",{staticClass:"p-0 pl-3"},[s("b-row",{staticClass:"m-0 h-100 border"},[s("b-col",{staticClass:"text-center p-2 bg-danger text-white d-flex align-items-center justify-content-center",attrs:{cols:"2"}},[s("font-awesome-icon",{staticClass:"h2 mb-0",attrs:{icon:"check-circle"}})],1),s("b-col",{staticClass:"p-3 bg-white d-flex align-items-center"},[s("div",[s("h4",{staticClass:"mb-0"},[s("strong",[s("number-format-component",{attrs:{input_value:Number(t.project_location_structure_item.progress_balance),currency:!1}})],1)]),s("small",{staticClass:"text-muted text-uppercase font-weight-bold"},[t._v("TOTAL BALANCE")])])])],1)],1)],1),s("b-row",[s("b-col",{staticClass:"px-3"},[s("table",{staticClass:"table table-bordered mb-0"},[s("thead",{staticClass:"bg-light text-dark"},[s("tr",[s("th",{attrs:{scope:"col"}},[t._v("Date")]),s("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Estimated Qty")]),s("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Accomplishment")]),s("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Balance")]),s("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Details")]),s("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Action")])])]),s("tbody",t._l(t.project_location_structure_item.progresses,(function(e,a){return s("tr",[s("th",{attrs:{scope:"row"}},[t._v(t._s(e.transaction_date.other_formats.format_1))]),s("td",{staticClass:"text-right"},[s("number-format-component",{attrs:{input_value:Number(e.qty),currency:!1}})],1),s("td",{staticClass:"text-right"},[s("number-format-component",{attrs:{input_value:Number(e.usage),currency:!1}})],1),s("td",{staticClass:"text-right"},[s("number-format-component",{attrs:{input_value:Number(e.balance),currency:!1}})],1),s("td",[t._v(" "+t._s(e.details)+" ")]),s("td",{staticClass:"text-center"},[s("b-button",{staticClass:"mr-2",attrs:{type:"button",size:"sm",variant:"info"},on:{click:function(s){return t.selectProgress(e)}}},[s("font-awesome-icon",{attrs:{icon:"edit"}}),t._v(" View")],1),s("b-button",{attrs:{type:"submit",size:"sm",variant:"danger"},on:{click:function(s){return t.deleteProgress(e.id)}}},[s("font-awesome-icon",{attrs:{icon:"minus-circle"}}),t._v(" Remove")],1)],1)])})),0)])])],1)],1)]),s("b-modal",{attrs:{centered:"",size:"xl","body-class":"p-0","modal-class":"xxl-modal","hide-footer":!0,"hide-header":!0},on:{hidden:function(e){return t.refresh()}},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[s("form-component",{attrs:{progress_id:t.selected_progress.id}})],1)],1)},Pt=[],Ft=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("b-row",{staticClass:"m-0"},[s("b-col",{staticClass:"p-0"},[s("div",{staticClass:"card bg-light mb-0"},[s("div",{staticClass:"card-header bg-dark text-white"},[s("h6",{staticClass:"mb-0"},[s("font-awesome-icon",{attrs:{icon:"plus-circle"}}),t._v(" Add New Item")],1)]),s("div",{staticClass:"card-body bg-white"},[t.is_saving?s("b-row",{staticClass:"loader",attrs:{"align-v":"center"}},[s("b-col",[s("b-spinner"),s("br"),s("br"),s("strong",[t._v("Loading")])],1)],1):t._e(),s("b-row",[s("b-col",{attrs:{cols:"4"}},[s("CRow",[s("CCol",[s("CWidgetBrand",{staticClass:"w-100",attrs:{color:"facebook",rightHeader:t.form.qty,rightFooter:"ESTIMATE",leftHeader:t.form.usage,leftFooter:"USAGE"}},[s("div",{staticClass:"p-4 w-100"},[s("h1",{staticClass:"mb-0"},[s("number-format-component",{attrs:{input_value:Number(t.form.balance),currency:!1}})],1),s("h5",[t._v("BALANCE")])])])],1)],1),s("b-form",{on:{submit:t.save}},[s("b-form-group",{attrs:{label:"Month:",description:"This field is required"}},[s("b-form-input",{attrs:{type:"month",required:"",size:"sm"},model:{value:t.form.transaction_date,callback:function(e){t.$set(t.form,"transaction_date",e)},expression:"form.transaction_date"}})],1),s("b-form-group",{attrs:{label:"Estimated Qty:",description:"This field is required"}},[s("b-form-input",{attrs:{type:"number",step:"any",required:"",size:"sm"},model:{value:t.form.qty,callback:function(e){t.$set(t.form,"qty",e)},expression:"form.qty"}})],1),s("b-form-group",{attrs:{label:"Details:",description:"This field is required"}},[s("b-form-textarea",{attrs:{id:"textarea",placeholder:"Enter something...",rows:"3","max-rows":"6",size:"sm"},model:{value:t.form.details,callback:function(e){t.$set(t.form,"details",e)},expression:"form.details"}})],1),s("div",{staticClass:"text-right"},[s("b-button",{attrs:{type:"submit",variant:"dark",size:"sm"}},[s("font-awesome-icon",{attrs:{icon:"save"}}),t._v(" Save")],1)],1)],1)],1),s("b-col",[s("div",{staticClass:"card bg-light mb-0"},[s("div",{staticClass:"card-header bg-dark text-white d-flex justify-content-between align-items-center"},[s("h6",{staticClass:"mb-0"},[s("font-awesome-icon",{attrs:{icon:"check-square"}}),t._v(" Accomplishments")],1)]),s("div",{staticClass:"card-body bg-white position-relative"},[t.is_saving_details?s("b-row",{staticClass:"loader",attrs:{"align-v":"center"}},[s("b-col",[s("b-spinner"),s("br"),s("br"),s("strong",[t._v("Loading")])],1)],1):t._e(),s("locked-component",{attrs:{status:-1==t.form.id,display_text:"Save your monthly estimate first."}}),s("fieldset",{staticClass:"border p-3 mb-3 bg-light"},[s("legend",{staticClass:"w-auto bg-facebook px-3 py-1 text-white rounded border h5"},[t._v("DAILY ACCOMPLISHMENT")]),s("b-form",{on:{submit:t.saveDetail}},[s("b-row",[s("b-col",[s("b-form-group",{attrs:{label:"Date:",description:"This field is required"}},[s("b-form-input",{attrs:{type:"date",required:"",size:"sm"},model:{value:t.progress_details_form.transaction_date,callback:function(e){t.$set(t.progress_details_form,"transaction_date",e)},expression:"progress_details_form.transaction_date"}})],1)],1),s("b-col",[s("b-form-group",{attrs:{label:"Qty:",description:"This field is required"}},[s("b-form-input",{attrs:{type:"number",step:"any",required:"",size:"sm"},model:{value:t.progress_details_form.qty,callback:function(e){t.$set(t.progress_details_form,"qty",e)},expression:"progress_details_form.qty"}})],1)],1),s("b-col",[s("b-form-group",{attrs:{label:"Details:",description:"This field is required"}},[s("b-input-group",{attrs:{size:"sm"},scopedSlots:t._u([{key:"append",fn:function(){return[s("b-button",{attrs:{type:"submit",variant:"facebook",size:"sm"}},[s("font-awesome-icon",{attrs:{icon:"plus-circle"}}),t._v(" Add Accomplishment")],1)]},proxy:!0}])},[s("b-form-input",{attrs:{type:"text",required:"",size:"sm"},model:{value:t.progress_details_form.details,callback:function(e){t.$set(t.progress_details_form,"details",e)},expression:"progress_details_form.details"}})],1)],1)],1)],1)],1)],1),s("b-row",[s("b-col",{staticClass:"px-3"},[s("table",{staticClass:"table border mb-0"},[s("thead",{staticClass:"bg-light text-dark"},[s("tr",[s("th",{attrs:{scope:"col"}},[t._v("Date")]),s("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Qty")]),s("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Details")]),s("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Action ")])])]),s("tbody",t._l(t.form.progress_details,(function(e,a){return s("tr",[s("th",{attrs:{scope:"row"}},[t._v(t._s(e.transaction_date.other_formats.format_1))]),s("td",{staticClass:"text-right"},[s("number-format-component",{attrs:{input_value:Number(e.qty),currency:!1}})],1),s("td",{staticClass:"text-right"},[t._v(" "+t._s(e.details)+" ")]),s("td",{staticClass:"text-center"},[s("b-button",{attrs:{type:"submit",size:"sm",variant:"danger"},on:{click:function(s){return t.deleteDetail(e.id)}}},[s("font-awesome-icon",{attrs:{icon:"minus-circle"}}),t._v(" Remove")],1)],1)])})),0)])])],1)],1)])])],1)],1)])])],1)],1)},Bt=[],Ht=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.status?s("b-row",{staticClass:"loader",attrs:{"align-v":"center"}},[s("b-col",[s("font-awesome-icon",{staticClass:"h1 mb-0 text-muted",attrs:{icon:"lock"}}),s("br"),s("br"),s("strong",[t._v(t._s(t.display_text))])],1)],1):t._e()],1)},Jt=[],Ut={props:{status:{type:Boolean,default:!1,required:!1},display_text:{type:String,default:"Not Applicable",required:!1}},watch:{status:{immediate:!0,deep:!0,handler:function(){}}},data:function(){return{}},created:function(){},methods:{}},Qt=Ut,Vt=Object(m["a"])(Qt,Ht,Jt,!1,null,null,null),Wt=Vt.exports,Gt={mixins:[c["a"]],components:{NumberFormatComponent:l["a"],LockedComponent:Wt},props:{progress_id:{type:Number,default:function(){return-1},required:!1}},data:function(){return{form:{id:-1,project_location_structure_item_id:this.$route.params.project_location_structure_item_id,transaction_date:"",qty:"",usage:0,balance:0,details:"",progress_details:[]},progress_details_form:{id:-1,transaction_date:"",qty:"",details:"",is_deleted:!1},progress_details_form_copy:{},is_saving:!1,is_saving_details:!1,is_locked:!1}},watch:{progress_id:{immediate:!0,deep:!0,handler:function(){this.get()}}},created:function(){console.log(this.progress_id),this.progress_details_form_copy=JSON.parse(JSON.stringify(this.progress_details_form))},methods:{save:function(){var t=this;event.preventDefault(),this.swalConfirmSubmit((function(e){e.value&&(t.is_saving=!0,t.axios.post("progresses/save",t.form).then((function(e){t.swalTransactionCompleted(),t.is_saving=!1,t.form.id=e.data.id})).catch((function(e){t.swal_transaction_error_data.text=e.response.data,t.swalRequestError(),t.is_saving=!1})))}))},saveDetail:function(){var t=this;event.preventDefault(),this.swalConfirmSubmit((function(e){if(e.value){t.is_saving_details=!0;var s=t.progress_details_form;s.progress_id=t.form.id,t.axios.post("progress_details/save",s).then((function(e){t.swalTransactionCompleted(),t.is_saving_details=!1,t.progress_details_form=JSON.parse(JSON.stringify(t.progress_details_form_copy)),t.get()})).catch((function(e){t.swal_transaction_error_data.text=e.response.data,t.swalRequestError(),t.is_saving_details=!1}))}}))},deleteDetail:function(t){var e=this;this.swalConfirmDelete((function(s){s.value&&(e.is_saving_details=!0,e.axios.delete("progress_details/delete",{data:{id:t}}).then((function(t){e.swalTransactionCompleted(),e.is_saving_details=!1,e.get()})).catch((function(t){e.swal_transaction_error_data.text=t.response.data,e.swalRequestError(),e.is_saving_details=!1})))}))},get:function(){var t=this;-1!=this.progress_id&&(this.is_saving=!0,this.axios.get("progresses/get",{params:{id:this.progress_id}}).then((function(e){var s=e.data;s.transaction_date=s.transaction_date.default,t.form=e.data,t.is_saving=!1})).catch((function(t){return console.log(t)})))}}},Yt=Gt,Kt=Object(m["a"])(Yt,Ft,Bt,!1,null,null,null),Xt=Kt.exports,Zt={mixins:[c["a"]],components:{NumberFormatComponent:l["a"],FormComponent:Xt},props:{project_location_structure_item:{type:Object,default:function(){},required:!1}},data:function(){return{is_saving:!1,modal:!1,selected_progress:{}}},watch:{project_location_structure_item:{immediate:!0,deep:!0,handler:function(){}}},created:function(){},methods:{deleteProgress:function(t){var e=this;this.swalConfirmDelete((function(s){s.value&&(e.is_saving_details=!0,e.axios.delete("progresses/delete",{data:{id:t}}).then((function(t){e.swalTransactionCompleted(),e.is_saving_details=!1,e.refresh()})).catch((function(t){e.swal_transaction_error_data.text=t.response.data,e.swalRequestError(),e.is_saving_details=!1})))}))},selectProgress:function(t){var e=JSON.parse(JSON.stringify(t));e.transaction_date=t.transaction_date.default,this.selected_progress=e,this.modal=!0},refresh:function(){this.selected_progress={},this.$emit("refresh")}}},te=Zt,ee=Object(m["a"])(te,It,Pt,!1,null,null,null),se=ee.exports,ae=s("8210"),ie=s("edf9"),re={components:{BreadCrumbs:ie["a"],ProjectLocationStructureFormComponent:ae["a"],LaborEstimate:p,EquipmentEstimate:C,MaterialEstimate:j,Manpower:A,UsagesIndex:At,Inventory:zt,ProgressReport:se},data:function(){return{project_location_structure_item:{description:"",labor_estimates:[],equipment_estimates:[],material_estimates:[],project_location_structure_item_manpowers:[]},is_saving:!1}},created:function(){var t=this;this.get(),r["bus"].$on("refreshComputations",(function(e){t.get()}))},methods:{addProjectLocationStructureItem:function(){this.add_project_location_structure_item_modal=!1},get:function(){var t=this;this.is_saving=!0,this.axios.get("project/location/structure/items/get",{params:{id:this.$route.params.project_location_structure_item_id}}).then((function(e){t.project_location_structure_item=e.data,t.is_saving=!1})).catch((function(t){return console.log(t)}))}}},oe=re,ne=Object(m["a"])(oe,a,i,!1,null,null,null);e["default"]=ne.exports},"73e4":function(t,e,s){"use strict";e["a"]={data:function(){return{swal_confirm_submit_data:{title:"Please confirm your submission.",text:"Your changes will be saved after this process.",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, save it!",cancelButtonText:"Wait, im not done yet!"},swal_confirm_delete_data:{title:"Are you sure you want to delete this record?",text:"Note: This action will not be undone.",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete!",cancelButtonText:"No, I dont want to delete it!"},swal_transaction_completed_data:{title:"Transaction Completed!",text:"Data Successfully Saved.",icon:"success",showConfirmButton:!1,timer:1e3},swal_transaction_warning_data:{title:"Warning!",text:"Complete all necessary fields!",icon:"warning"},swal_transaction_error_data:{title:"Error!",text:"Please contact your Administrator.",icon:"error"}}},methods:{swalConfirmSubmit:function(t){this.$swal(this.swal_confirm_submit_data).then((function(e){t(e)}))},swalFieldsRequired:function(){this.$swal.fire("Error!","Please fill out all required fields","error")},swalRequestError:function(){this.$swal.fire(this.swal_transaction_error_data)},swalTransactionCompleted:function(){this.$swal.fire(this.swal_transaction_completed_data)},swalConfirmDelete:function(t){this.$swal(this.swal_confirm_delete_data).then((function(e){t(e)}))},swalTransactionWarning:function(){this.$swal.fire(this.swal_transaction_warning_data)}}}},8210:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("b-row",{staticClass:"m-0"},[s("b-col",{staticClass:"p-0"},[s("div",{staticClass:"card bg-light mb-0"},[s("div",{staticClass:"card-header bg-dark text-white"},[s("h6",{staticClass:"mb-0"},[s("font-awesome-icon",{attrs:{icon:"plus-circle"}}),t._v(" Add New Item")],1)]),s("div",{staticClass:"card-body bg-white"},[t.is_saving?s("b-row",{staticClass:"loader",attrs:{"align-v":"center"}},[s("b-col",[s("b-spinner"),s("br"),s("br"),s("strong",[t._v("Loading")])],1)],1):t._e(),s("b-form",{on:{submit:t.save}},[s("b-form-group",{attrs:{label:"Item Name:",description:"This field is required"}},[s("b-form-input",{attrs:{type:"text",required:""},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1),s("b-form-group",{attrs:{label:"Item Unit:",description:"This field is required"}},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.form.item_unit_id,expression:"form.item_unit_id"}],staticClass:"form-control",attrs:{required:""},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.form,"item_unit_id",e.target.multiple?s:s[0])}}},[s("option",{attrs:{value:""}},[t._v("Please Select")]),t._l(t.item_units,(function(e){return s("option",{domProps:{value:e.id}},[t._v(" "+t._s(e.description)+" ")])}))],2)]),s("b-form-group",{attrs:{label:"Qty:",description:"This field is required"}},[s("b-form-input",{attrs:{type:"number",step:"any",required:""},model:{value:t.form.qty,callback:function(e){t.$set(t.form,"qty",e)},expression:"form.qty"}})],1),s("b-form-group",{attrs:{label:"Estimated Hours:",description:"This field is required"}},[s("b-form-input",{attrs:{type:"number",step:"any",required:""},model:{value:t.form.estimated_hours,callback:function(e){t.$set(t.form,"estimated_hours",e)},expression:"form.estimated_hours"}})],1),s("b-form-group",{attrs:{label:"Estimated Days:",description:"This field is required"}},[s("b-form-input",{attrs:{type:"number",step:"any",required:""},model:{value:t.form.estimated_days,callback:function(e){t.$set(t.form,"estimated_days",e)},expression:"form.estimated_days"}})],1),s("b-form-group",{attrs:{label:"Estimated Budget:",description:"This field is required"}},[s("b-form-input",{attrs:{type:"number",step:"any",required:""},model:{value:t.form.estimated_budget,callback:function(e){t.$set(t.form,"estimated_budget",e)},expression:"form.estimated_budget"}})],1),s("div",{staticClass:"text-right"},[s("b-button",{attrs:{type:"submit",variant:"dark",size:"sm"}},[s("font-awesome-icon",{attrs:{icon:"save"}}),t._v(" Save")],1)],1)],1)],1)])])],1)],1)},i=[],r=s("73e4"),o={mixins:[r["a"]],props:{project_location_structure_item:{type:Object,default:function(){},required:!1}},data:function(){return{form:{id:-1,description:"",project_location_structure_id:this.$route.params.project_location_structure_id,item_unit_id:"",qty:"",estimated_hours:"",estimated_days:"",estimated_budget:""},is_saving:!1,item_units:[]}},watch:{project_location_structure_item:{immediate:!0,deep:!0,handler:function(){"undefined"!==typeof this.project_location_structure_item&&this.get()}}},created:function(){"undefined"!==typeof this.project_location_structure_item&&this.get(),this.getFields()},methods:{get:function(){this.is_saving=!0,this.form=this.project_location_structure_item,this.is_saving=!1},save:function(){var t=this;event.preventDefault(),this.swalConfirmSubmit((function(e){e.value&&(t.is_saving=!0,t.axios.post("project/location/structure/items/save",t.form).then((function(e){t.swalTransactionCompleted(),t.is_saving=!1,t.$emit("addProjectLocationStructureItem")})).catch((function(e){t.swal_transaction_error_data.text=e.response.data,t.swalRequestError(),t.is_saving=!1})))}))},getFields:function(){var t=this;this.is_saving=!0,this.axios.get("maintenance/item_units/all").then((function(e){t.item_units=e.data,t.is_saving=!1})).catch((function(t){return console.log(t)}))}}},n=o,c=s("2877"),l=Object(c["a"])(n,a,i,!1,null,null,null);e["a"]=l.exports},"86db":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"d-inline"},[t.currency?[t._v(" ")]:t._e(),t._v(t._s(t.input_value.toLocaleString("en-US",{minimumFractionDigits:t.decimal}))+" ")],2)},i=[],r={props:{input_value:{type:[Number,String],default:0,required:!0},decimal:{type:Number,default:2,required:!1},currency:{type:Boolean,default:!0,required:!1}},data:function(){return{}},created:function(){},methods:{}},o=r,n=s("2877"),c=Object(n["a"])(o,a,i,!1,null,null,null);e["a"]=c.exports},edf9:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("nav",{staticClass:"bg-white",attrs:{"aria-label":"breadcrumb"}},[s("ol",{staticClass:"breadcrumb"},[t.is_saving?s("li",{staticClass:"breadcrumb-item text-dark"},[t._v("Loading...")]):t._l(t.crumbs,(function(e){return s("li",{staticClass:"breadcrumb-item"},[s("router-link",{attrs:{to:e.link}},[t._v(" "+t._s(e.label)+" ")])],1)}))],2)])])},i=[],r=(s("56d7"),{data:function(){return{crumbs:[{label:"",link:""}],is_saving:!1}},created:function(){this.setCrumbs()},methods:{setCrumbs:function(){var t=this;this.is_saving=!0,"undefined"!=typeof this.$route.params.project_location_id&&"undefined"==typeof this.$route.params.project_location_structure_id?this.axios.get("crumbs/generate_from_location",{params:{id:this.$route.params.project_location_id}}).then((function(e){t.crumbs=[],t.crumbs.push({label:e.data.title,link:"/projects/"+e.data.id}),t.crumbs.push({label:e.data.location_description,link:"/projects/"+e.data.id+"/"+e.data.location_id}),t.is_saving=!1})).catch((function(t){return console.log(t)})):"undefined"!=typeof this.$route.params.project_location_structure_id&&"undefined"==typeof this.$route.params.project_location_structure_item_id?this.axios.get("crumbs/generate_from_structure",{params:{id:this.$route.params.project_location_structure_id}}).then((function(e){t.crumbs=[],t.crumbs.push({label:e.data.title,link:"/projects/"+e.data.id}),t.crumbs.push({label:e.data.location_description,link:"/projects/"+e.data.id+"/"+e.data.location_id}),t.crumbs.push({label:e.data.structure_description,link:"/projects/"+e.data.id+"/"+e.data.location_id+"/"+e.data.structure_id}),t.is_saving=!1})).catch((function(t){return console.log(t)})):"undefined"!=typeof this.$route.params.project_location_structure_item_id&&this.axios.get("crumbs/generate_from_item",{params:{id:this.$route.params.project_location_structure_item_id}}).then((function(e){t.crumbs=[],t.crumbs.push({label:e.data.title,link:"/projects/"+e.data.id}),t.crumbs.push({label:e.data.location_description,link:"/projects/"+e.data.id+"/"+e.data.location_id}),t.crumbs.push({label:e.data.structure_description,link:"/projects/"+e.data.id+"/"+e.data.location_id+"/"+e.data.structure_id}),t.crumbs.push({label:e.data.item_description,link:"/projects/"+e.data.id+"/"+e.data.location_id+"/"+e.data.structure_id+"/"+e.data.item_id}),t.is_saving=!1})).catch((function(t){return console.log(t)}))}}}),o=r,n=s("2877"),c=Object(n["a"])(o,a,i,!1,null,null,null);e["a"]=c.exports}}]);
//# sourceMappingURL=chunk-63623788.6e95a2ae.js.map