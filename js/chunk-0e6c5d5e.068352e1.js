(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0e6c5d5e"],{1835:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.status?a("b-row",{staticClass:"loader",attrs:{"align-v":"center"}},[a("b-col",[a("b-spinner"),a("br"),a("br"),a("strong",[e._v("Loading")])],1)],1):e._e()],1)},r=[],i={props:{status:{type:Boolean,default:!1,required:!1}},watch:{status:{immediate:!0,deep:!0,handler:function(){}}},data:function(){return{}},created:function(){},methods:{}},l=i,n=a("2877"),o=Object(n["a"])(l,s,r,!1,null,null,null);t["a"]=o.exports},"73e4":function(e,t,a){"use strict";t["a"]={data:function(){return{swal_confirm_submit_data:{title:"Please confirm your submission.",text:"Your changes will be saved after this process.",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, save it!",cancelButtonText:"Wait, im not done yet!"},swal_confirm_delete_data:{title:"Are you sure you want to delete this record?",text:"Note: This action will not be undone.",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete!",cancelButtonText:"No, I dont want to delete it!"},swal_transaction_completed_data:{title:"Transaction Completed!",text:"Data Successfully Saved.",icon:"success",showConfirmButton:!1,timer:1e3},swal_transaction_warning_data:{title:"Warning!",text:"Complete all necessary fields!",icon:"warning"},swal_transaction_error_data:{title:"Error!",text:"Please contact your Administrator.",icon:"error"}}},methods:{swalConfirmSubmit:function(e){this.$swal(this.swal_confirm_submit_data).then((function(t){e(t)}))},swalFieldsRequired:function(){this.$swal.fire("Error!","Please fill out all required fields","error")},swalRequestError:function(){this.$swal.fire(this.swal_transaction_error_data)},swalTransactionCompleted:function(){this.$swal.fire(this.swal_transaction_completed_data)},swalConfirmDelete:function(e){this.$swal(this.swal_confirm_delete_data).then((function(t){e(t)}))},swalTransactionWarning:function(){this.$swal.fire(this.swal_transaction_warning_data)}}}},"7d8d":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"animated fadeIn"},[a("b-tabs",{staticClass:"bg-white",attrs:{"content-class":"bg-white"}},[a("b-tab",{attrs:{active:""},scopedSlots:e._u([{key:"title",fn:function(){return[a("span",{staticClass:"d-md-down-none"},[e._v("All")])]},proxy:!0}])},[a("server-side-paginated-table",{ref:"displayTable",attrs:{fields:e.table_settings.fields,api_url:e.table_settings.api_url,delete_url:e.table_settings.delete_url,top_right_btn_redirect:!1}})],1)],1),a("b-modal",{attrs:{centered:"",size:"xl","body-class":"p-0","hide-footer":!0,"hide-header":!0,"modal-class":"xxl-modal"},on:{hide:function(t){return e.refresh()}},model:{value:e.voter_modal,callback:function(t){e.voter_modal=t},expression:"voter_modal"}},[a("div",{staticClass:"card bg-light mb-0"},[a("div",{staticClass:"card-header bg-dark text-white d-flex"},[a("h6",{staticClass:"mb-0"},[e._v("Voter Details")])]),a("div",{staticClass:"card-body bg-white",staticStyle:{"overflow-x":"auto"}},[a("voter",{attrs:{id:e.id}})],1)])])],1)},r=[],i=a("56d7"),l=a("73e4"),n=a("db49"),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"card bg-light mb-3"},[a("div",{staticClass:"card-header bg-dark text-white"},[a("b-row",[a("b-col",[e.loading?a("div",[a("strong",[e._v(" Fetching result... ")])]):a("div",[a("font-awesome-icon",{attrs:{icon:"database"}}),a("strong",[e._v(" "+e._s(e.list.total)+" ")]),a("small",[e._v("Result/s found")])],1)])],1)],1),a("div",{staticClass:"card-body bg-white"},[a("b-row",{staticClass:"mb-3"},[a("b-col",{attrs:{sm:"2"}},[a("b-form-select",{attrs:{options:e.options,size:"sm"},on:{change:e.changeDisplayNo},model:{value:e.selected_display_no,callback:function(t){e.selected_display_no=t},expression:"selected_display_no"}})],1),a("b-col",{attrs:{sm:"6","offset-sm":"4"}},[a("b-input-group",[a("b-input-group-prepend",[a("b-input-group-text",{staticClass:"bg-dark text-white"},[a("font-awesome-icon",{attrs:{icon:"search"}})],1)],1),a("b-form-input",{staticClass:"form-control",attrs:{type:"text",placeholder:"Search",autocomplete:"off",size:"sm"},nativeOn:{keypress:function(t){return e.searching(t)}},model:{value:e.search_term,callback:function(t){e.search_term=t},expression:"search_term"}}),a("b-input-group-append",[a("b-button",{staticClass:"bg-dark text-white px-4",attrs:{variant:"dark",size:"sm",disabled:""==e.search_term},on:{click:e.clearSearch}},[a("font-awesome-icon",{attrs:{icon:"times"}})],1)],1)],1)],1)],1),a("b-table",{attrs:{selectable:"",selectedVariant:"info","select-mode":"single",dark:e.dark,hover:e.hover,striped:e.striped,bordered:e.bordered,fixed:e.fixed,responsive:"sm",items:e.table_items,fields:e.captions,busy:e.loading,"show-empty":"","head-variant":"dark"},on:{"row-dblclicked":e.rowDbClicked},scopedSlots:e._u([{key:"cell(action)",fn:function(t){return[a("div",{staticClass:"text-center"},[a("b-button",{attrs:{variant:"danger",size:"sm"},on:{click:function(a){return e.deleteRow(t.item.id)}}},[a("font-awesome-icon",{attrs:{icon:"minus-circle"}}),e._v(" Delete ")],1)],1)]}},{key:"cell(name)",fn:function(t){return[0!=t.item.member_type_id?[a("font-awesome-icon",{staticClass:"text-success",attrs:{icon:"check-circle",title:"Member"}}),e._v(" "+e._s(t.item.name)),a("br"),null!=t.item.leader_id?a("small",[e._v("Leader : "+e._s(t.item.leader.name))]):e._e()]:[a("font-awesome-icon",{staticClass:"text-dark",attrs:{icon:"check-circle",title:"Not a Member"}}),e._v(" "+e._s(t.item.name)+" ")]]}}])},[a("div",{staticClass:"text-center  my-2",attrs:{slot:"table-busy"},slot:"table-busy"},[a("br"),a("b-spinner",{staticClass:"align-middle",attrs:{small:""}}),a("br"),a("br"),a("strong",[e._v("Loading")])],1)]),e.list.total>0?a("nav",[a("b-pagination",{staticClass:"mb-0",attrs:{disabled:e.loading,align:"right","total-rows":e.total_rows,"per-page":e.per_page},on:{input:e.getAll},model:{value:e.list.current_page,callback:function(t){e.$set(e.list,"current_page",t)},expression:"list.current_page"}})],1):e._e()],1)])])},c=[],d={name:"server-side-paginated-table",inheritAttrs:!1,mixins:[l["a"]],props:{hover:{type:Boolean,default:!0},striped:{type:Boolean,default:!0},bordered:{type:Boolean,default:!0},small:{type:Boolean,default:!0},fixed:{type:Boolean,default:!0},fields:{type:[Array,Object],default:function(){return[]}},dark:{type:Boolean,default:!1},api_url:{type:String,required:!0},delete_url:{type:String,required:!0},top_right_btn:{type:String,default:"",required:!1},top_right_btn_redirect:{type:Boolean,default:!0,required:!1}},data:function(){return{selected:[],list:{data:[],from:1,to:0,current_page:1,total:0,per_page:1},result:[],loading:!0,searchTimeout:function(){return{type:Function,default:function(){return{}}}},search_term:"",options:[{value:10,text:"Display 10 records"},{value:25,text:"Display 25 records"},{value:50,text:"Display 50 records"},{value:100,text:"Display 100 records"}],selected_display_no:10}},computed:{table_items:function(){return this.list.data},per_page:function(){return parseInt(this.list.per_page)},total_rows:function(){return parseInt(this.list.total)},captions:function(){return this.fields},total_selected:function(){return parseInt(this.selected.length)}},mounted:function(){this.getAll()},methods:{getAll:function(){var e=this;this.loading=!0,this.axios.get(this.api_url+"?page="+this.list.current_page+"&per_page="+this.selected_display_no+"&search="+this.search_term).then((function(t){var a=t.data;e.list=a,e.loading=!1})).catch((function(e){return console.log(e)}))},clickTopRightBtn:function(){i["bus"].$emit("serverSidePaginatedTableTopRightBtnClicked")},rowDbClicked:function(e){i["bus"].$emit("voterDbClick",e)},searching:function(e){"Enter"===e.key&&(this.search(),this.loading=!0)},search:function(){this.list.current_page=1,this.getAll()},clearSearch:function(){this.search_term="",this.getAll()},changeDisplayNo:function(){this.loading=!0,this.list.current_page=1,this.getAll()},deleteRow:function(e){var t=this;this.swalConfirmDelete((function(a){a.value&&(t.loading=!0,t.axios.delete(t.delete_url,{data:{id:e}}).then((function(e){t.getAll(),t.swal_transaction_completed_data.text="Record successfully deleted.",t.swalTransactionCompleted(),t.loading=!1})).catch((function(e){t.swalRequestError(),t.loading=!1})))}))}}},m=d,u=a("2877"),_=Object(u["a"])(m,o,c,!1,null,null,null),b=_.exports,p=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("loader",{attrs:{status:e.is_saving}}),a("b-row",{staticClass:"m-0 mb-2 rounded border"},[a("b-col",{staticClass:"p-2",attrs:{sm:"12",md:"3"}},[a("div",{staticClass:"w-100 border p-2 bg-dark rounded"},[""==e.params.form.image||null==e.params.form.image?a("img",{staticClass:"w-100 cursor-pointer",attrs:{src:"/img/image-not-found.jpg"},on:{click:function(t){e.upload_modal=!0}}}):a("img",{staticClass:"w-100 cursor-pointer",attrs:{src:e.assets_path.MANPOWERS+e.params.form.image},on:{click:function(t){e.upload_modal=!0}}})])]),a("b-col",{staticClass:"pl-0 pr-2"},[a("b-row",{staticClass:"m-0 border p-2 rounded my-2 loan-app-container"},[a("b-col",{staticClass:"p-0"},[a("b-row",{staticClass:"m-0 mb-3"},[a("b-col",{staticClass:"p-0",attrs:{md:"7",sm:"12"}},[a("b-row",{staticClass:"m-0"},[a("b-col",{staticClass:"text-center p-2 bg-dark text-white d-flex align-items-center justify-content-center",attrs:{cols:"2"}},[a("font-awesome-icon",{staticClass:"h2 mb-0",attrs:{icon:"user"}})],1),a("b-col",{staticClass:"p-3 bg-facebook text-white d-flex align-items-center"},[a("div",[a("h4",{staticClass:"mb-0"},[a("strong",[e._v(e._s(e.voter.name))]),e._v(" "),a("small",[null==e.voter.member_type?a("b-badge",{attrs:{variant:"danger"}},[e._v("Not a member")]):a("b-badge",{staticClass:"cursor-pointer",attrs:{variant:"success"},on:{click:function(t){return e.changeMemberType()}}},[e._v(e._s(e.voter.member_type.name))])],1)]),a("small",{staticClass:"text-muted text-uppercase font-weight-bold"},[e._v("NAME")])])])],1)],1),a("b-col",{staticClass:"p-0 pl-md-3 pl-sm-0 mt-sm-3 mt-md-0 mt-3",attrs:{md:"5",sm:"12"}},[a("b-row",{staticClass:"m-0 h-100"},[a("b-col",{staticClass:"text-center p-2 bg-dark text-white d-flex align-items-center justify-content-center",attrs:{cols:"2"}},[a("font-awesome-icon",{staticClass:"h2 mb-0",attrs:{icon:"user"}})],1),a("b-col",{staticClass:"p-3 bg-light d-flex align-items-center"},[a("div",[null!=e.voter.leader_id?a("h4",{staticClass:"mb-0 cursor-pointer",on:{click:function(t){return e.changeDetails(e.voter.leader_id)}}},[a("strong",[e._v(e._s(e.voter.leader.name))])]):a("h4",{staticClass:"mb-0"},[a("strong",[e._v("None")])]),a("small",{staticClass:"text-muted text-uppercase font-weight-bold"},[e._v("LEADER")])])])],1)],1)],1),null==e.voter.member_type?a("b-row",{staticClass:"m-0 p-0"},[a("b-col",{staticClass:"p-0"},[a("b-button",{staticClass:"mt-3",attrs:{block:"",variant:"success",size:"sm"},on:{click:function(t){e.member_modal=!0}}},[a("font-awesome-icon",{attrs:{icon:"check-circle"}}),e._v(" ADD AS A MEMBER ")],1)],1)],1):a("b-row",{staticClass:"m-0 p-0"},[null!=e.voter.leader_id?a("b-col",{attrs:{sm:"12"}},[a("b-button",{staticClass:"mt-3",attrs:{block:"",variant:"facebook",size:"sm"},on:{click:function(t){return e.changeLeader()}}},[a("font-awesome-icon",{attrs:{icon:"check-circle"}}),e._v(" CHANGE LEADER ")],1)],1):e._e(),null==e.voter.leader_id?a("b-col",{attrs:{sm:"12"}},[a("b-button",{staticClass:"mt-3",attrs:{block:"",variant:"success",size:"sm"},on:{click:function(t){return e.changeLeader()}}},[a("font-awesome-icon",{attrs:{icon:"plus-circle"}}),e._v(" ADD TO A LEADER ")],1)],1):e._e(),null!=e.voter.leader_id?a("b-col",{attrs:{sm:"12"}},[a("b-button",{staticClass:"mt-3 text-white",attrs:{block:"",variant:"warning",size:"sm"},on:{click:function(t){return e.removeLeader()}}},[a("font-awesome-icon",{attrs:{icon:"times-circle"}}),e._v(" REMOVE MY LEADER ")],1)],1):e._e(),a("b-col",{attrs:{sm:"12"}},[a("b-button",{staticClass:"mt-3",attrs:{block:"",variant:"danger",size:"sm"},on:{click:function(t){return e.removeMember()}}},[a("font-awesome-icon",{attrs:{icon:"times-circle"}}),e._v(" REMOVE AS A MEMBER ")],1)],1)],1)],1)],1)],1)],1),a("CCardGroup",{staticClass:"mb-4"},[a("CWidgetProgressIcon",{attrs:{header:e.formatNumber(Number(e.voter.total_child)),text:"Total Members",value:Number(100),color:"success"}},[a("CIcon",{attrs:{name:"cil-userFollow",height:"36"}})],1),a("CWidgetProgressIcon",{attrs:{header:"â‚± "+e.formatNumber(Number(e.voter.total_descendant_amount)),text:"Total Est. Budget",color:"warning",value:100}},[a("CIcon",{attrs:{name:"cil-tags",height:"36"}})],1)],1),a("b-form",{on:{submit:e.save}},[a("b-tabs",{attrs:{"content-class":"mt-3"}},[a("b-tab",{attrs:{title:"Members",active:""}},[a("members-table",{key:e.membersTableKey,ref:"membersTable",attrs:{fields:e.members_table_settings.fields,api_url:e.members_table_settings.api_url,remove_member_url:e.members_table_settings.remove_member_url,transfer_member_url:e.members_table_settings.transfer_member_url,id:e.id},on:{membersTableDbClick:e.membersTableDbClick}})],1)],1),a("div",{staticClass:"text-right mt-3"})],1),a("b-modal",{attrs:{centered:"",size:"md","body-class":"p-0","hide-footer":!0,"hide-header":!0},model:{value:e.upload_modal,callback:function(t){e.upload_modal=t},expression:"upload_modal"}},[a("div",{staticClass:"card mb-0"},[a("div",{staticClass:"card-header bg-facebook text-white d-flex align-items-center justify-content-between"},[a("h6",{staticClass:"mb-0"},[e._v(" Upload a Picture ")])]),a("div",{staticClass:"card-body position-relative"},[a("loader",{attrs:{status:e.is_saving}}),a("div",{staticClass:"custom-file mb-3"},[a("input",{staticClass:"custom-file-input",attrs:{type:"file",accept:"image/*",required:""},on:{change:e.onChange}}),a("label",{staticClass:"custom-file-label",attrs:{for:"validatedCustomFile"}},[e._v("Choose file...")])]),a("div",{staticClass:"mb-3",attrs:{id:"preview"}},[e.item.imageUrl?a("img",{staticClass:"w-100",attrs:{src:e.item.imageUrl}}):e._e()]),e.hide_submit_btn?a("b-progress",{attrs:{variant:e.loading_color,value:e.percentage,max:e.max_upload_percentage,"show-progress":"",animated:"",height:"1.5rem"}},[e.percentage>0?a("b-progress-bar",{attrs:{value:e.percentage}},[a("strong",[e._v(e._s(e.percentage)+"%")])]):e._e()],1):a("b-button",{attrs:{block:"",variant:"success",disabled:null==e.item.image,size:"sm"},on:{click:function(t){return e.upload()}}},[a("font-awesome-icon",{attrs:{icon:"check-circle"}}),e._v(" UPLOAD ")],1)],1)])]),a("b-modal",{attrs:{centered:"",size:"lg","body-class":"p-0","hide-footer":!0,"hide-header":!0},model:{value:e.member_modal,callback:function(t){e.member_modal=t},expression:"member_modal"}},[a("div",{staticClass:"card bg-light mb-0"},[a("div",{staticClass:"card-header bg-dark text-white d-flex"},[a("h6",{staticClass:"mb-0"},[e._v("Add as a Member")])]),a("div",{staticClass:"card-body bg-white",staticStyle:{"overflow-x":"auto"}},[a("loader",{attrs:{status:e.is_saving_member}}),a("b-list-group-item",[a("b-form-checkbox",{attrs:{name:"check-button",switch:""},model:{value:e.member.has_leader,callback:function(t){e.$set(e.member,"has_leader",t)},expression:"member.has_leader"}},[e._v(" This member has a leader ")])],1),a("b-list-group-item",[e.member.has_leader?a("b-badge",{staticClass:"h6 mb-0 cursor-pointer",attrs:{variant:"success"},on:{click:function(t){e.leader_search_modal=!0}}},[e._v(e._s(e.member.leader.name))]):a("b-badge",{staticClass:"h6 mb-0",attrs:{variant:"warning"}},[e._v("No leader")])],1),a("b-list-group-item",[a("select",{directives:[{name:"model",rawName:"v-model",value:e.member.member_type_id,expression:"member.member_type_id"}],staticClass:"form-control",attrs:{required:""},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.member,"member_type_id",t.target.multiple?a:a[0])}}},[a("option",{attrs:{value:""}},[e._v("Please Select Type of Member")]),e._l(e.member_types,(function(t){return a("option",{domProps:{value:t.id}},[e._v(" "+e._s(t.name)+" ")])}))],2)]),a("b-button",{staticClass:"mt-3",attrs:{block:"",variant:"success",size:"sm",disabled:e.isSaveDisabled},on:{click:function(t){return e.save()}}},[a("font-awesome-icon",{attrs:{icon:"check-circle"}}),e._v(" SAVE ")],1)],1)])]),a("b-modal",{attrs:{centered:"",size:"xl","body-class":"p-0","hide-footer":!0,"hide-header":!0},model:{value:e.leader_search_modal,callback:function(t){e.leader_search_modal=t},expression:"leader_search_modal"}},[a("div",{staticClass:"card bg-light mb-0"},[a("div",{staticClass:"card-header bg-dark text-white d-flex"},[a("h6",{staticClass:"mb-0"},[e._v("Look for a Leader")])]),a("div",{staticClass:"card-body bg-white",staticStyle:{"overflow-x":"auto"}},[a("loader",{attrs:{status:e.is_saving_leader}}),a("server-side-paginated-table",{ref:"displayTable3",attrs:{fields:e.table_settings.fields,api_url:e.table_settings.api_url,delete_url:e.table_settings.delete_url,top_right_btn_redirect:!1},on:{leadersTableDbClick:e.leadersTableDbClick}})],1)])]),a("b-modal",{attrs:{centered:"",size:"lg","body-class":"p-0","hide-footer":!0,"hide-header":!0},model:{value:e.change_leader_modal,callback:function(t){e.change_leader_modal=t},expression:"change_leader_modal"}},[a("div",{staticClass:"card bg-light mb-0"},[a("div",{staticClass:"card-header bg-dark text-white d-flex"},[a("h6",{staticClass:"mb-0"},[e._v("Change Leader")])]),a("div",{staticClass:"card-body bg-white",staticStyle:{"overflow-x":"auto"}},[a("loader",{attrs:{status:e.is_saving_member}}),a("b-list-group-item",[a("b-form-checkbox",{attrs:{name:"check-button",switch:"",disabled:""},model:{value:e.member.has_leader,callback:function(t){e.$set(e.member,"has_leader",t)},expression:"member.has_leader"}},[e._v(" This member has a leader ")])],1),a("b-list-group-item",[e.member.has_leader?a("b-badge",{staticClass:"h6 mb-0 cursor-pointer",attrs:{variant:"success"},on:{click:function(t){e.leader_search_modal=!0}}},[e._v(e._s(e.member.leader.name))]):a("b-badge",{staticClass:"h6 mb-0",attrs:{variant:"warning"}},[e._v("No leader")])],1),a("b-list-group-item",[a("select",{directives:[{name:"model",rawName:"v-model",value:e.member.member_type_id,expression:"member.member_type_id"}],staticClass:"form-control",attrs:{required:""},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.member,"member_type_id",t.target.multiple?a:a[0])}}},[a("option",{attrs:{value:""}},[e._v("Please Select Type of Member")]),e._l(e.member_types,(function(t){return a("option",{domProps:{value:t.id}},[e._v(" "+e._s(t.name)+" ")])}))],2)]),a("b-button",{staticClass:"mt-3",attrs:{block:"",variant:"success",size:"sm",disabled:e.isSaveDisabled},on:{click:function(t){return e.changeLeaderSave()}}},[a("font-awesome-icon",{attrs:{icon:"check-circle"}}),e._v(" SAVE ")],1)],1)])]),a("b-modal",{attrs:{centered:"",size:"lg","body-class":"p-0","hide-footer":!0,"hide-header":!0},model:{value:e.change_type_modal,callback:function(t){e.change_type_modal=t},expression:"change_type_modal"}},[a("div",{staticClass:"card bg-light mb-0"},[a("div",{staticClass:"card-header bg-dark text-white d-flex"},[a("h6",{staticClass:"mb-0"},[e._v("Change Member Type")])]),a("div",{staticClass:"card-body bg-white",staticStyle:{"overflow-x":"auto"}},[a("loader",{attrs:{status:e.is_saving_member}}),a("b-list-group-item",[a("select",{directives:[{name:"model",rawName:"v-model",value:e.member.member_type_id,expression:"member.member_type_id"}],staticClass:"form-control",attrs:{required:""},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.member,"member_type_id",t.target.multiple?a:a[0])}}},[a("option",{attrs:{value:""}},[e._v("Please Select Type of Member")]),e._l(e.member_types,(function(t){return a("option",{domProps:{value:t.id}},[e._v(" "+e._s(t.name)+" ")])}))],2)]),a("b-button",{staticClass:"mt-3",attrs:{block:"",variant:"success",size:"sm",disabled:e.isSaveDisabled},on:{click:function(t){return e.changeMemberTypeSave()}}},[a("font-awesome-icon",{attrs:{icon:"check-circle"}}),e._v(" SAVE ")],1)],1)])])],1)},h=[],g=a("1835"),f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"card bg-light mb-3"},[a("div",{staticClass:"card-header bg-dark text-white"},[a("b-row",[a("b-col",[e.loading?a("div",[a("strong",[e._v(" Fetching result... ")])]):a("div",[a("font-awesome-icon",{attrs:{icon:"database"}}),a("strong",[e._v(" "+e._s(e.list.total)+" ")]),a("small",[e._v("Result/s found")])],1)])],1)],1),a("div",{staticClass:"card-body bg-white"},[a("b-row",{staticClass:"mb-3"},[a("b-col",{attrs:{sm:"2"}},[a("b-form-select",{attrs:{options:e.options,size:"sm"},on:{change:e.changeDisplayNo},model:{value:e.selected_display_no,callback:function(t){e.selected_display_no=t},expression:"selected_display_no"}})],1),a("b-col",{attrs:{sm:"6","offset-sm":"4"}},[a("b-input-group",[a("b-input-group-prepend",[a("b-input-group-text",{staticClass:"bg-dark text-white"},[a("font-awesome-icon",{attrs:{icon:"search"}})],1)],1),a("b-form-input",{staticClass:"form-control",attrs:{type:"text",placeholder:"Search",autocomplete:"off",size:"sm"},nativeOn:{keypress:function(t){return e.searching(t)}},model:{value:e.search_term,callback:function(t){e.search_term=t},expression:"search_term"}}),a("b-input-group-append",[a("b-button",{staticClass:"bg-dark text-white px-4",attrs:{variant:"dark",size:"sm",disabled:""==e.search_term},on:{click:e.clearSearch}},[a("font-awesome-icon",{attrs:{icon:"times"}})],1)],1)],1)],1)],1),a("b-table",{attrs:{selectable:"",selectedVariant:"info","select-mode":"single",dark:e.dark,hover:e.hover,striped:e.striped,bordered:e.bordered,fixed:e.fixed,responsive:"sm",items:e.table_items,fields:e.captions,busy:e.loading,"show-empty":"","head-variant":"dark"},on:{"row-dblclicked":e.rowDbClicked},scopedSlots:e._u([{key:"cell(action)",fn:function(t){return[a("div",{staticClass:"text-center"},[a("b-button",{attrs:{variant:"danger",size:"sm"},on:{click:function(a){return e.deleteRow(t.item.id)}}},[a("font-awesome-icon",{attrs:{icon:"minus-circle"}}),e._v(" Delete ")],1)],1)]}}])},[a("div",{staticClass:"text-center  my-2",attrs:{slot:"table-busy"},slot:"table-busy"},[a("br"),a("b-spinner",{staticClass:"align-middle",attrs:{small:""}}),a("br"),a("br"),a("strong",[e._v("Loading")])],1)]),e.list.total>0?a("nav",[a("b-pagination",{staticClass:"mb-0",attrs:{disabled:e.loading,align:"right","total-rows":e.total_rows,"per-page":e.per_page},on:{input:e.getAll},model:{value:e.list.current_page,callback:function(t){e.$set(e.list,"current_page",t)},expression:"list.current_page"}})],1):e._e()],1)])])},v=[],y={name:"server-side-paginated-table",inheritAttrs:!1,mixins:[l["a"]],props:{hover:{type:Boolean,default:!0},striped:{type:Boolean,default:!0},bordered:{type:Boolean,default:!0},small:{type:Boolean,default:!0},fixed:{type:Boolean,default:!0},fields:{type:[Array,Object],default:function(){return[]}},dark:{type:Boolean,default:!1},api_url:{type:String,required:!0},delete_url:{type:String,required:!0},top_right_btn:{type:String,default:"",required:!1},top_right_btn_redirect:{type:Boolean,default:!0,required:!1}},data:function(){return{selected:[],list:{data:[],from:1,to:0,current_page:1,total:0,per_page:1},result:[],loading:!0,searchTimeout:function(){return{type:Function,default:function(){return{}}}},search_term:"",options:[{value:10,text:"Display 10 records"},{value:25,text:"Display 25 records"},{value:50,text:"Display 50 records"},{value:100,text:"Display 100 records"}],selected_display_no:10}},computed:{table_items:function(){return this.list.data},per_page:function(){return parseInt(this.list.per_page)},total_rows:function(){return parseInt(this.list.total)},captions:function(){return this.fields},total_selected:function(){return parseInt(this.selected.length)}},mounted:function(){this.getAll()},methods:{getAll:function(){var e=this;this.loading=!0,this.axios.get(this.api_url+"?page="+this.list.current_page+"&per_page="+this.selected_display_no+"&search="+this.search_term).then((function(t){var a=t.data;e.list=a,e.loading=!1})).catch((function(e){return console.log(e)}))},clickTopRightBtn:function(){i["bus"].$emit("leadersTableTopRightBtnClicked")},rowDbClicked:function(e){this.$emit("leadersTableDbClick",e)},searching:function(e){"Enter"===e.key&&(e.preventDefault(),this.search(),this.loading=!0)},search:function(){this.list.current_page=1,this.getAll()},clearSearch:function(){this.search_term="",this.getAll()},changeDisplayNo:function(){this.loading=!0,this.list.current_page=1,this.getAll()},deleteRow:function(e){var t=this;this.swalConfirmDelete((function(a){a.value&&(t.loading=!0,t.axios.delete(t.delete_url,{data:{id:e}}).then((function(e){t.getAll(),t.swal_transaction_completed_data.text="Record successfully deleted.",t.swalTransactionCompleted(),t.loading=!1})).catch((function(e){t.swalRequestError(),t.loading=!1})))}))}}},w=y,C=Object(u["a"])(w,f,v,!1,null,null,null),k=C.exports,x=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"card bg-light mb-3"},[a("div",{staticClass:"card-header bg-dark text-white"},[a("b-row",[a("b-col",[e.loading?a("div",[a("strong",[e._v(" Fetching result... ")])]):a("div",[a("font-awesome-icon",{attrs:{icon:"database"}}),a("strong",[e._v(" "+e._s(e.list.total)+" ")]),a("small",[e._v("Result/s found")])],1)]),a("b-col",{staticClass:"text-right"},[a("b-button",{attrs:{variant:"secondary",size:"sm"},on:{click:function(t){e.add_member_modal=!0}}},[a("font-awesome-icon",{attrs:{icon:"plus"}}),e._v(" Add Member ")],1),a("b-button",{staticClass:"ml-2",attrs:{variant:"secondary",size:"sm"},on:{click:e.openPrintPage}},[a("font-awesome-icon",{attrs:{icon:"print"}}),e._v(" Print ")],1)],1)],1)],1),a("div",{staticClass:"card-body bg-white"},[a("b-row",{staticClass:"mb-3"},[a("b-col",{attrs:{sm:"2"}},[a("b-form-select",{attrs:{options:e.options,size:"sm"},on:{change:e.changeDisplayNo},model:{value:e.selected_display_no,callback:function(t){e.selected_display_no=t},expression:"selected_display_no"}})],1),a("b-col",{attrs:{sm:"6","offset-sm":"4"}},[a("b-input-group",[a("b-input-group-prepend",[a("b-input-group-text",{staticClass:"bg-dark text-white"},[a("font-awesome-icon",{attrs:{icon:"search"}})],1)],1),a("b-form-input",{staticClass:"form-control",attrs:{type:"text",placeholder:"Search",autocomplete:"off",size:"sm"},nativeOn:{keypress:function(t){return e.searching(t)}},model:{value:e.search_term,callback:function(t){e.search_term=t},expression:"search_term"}}),a("b-input-group-append",[a("b-button",{staticClass:"bg-dark text-white px-4",attrs:{variant:"dark",size:"sm",disabled:""==e.search_term},on:{click:e.clearSearch}},[a("font-awesome-icon",{attrs:{icon:"times"}})],1)],1)],1)],1)],1),a("b-table",{staticClass:"cursor-pointer",attrs:{selectable:"",selectedVariant:"info","select-mode":"single",dark:e.dark,hover:e.hover,striped:e.striped,bordered:e.bordered,fixed:e.fixed,responsive:"sm",items:e.table_items,fields:e.captions,busy:e.loading,"show-empty":"","head-variant":"dark"},on:{"row-dblclicked":e.rowDbClicked},scopedSlots:e._u([{key:"cell(action)",fn:function(t){return[a("div",{staticClass:"text-center"},[a("b-button",{staticClass:"mr-2",attrs:{variant:"danger",size:"sm"},on:{click:function(a){return e.removeMember(t.item.id)}}},[a("font-awesome-icon",{attrs:{icon:"minus-circle"}}),e._v(" Remove as a Member ")],1),a("b-button",{staticClass:"text-white",attrs:{variant:"warning",size:"sm"},on:{click:function(a){return e.transferMember(t.item)}}},[a("font-awesome-icon",{attrs:{icon:"users"}}),e._v(" Transfer to other Leader ")],1)],1)]}}])},[a("div",{staticClass:"text-center  my-2",attrs:{slot:"table-busy"},slot:"table-busy"},[a("br"),a("b-spinner",{staticClass:"align-middle",attrs:{small:""}}),a("br"),a("br"),a("strong",[e._v("Loading")])],1)]),e.list.total>0?a("nav",[a("b-pagination",{staticClass:"mb-0",attrs:{disabled:e.loading,align:"right","total-rows":e.total_rows,"per-page":e.per_page},on:{input:e.getAll},model:{value:e.list.current_page,callback:function(t){e.$set(e.list,"current_page",t)},expression:"list.current_page"}})],1):e._e()],1)]),a("b-modal",{attrs:{centered:"",size:"xl","body-class":"p-0","hide-footer":!0,"hide-header":!0},model:{value:e.leader_search_modal,callback:function(t){e.leader_search_modal=t},expression:"leader_search_modal"}},[a("div",{staticClass:"card bg-light mb-0"},[a("div",{staticClass:"card-header bg-dark text-white d-flex"},[a("h6",{staticClass:"mb-0"},[e._v("Transfer to other Leader")])]),a("div",{staticClass:"card-body bg-white",staticStyle:{"overflow-x":"auto"}},[a("loader",{attrs:{status:e.is_saving_leader}}),a("leaders-table",{attrs:{fields:e.table_settings.fields,api_url:e.table_settings.api_url,delete_url:e.table_settings.delete_url,top_right_btn_redirect:!1},on:{leadersTableDbClick:e.leadersTableDbClick}})],1)])]),a("b-modal",{attrs:{centered:"",size:"xl","body-class":"p-0","hide-footer":!0,"hide-header":!0},model:{value:e.add_member_modal,callback:function(t){e.add_member_modal=t},expression:"add_member_modal"}},[a("div",{staticClass:"card bg-light mb-0"},[a("div",{staticClass:"card-header bg-dark text-white d-flex"},[a("h6",{staticClass:"mb-0"},[e._v("Add member")])]),a("div",{staticClass:"card-body bg-white",staticStyle:{"overflow-x":"auto"}},[a("loader",{attrs:{status:e.is_saving_leader}}),a("b-row",{staticClass:"m-0 mb-3"},[a("b-col",{staticClass:"text-center p-2 bg-dark text-white d-flex align-items-center justify-content-center",attrs:{cols:"1"}},[a("font-awesome-icon",{staticClass:"h2 mb-0",attrs:{icon:"list"}})],1),a("b-col",{staticClass:"p-3 bg-facebook text-white d-flex align-items-center"},[a("div",{staticClass:"w-100"},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.add_member.member_type_id,expression:"add_member.member_type_id"}],staticClass:"form-control",attrs:{required:""},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.add_member,"member_type_id",t.target.multiple?a:a[0])}}},e._l(e.member_types,(function(t){return a("option",{domProps:{value:t.id}},[e._v(" "+e._s(t.name)+" ")])})),0),a("small",{staticClass:"text-muted text-uppercase font-weight-bold"},[e._v("PLEASE SELECT MEMBER TYPE")])])])],1),a("add-members-table",{key:e.members_table_key,attrs:{fields:e.voters_all_table_settings.fields,api_url:e.voters_all_table_settings.api_url,delete_url:e.voters_all_table_settings.delete_url,top_right_btn_redirect:!1},on:{addMembersTableDbClick:e.addMembersTableDbClick}})],1)])])],1)},A=[],T=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"card bg-light mb-3"},[a("div",{staticClass:"card-header bg-dark text-white"},[a("b-row",[a("b-col",[e.loading?a("div",[a("strong",[e._v(" Fetching result... ")])]):a("div",[a("font-awesome-icon",{attrs:{icon:"database"}}),a("strong",[e._v(" "+e._s(e.list.total)+" ")]),a("small",[e._v("Result/s found")])],1)])],1)],1),a("div",{staticClass:"card-body bg-white"},[a("b-row",{staticClass:"mb-3"},[a("b-col",{attrs:{sm:"2"}},[a("b-form-select",{attrs:{options:e.options,size:"sm"},on:{change:e.changeDisplayNo},model:{value:e.selected_display_no,callback:function(t){e.selected_display_no=t},expression:"selected_display_no"}})],1),a("b-col",{attrs:{sm:"6","offset-sm":"4"}},[a("b-input-group",[a("b-input-group-prepend",[a("b-input-group-text",{staticClass:"bg-dark text-white"},[a("font-awesome-icon",{attrs:{icon:"search"}})],1)],1),a("b-form-input",{staticClass:"form-control",attrs:{type:"text",placeholder:"Search",autocomplete:"off",size:"sm",debounce:"500"},nativeOn:{keypress:function(t){return e.searching(t)}},model:{value:e.search_term,callback:function(t){e.search_term=t},expression:"search_term"}}),a("b-input-group-append",[a("b-button",{staticClass:"bg-dark text-white px-4",attrs:{variant:"dark",size:"sm",disabled:""==e.search_term},on:{click:e.clearSearch}},[a("font-awesome-icon",{attrs:{icon:"times"}})],1)],1)],1)],1)],1),a("b-table",{attrs:{selectable:"",selectedVariant:"info","select-mode":"single",dark:e.dark,hover:e.hover,striped:e.striped,bordered:e.bordered,fixed:e.fixed,responsive:"sm",items:e.table_items,fields:e.captions,busy:e.loading,"show-empty":"","head-variant":"dark"},on:{"row-dblclicked":e.rowDbClicked},scopedSlots:e._u([{key:"cell(action)",fn:function(t){return[a("div",{staticClass:"text-center"},[a("b-button",{attrs:{variant:"danger",size:"sm"},on:{click:function(a){return e.deleteRow(t.item.id)}}},[a("font-awesome-icon",{attrs:{icon:"minus-circle"}}),e._v(" Delete ")],1)],1)]}},{key:"cell(name)",fn:function(t){return[0!=t.item.member_type_id?[a("font-awesome-icon",{staticClass:"text-success",attrs:{icon:"check-circle",title:"Member"}}),e._v(" "+e._s(t.item.name)),a("br"),null!=t.item.leader_id?a("small",[e._v("Leader : "+e._s(t.item.leader.name))]):e._e()]:[a("font-awesome-icon",{staticClass:"text-dark",attrs:{icon:"check-circle",title:"Not a Member"}}),e._v(" "+e._s(t.item.name)+" ")]]}}])},[a("div",{staticClass:"text-center  my-2",attrs:{slot:"table-busy"},slot:"table-busy"},[a("br"),a("b-spinner",{staticClass:"align-middle",attrs:{small:""}}),a("br"),a("br"),a("strong",[e._v("Loading")])],1)]),e.list.total>0?a("nav",[a("b-pagination",{staticClass:"mb-0",attrs:{disabled:e.loading,align:"right","total-rows":e.total_rows,"per-page":e.per_page},on:{input:e.getAll},model:{value:e.list.current_page,callback:function(t){e.$set(e.list,"current_page",t)},expression:"list.current_page"}})],1):e._e()],1)])])},D=[],E={name:"add-members-table",inheritAttrs:!1,mixins:[l["a"]],props:{hover:{type:Boolean,default:!0},striped:{type:Boolean,default:!0},bordered:{type:Boolean,default:!0},small:{type:Boolean,default:!0},fixed:{type:Boolean,default:!0},fields:{type:[Array,Object],default:function(){return[]}},dark:{type:Boolean,default:!1},api_url:{type:String,required:!0},delete_url:{type:String,required:!0},top_right_btn:{type:String,default:"",required:!1},top_right_btn_redirect:{type:Boolean,default:!0,required:!1}},data:function(){return{selected:[],list:{data:[],from:1,to:0,current_page:1,total:0,per_page:1},result:[],loading:!0,searchTimeout:function(){return{type:Function,default:function(){return{}}}},search_term:"",options:[{value:10,text:"Display 10 records"},{value:25,text:"Display 25 records"},{value:50,text:"Display 50 records"},{value:100,text:"Display 100 records"}],selected_display_no:10}},computed:{table_items:function(){return this.list.data},per_page:function(){return parseInt(this.list.per_page)},total_rows:function(){return parseInt(this.list.total)},captions:function(){return this.fields},total_selected:function(){return parseInt(this.selected.length)}},mounted:function(){this.getAll()},methods:{getAll:function(){var e=this;this.loading=!0,this.axios.get(this.api_url+"?page="+this.list.current_page+"&per_page="+this.selected_display_no+"&search="+this.search_term).then((function(t){var a=t.data;e.list=a,e.loading=!1})).catch((function(e){return console.log(e)}))},clickTopRightBtn:function(){i["bus"].$emit("leadersTableTopRightBtnClicked")},rowDbClicked:function(e){this.$emit("addMembersTableDbClick",e)},searching:function(e){"Enter"===e.key&&(e.preventDefault(),this.search(),this.loading=!0)},search:function(){this.list.current_page=1,this.getAll()},clearSearch:function(){this.search_term="",this.getAll()},changeDisplayNo:function(){this.loading=!0,this.list.current_page=1,this.getAll()},deleteRow:function(e){var t=this;this.swalConfirmDelete((function(a){a.value&&(t.loading=!0,t.axios.delete(t.delete_url,{data:{id:e}}).then((function(e){t.getAll(),t.swal_transaction_completed_data.text="Record successfully deleted.",t.swalTransactionCompleted(),t.loading=!1})).catch((function(e){t.swalRequestError(),t.loading=!1})))}))}}},S=E,R=Object(u["a"])(S,T,D,!1,null,null,null),B=R.exports,M={name:"members-table",inheritAttrs:!1,components:{Loader:g["a"],LeadersTable:k,AddMembersTable:B},mixins:[l["a"]],props:{hover:{type:Boolean,default:!0},striped:{type:Boolean,default:!0},bordered:{type:Boolean,default:!0},small:{type:Boolean,default:!0},fixed:{type:Boolean,default:!0},fields:{type:[Array,Object],default:function(){return[]}},dark:{type:Boolean,default:!1},api_url:{type:String,required:!0},remove_member_url:{type:String,required:!0},transfer_member_url:{type:String,required:!0},top_right_btn:{type:String,default:"",required:!1},top_right_btn_redirect:{type:Boolean,default:!0,required:!1},id:{type:Number,required:!0}},data:function(){return{selected:[],list:{data:[],from:1,to:0,current_page:1,total:0,per_page:1},result:[],loading:!0,searchTimeout:function(){return{type:Function,default:function(){return{}}}},search_term:"",options:[{value:10,text:"Display 10 records"},{value:25,text:"Display 25 records"},{value:50,text:"Display 50 records"},{value:100,text:"Display 100 records"}],selected_display_no:10,leader_search_modal:!1,is_saving_leader:!1,selected_voter_id:"",table_settings:{api_url:"voters/leaders",delete_url:"",fields:[{key:"precint.name",label:"PRECINT"},{key:"name",label:"NAME"},{key:"barangay.name",label:"BARANGAY"},{key:"address",label:"ADDRESS"},{key:"member_type.name",label:"TYPE"},{key:"total_child",label:"MEMBERS"}]},member:{has_leader:!1,leader:{id:-1,name:"Look for leader"},member_type_id:""},add_member:{has_leader:!0,leader:{id:-1},member_type_id:1},add_member_modal:!1,member_types:[],voters_all_table_settings:{api_url:"voters/all",delete_url:"",fields:[{key:"precint.name",label:"PRECINT"},{key:"name",label:"NAME"},{key:"barangay.name",label:"BARANGAY"},{key:"address",label:"ADDRESS"},{key:"member_type.name",label:"TYPE"},{key:"total_child",label:"MEMBERS"}]},members_table_key:0}},computed:{table_items:function(){return this.list.data},per_page:function(){return parseInt(this.list.per_page)},total_rows:function(){return parseInt(this.list.total)},captions:function(){return this.fields},total_selected:function(){return parseInt(this.selected.length)}},mounted:function(){this.getAll(),this.getMemberTypes()},methods:{getAll:function(){var e=this;this.loading=!0,this.axios.get(this.api_url+"?id="+this.id+"&page="+this.list.current_page+"&per_page="+this.selected_display_no+"&search="+this.search_term).then((function(t){var a=t.data;e.list=a,e.loading=!1})).catch((function(e){return console.log(e)}))},clickTopRightBtn:function(){i["bus"].$emit("membersTableTopRightBtnClicked")},rowDbClicked:function(e){this.$emit("membersTableDbClick",e)},searching:function(e){"Enter"===e.key&&(e.preventDefault(),this.search(),this.loading=!0)},search:function(){this.list.current_page=1,this.getAll()},clearSearch:function(){this.search_term="",this.getAll()},changeDisplayNo:function(){this.loading=!0,this.list.current_page=1,this.getAll()},removeMember:function(e){var t=this;this.swalConfirmSubmit((function(a){a.value&&(t.loading=!0,t.axios.post(t.remove_member_url,{id:e}).then((function(e){t.getAll(),t.swal_transaction_completed_data.text="Member Successfully Removed",t.swalTransactionCompleted(),t.loading=!1})).catch((function(e){t.swalRequestError(),t.loading=!1})))}))},transferMember:function(e){this.member=e,this.member.member_id=e.id,this.selected_voter_id=e.id,this.leader_search_modal=!0},leadersTableDbClick:function(e){var t=this;this.swalConfirmSubmit((function(a){a.value&&(t.is_saving_leader=!0,e.id==t.id?(t.swal_transaction_error_data.text="Choose another Leader...",t.swalRequestError(),t.is_saving_leader=!1):(t.member.has_leader=!0,t.member.leader=e,t.axios.post("voters/validate-leader",{leader_id:e.id,member_id:t.selected_voter_id}).then((function(e){t.axios.post(t.transfer_member_url,t.member).then((function(e){t.getAll(),t.swal_transaction_completed_data.text="Member Successfully Removed",t.swalTransactionCompleted(),t.loading=!1})).catch((function(e){t.swalRequestError(),t.loading=!1})),t.leader_search_modal=!1,t.is_saving_leader=!1})).catch((function(e){t.swal_transaction_error_data.text=e.response.data,t.swalRequestError(),t.is_saving_leader=!1}))))}))},getMemberTypes:function(){var e=this;this.axios.get("member-types/all").then((function(t){e.member_types=t.data})).catch((function(e){return console.log(e)}))},addMembersTableDbClick:function(e){var t=this;this.is_saving_leader=!0,this.axios.post("voters/add-to-leader",{leader_id:this.id,member_id:e.id,member_type_id:this.add_member.member_type_id}).then((function(e){t.swalTransactionCompleted(),t.is_saving_leader=!1,t.members_table_key++,t.getAll()})).catch((function(e){t.swal_transaction_error_data.text=e.response.data,t.swalRequestError(),t.is_saving_leader=!1}))},openPrintPage:function(){var e="/print/per-leader/"+this.id;window.open(e,"_blank")}}},N=M,q=Object(u["a"])(N,x,A,!1,null,null,null),z=q.exports,L={mixins:[l["a"]],components:{Loader:g["a"],ServerSidePaginatedTable:k,MembersTable:z},props:{id:{type:Number,default:-1}},data:function(){return{params:{form:{id:-1,employee_id:"",first_name:"",middle_name:"",last_name:"",suffix:"",nickname:"",dob:"",job_description_id:"",blood_type_id:"",shirt_size_id:"",marital_status_id:"",gender_id:"",province_id:"",city_id:"",barangay:"",street_address:"",contact_number:"",work_email:"",other_email:"",sss_number:"",philhealth_number:"",pagibig_number:"",date_hired:"",probation_end_date:"",regularization_date:"",image:"",manpower_emergency_contacts:[],manpower_social_media:[],manpower_work_experiences:[],manpower_educations:[],manpower_dependents:[],is_payroll:1,shift_type_id:null,salary_type_id:null,sss:"",hdmf:"",phic:""},fields:{genders:[],marital_statuses:[],provinces:[],blood_types:[],shirt_sizes:[],preference_categories:[],shift_types:[],salary_types:[]},cash_advances:[],payments:[]},is_saving_member:!1,is_saving:!1,item:{image:null,imageUrl:null,imageName:""},assets_path:{},upload_modal:!1,percentage:0,loading_color:"facebook",max_upload_percentage:100,hide_submit_btn:!1,cameraModal:!1,voter:{id:-1,name:"",member_type_id:"",address:"",barangay:{},children:[]},member_modal:!1,member:{has_leader:!1,leader:{id:-1,name:"Look for leader"},member_type_id:""},leader_search_modal:!1,table_settings:{api_url:"voters/leaders",delete_url:"",fields:[{key:"precint.name",label:"PRECINT"},{key:"name",label:"NAME"},{key:"barangay.name",label:"BARANGAY"},{key:"address",label:"ADDRESS"},{key:"member_type.name",label:"TYPE"},{key:"total_child",label:"MEMBERS"}]},member_types:[],change_leader_modal:!1,is_saving_leader:!1,change_type_modal:!1,members_table_settings:{api_url:"voters/members",remove_member_url:"voters/remove-member",transfer_member_url:"voters/change-leader",fields:[{key:"precint.name",label:"PRECINT"},{key:"name",label:"NAME"},{key:"barangay.name",label:"BARANGAY"},{key:"address",label:"ADDRESS"},{key:"member_type.name",label:"TYPE"},{key:"total_child",label:"MEMBERS"},{key:"total_descendant_amount",label:"BUDGET"},{key:"action"}]},membersTableKey:0}},computed:{completeAddress:function(){if(null===this.params.form.city)return""},isSaveDisabled:function(){return!!(this.member.has_leader&&-1==this.member.leader.id||""==this.member.member_type_id)}},created:function(){this.assets_path=n["a"],this.get(),this.getMemberTypes()},methods:{leadersTableDbClick:function(e){var t=this;this.is_saving_leader=!0,e.id==this.voter.id?(this.swal_transaction_error_data.text="Leader is NOT VALID...",this.swalRequestError(),this.is_saving_leader=!1):this.axios.post("voters/validate-leader",{leader_id:e.id,member_id:this.id}).then((function(a){t.leader_search_modal=!1,t.member.leader=e,t.is_saving_leader=!1})).catch((function(e){t.swal_transaction_error_data.text=e.response.data,t.swalRequestError(),t.is_saving_leader=!1}))},membersTableDbClick:function(e){this.changeDetails(e.id)},getMemberTypes:function(){var e=this;this.axios.get("member-types/all").then((function(t){e.member_types=t.data})).catch((function(e){return console.log(e)}))},get:function(){var e=this;this.is_saving=!0,this.membersTableKey++,this.axios.get("voters/get",{params:{id:this.id}}).then((function(t){e.voter=t.data,e.is_saving=!1})).catch((function(e){return console.log(e)}))},save:function(){var e=this;this.swalConfirmSubmit((function(t){t.value&&(e.is_saving_member=!0,e.member.member_id=e.voter.id,e.axios.post("voters/add-member",e.member).then((function(t){e.swalTransactionCompleted(),e.is_saving_member=!1,e.member_modal=!1,e.get()})).catch((function(t){e.swal_transaction_error_data.text=t.response.data,e.swalRequestError(),e.is_saving_member=!1})))}))},removeLeader:function(){var e=this;this.swalConfirmSubmit((function(t){t.value&&(e.is_saving=!0,e.axios.post("voters/remove-leader",{id:e.id}).then((function(t){e.swalTransactionCompleted(),e.is_saving=!1,e.get()})).catch((function(t){e.swal_transaction_error_data.text=t.response.data,e.swalRequestError(),e.is_saving=!1})))}))},changeDetails:function(e){this.id=e,this.get()},changeLeader:function(){this.member.has_leader=!0,this.member.member_type_id=this.voter.member_type_id,this.change_leader_modal=!0},changeMemberType:function(){this.member.member_type_id=this.voter.member_type_id,this.change_type_modal=!0},changeLeaderSave:function(){var e=this;this.swalConfirmSubmit((function(t){t.value&&(e.is_saving_member=!0,e.member.member_id=e.voter.id,e.axios.post("voters/change-leader",e.member).then((function(t){e.swalTransactionCompleted(),e.is_saving_member=!1,e.change_leader_modal=!1,e.get()})).catch((function(t){e.swal_transaction_error_data.text=t.response.data,e.swalRequestError(),e.is_saving_member=!1})))}))},changeMemberTypeSave:function(){var e=this;this.swalConfirmSubmit((function(t){t.value&&(e.is_saving_member=!0,e.member.member_id=e.voter.id,e.axios.post("voters/change-member-type",e.member).then((function(t){e.swalTransactionCompleted(),e.is_saving_member=!1,e.change_type_modal=!1,e.get()})).catch((function(t){e.swal_transaction_error_data.text=t.response.data,e.swalRequestError(),e.is_saving_member=!1})))}))},removeMember:function(){var e=this;this.swalConfirmSubmit((function(t){t.value&&(e.is_saving=!0,e.axios.post("voters/remove-member",{id:e.id}).then((function(t){e.get(),e.swal_transaction_completed_data.text="Member Successfully Removed",e.swalTransactionCompleted(),e.is_saving=!1})).catch((function(t){e.swalRequestError(),e.is_saving=!1})))}))},payroll:function(e){var t=this;event.preventDefault();var a=1==e?"INCLUDE":"EXCLUDE";this.swal_confirm_submit_data.title="Do you want to "+a+" this employee from daily payroll?",this.swalConfirmSubmit((function(a){if(a.value){t.is_saving=!0;var s={id:t.params.form.id,is_payroll:e};t.axios.post("maintenance/manpowers/update",s).then((function(e){t.swalTransactionCompleted(),t.is_saving=!1,t.get()})).catch((function(e){t.swal_transaction_error_data.text=e.response.data,t.swalRequestError(),t.is_saving=!1}))}}))},dataURItoBlob:function(e){var t;t=e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):unescape(e.split(",")[1]);for(var a=e.split(",")[0].split(":")[1].split(";")[0],s=new Uint8Array(t.length),r=0;r<t.length;r++)s[r]=t.charCodeAt(r);return new Blob([s],{type:a})},onChange:function(e){var t=e.target.files[0];this.item.image=t,this.item.imageUrl=URL.createObjectURL(t)},upload:function(){var e=this,t=new FormData,a=this.item.image;""===this.item.imageName?t.append("file",a):t.append("file",a,this.item.imageName),t.append("manpower_id",this.params.form.id),this.hide_submit_btn=!0,this.axios.post("maintenance/manpowers/upload-image",t,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:function(t){e.percentage=parseInt(Math.round(100*t.loaded/t.total))}}).then((function(t){e.loading_color="success",e.swalTransactionCompleted(),e.upload_modal=!1,console.log(t.data),e.params.form.image=t.data})).catch((function(e){}))},formatNumber:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.toLocaleString("en-US",{minimumFractionDigits:t,maximumFractionDigits:t})}}},P=L,$=Object(u["a"])(P,p,h,!1,null,null,null),I=$.exports,O={mixins:[l["a"]],components:{ServerSidePaginatedTable:b,Voter:I},data:function(){return{table_settings:{api_url:"voters/all",delete_url:"",fields:[{key:"precint.name",label:"PRECINT"},{key:"name",label:"NAME"},{key:"barangay.name",label:"BARANGAY"},{key:"address",label:"ADDRESS"},{key:"member_type.name",label:"TYPE"},{key:"total_child",label:"MEMBERS"}]},assets_path:{},voter:{},id:-1,voter_modal:!1}},created:function(){var e=this;this.assets_path=n["a"],i["bus"].$on("voterDbClick",(function(t){e.voter_modal=!0,e.id=t.id}))},methods:{refresh:function(){this.$refs.displayTable.getAll()}}},j=O,U=Object(u["a"])(j,s,r,!1,null,null,null);t["default"]=U.exports}}]);
//# sourceMappingURL=chunk-0e6c5d5e.068352e1.js.map