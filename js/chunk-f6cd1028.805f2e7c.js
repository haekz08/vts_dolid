(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f6cd1028"],{"4e73":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.visibility?s("div",{staticClass:"animated fadeIn"},[s("b-row",{staticClass:"loader",attrs:{"align-v":"center"}},[s("b-col",[s("b-spinner"),s("br"),s("br"),s("strong",[t._v(t._s(t.label))])],1)],1)],1):t._e()])},i=[],r={name:"Loading",props:{label:{type:String,default:"Loading..."},visibility:{type:Boolean,default:!1}}},o=r,n=s("2877"),c=Object(n["a"])(o,a,i,!1,null,"ce53867a",null);e["a"]=c.exports},"73e4":function(t,e,s){"use strict";e["a"]={data:function(){return{swal_confirm_submit_data:{title:"Please confirm your submission.",text:"Your changes will be saved after this process.",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, save it!",cancelButtonText:"Wait, im not done yet!"},swal_confirm_delete_data:{title:"Are you sure you want to delete this record?",text:"Note: This action will not be undone.",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete!",cancelButtonText:"No, I dont want to delete it!"},swal_transaction_completed_data:{title:"Transaction Completed!",text:"Data Successfully Saved.",icon:"success",showConfirmButton:!1,timer:1e3},swal_transaction_warning_data:{title:"Warning!",text:"Complete all necessary fields!",icon:"warning"},swal_transaction_error_data:{title:"Error!",text:"Please contact your Administrator.",icon:"error"}}},methods:{swalConfirmSubmit:function(t){this.$swal(this.swal_confirm_submit_data).then((function(e){t(e)}))},swalFieldsRequired:function(){this.$swal.fire("Error!","Please fill out all required fields","error")},swalRequestError:function(){this.$swal.fire(this.swal_transaction_error_data)},swalTransactionCompleted:function(){this.$swal.fire(this.swal_transaction_completed_data)},swalConfirmDelete:function(t){this.$swal(this.swal_confirm_delete_data).then((function(e){t(e)}))},swalTransactionWarning:function(){this.$swal.fire(this.swal_transaction_warning_data)}}}},cf1f:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("b-row",{staticClass:"m-0",staticStyle:{"text-align":"center"}},[s("b-col",{attrs:{cols:"12"}},[s("b-row",{staticStyle:{"text-align":"center"}},[s("b-col",{attrs:{cols:"4"}},[s("h1",{staticClass:"mt-5"},[t._v(t._s(t.date))]),s("vue-clock")],1),s("b-col",{staticClass:"bg-dark p-3",attrs:{cols:"4"}},[t.isCameraOpen?s("div",{staticClass:"camera-box"},[s("video",{directives:[{name:"show",rawName:"v-show",value:!t.isPhotoTaken,expression:"!isPhotoTaken"}],ref:"camera",attrs:{autoplay:"",width:"100%"}}),s("canvas",{directives:[{name:"show",rawName:"v-show",value:t.isPhotoTaken,expression:"isPhotoTaken"}],ref:"canvas",attrs:{id:"photoTaken",width:650,height:537.5}})]):t._e()]),s("b-col",{attrs:{cols:"4"}},[s("b-form",{on:{submit:function(e){return e.preventDefault(),t.takePhoto(e)}}},[s("h4",{staticClass:"mt-2"},[t._v("Please scan your ID")]),s("b-form-input",{attrs:{type:"password",id:"id_number",autofocus:"",required:"",autocomplete:"off"},model:{value:t.form.id_number,callback:function(e){t.$set(t.form,"id_number",e)},expression:"form.id_number"}})],1),"undefined"!=typeof t.settings.mode_description?s("div",{staticClass:"text-left mt-2"},[s("span",{staticClass:"d-block p-1"},[t._v("Location : "),s("strong",[t._v(t._s(t.settings.server_project_location_structure_item.location))])]),s("span",{staticClass:"d-block bg-dark text-white p-1"},[t._v("Structure : "),s("strong",[t._v(t._s(t.settings.server_project_location_structure_item.structure))])]),s("span",{staticClass:"d-block p-1"},[t._v("Item : "),s("strong",[t._v(t._s(t.settings.server_project_location_structure_item.item))])]),s("span",{staticClass:"d-block p-1 bg-warning h2 text-center cursor-pointer",on:{click:function(e){return t.changeSettings()}}},[s("strong",[t._v(t._s(t.settings.mode_description))])])]):t._e()],1)],1)],1),s("b-col",[s("server-side-paginated-table",{ref:"displayTable",attrs:{fields:t.table_settings.fields,api_url:t.table_settings.api_url,delete_url:t.table_settings.delete_url,top_right_btn_redirect:!1}})],1),s("b-modal",{attrs:{centered:"",size:"md","body-class":"p-0","hide-footer":!0,"hide-header":!0},model:{value:t.settings_modal,callback:function(e){t.settings_modal=e},expression:"settings_modal"}},[s("div",{staticClass:"card mb-0"},[s("div",{staticClass:"card-header bg-dark text-white d-flex align-items-center justify-content-between"},[s("h6",{staticClass:"mb-0"},[t._v(" Change Settings ")])]),s("div",{staticClass:"card-body position-relative"},[s("div",{staticClass:"bg-light mb-4 cursor-pointer",on:{click:function(e){return t.changeProject()}}},[s("span",{staticClass:"d-block p-1 text-dark"},[t._v("Location : "),s("strong",[t._v(t._s(t.settings_form.server_project_location_structure_item.location))])]),s("span",{staticClass:"d-block bg-dark text-white p-1"},[t._v("Structure : "),s("strong",[t._v(t._s(t.settings_form.server_project_location_structure_item.structure))])]),s("span",{staticClass:"d-block p-1 text-dark"},[t._v("Item : "),s("strong",[t._v(t._s(t.settings_form.server_project_location_structure_item.item))])])]),s("b-form-group",{attrs:{label:"Mode:",description:"This field is required"}},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.settings_form.mode,expression:"settings_form.mode"}],staticClass:"form-control form-control-sm",attrs:{required:""},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.settings_form,"mode",e.target.multiple?s:s[0])}}},[s("option",{attrs:{value:"1"}},[t._v("AM IN")]),s("option",{attrs:{value:"2"}},[t._v("AM OUT")]),s("option",{attrs:{value:"3"}},[t._v("PM IN")]),s("option",{attrs:{value:"4"}},[t._v("PM OUT")]),s("option",{attrs:{value:"5"}},[t._v("OT IN")]),s("option",{attrs:{value:"6"}},[t._v("OT OUT")])])]),s("b-form-group",{attrs:{label:"Password:",description:"This field is required"}},[s("b-form-input",{attrs:{type:"password",required:"",size:"sm"},model:{value:t.settings_form.password,callback:function(e){t.$set(t.settings_form,"password",e)},expression:"settings_form.password"}})],1),s("b-button",{attrs:{size:"sm",block:"",variant:"success"},on:{click:t.saveSettings}},[s("font-awesome-icon",{attrs:{icon:"save"}}),t._v(" Save Settings")],1)],1)])]),s("b-modal",{attrs:{centered:"",size:"xl","body-class":"p-0","hide-footer":!0,"hide-header":!0},model:{value:t.projects_modal,callback:function(e){t.projects_modal=e},expression:"projects_modal"}},[s("div",{staticClass:"card mb-0"},[s("div",{staticClass:"card-header bg-dark text-white d-flex align-items-center justify-content-between"},[s("h6",{staticClass:"mb-0"},[t._v(" Select Project ")])]),s("div",{staticClass:"card-body position-relative"},[s("b-input-group",{attrs:{prepend:"Search"}},[s("b-form-input",{attrs:{placeholder:"Type your keyword here...",autocomplete:"off",debounce:"500"},model:{value:t.project_search,callback:function(e){t.project_search=e},expression:"project_search"}})],1),s("table",{staticClass:"table table-bordered mt-3 ta"},[s("thead",[s("tr",[s("th",[t._v("Location")]),s("th",[t._v("Structure")]),s("th",[t._v("Item")])])]),s("tbody",t._l(t.project_items,(function(e){return s("tr",{staticClass:"cursor-pointer",on:{dblclick:function(s){return t.selectProject(e)}}},[s("td",[t._v(t._s(e.location))]),s("td",[t._v(t._s(e.structure))]),s("td",[t._v(t._s(e.item))])])})),0)])],1)])])],1)},i=[],r=s("db49"),o=s("4e73"),n=s("3215"),c=s("73e4"),l=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"card bg-light mb-3"},[s("div",{staticClass:"card-header bg-dark text-white text-left"},[s("b-row",[s("b-col",[t.loading?s("div",[s("strong",[t._v(" Fetching result... ")])]):s("div",[s("font-awesome-icon",{attrs:{icon:"database"}}),s("strong",[t._v(" "+t._s(t.list.total)+" ")]),s("small",[t._v("Result/s found")])],1)])],1)],1),s("div",{staticClass:"card-body bg-white"},[s("b-row",{staticClass:"mb-3"},[s("b-col",{attrs:{sm:"2"}},[s("b-form-select",{attrs:{options:t.options,size:"sm"},on:{change:t.changeDisplayNo},model:{value:t.selected_display_no,callback:function(e){t.selected_display_no=e},expression:"selected_display_no"}})],1),s("b-col",{attrs:{sm:"6","offset-sm":"4"}},[s("b-input-group",[s("b-input-group-prepend",[s("b-input-group-text",{staticClass:"bg-dark text-white"},[s("font-awesome-icon",{attrs:{icon:"search"}})],1)],1),s("b-form-input",{staticClass:"form-control",attrs:{type:"text",placeholder:"Search",autocomplete:"off",size:"sm"},nativeOn:{keypress:function(e){return t.searching(e)},keyup:function(e){return t.search(e)}},model:{value:t.search_term,callback:function(e){t.search_term=e},expression:"search_term"}}),s("b-input-group-append",[s("b-button",{staticClass:"bg-dark text-white px-4",attrs:{variant:"dark",size:"sm",disabled:""==t.search_term},on:{click:t.clearSearch}},[s("font-awesome-icon",{attrs:{icon:"times"}})],1)],1)],1)],1)],1),s("b-table",{attrs:{selectable:"",selectedVariant:"info","select-mode":"single",dark:t.dark,hover:t.hover,striped:t.striped,bordered:t.bordered,fixed:t.fixed,responsive:"sm",items:t.table_items,fields:t.captions,busy:t.loading,"show-empty":"","head-variant":"dark"},on:{"row-dblclicked":t.rowDbClicked},scopedSlots:t._u([{key:"cell(id_number)",fn:function(e){return[s("div",{staticClass:"text-left"},[s("span",{staticClass:"d-block bg-dark text-white p-1",staticStyle:{"min-width":"300px"}},[t._v("ID Number : "),s("strong",[t._v(t._s(e.item.manpower_details.id_number))])]),s("span",{staticClass:"d-block p-1"},[t._v("Name : "),s("strong",[t._v(t._s(e.item.manpower_details.full_name))])]),s("span",{staticClass:"d-block p-1"},[t._v("Location : "),s("strong",[t._v(t._s(e.item.server_project_location_structure_item.location))])]),s("span",{staticClass:"d-block bg-dark text-white p-1"},[t._v("Structure : "),s("strong",[t._v(t._s(e.item.server_project_location_structure_item.structure))])]),s("span",{staticClass:"d-block p-1"},[t._v("Item : "),s("strong",[t._v(t._s(e.item.server_project_location_structure_item.item))])]),s("span",{staticClass:"d-block bg-dark text-white p-1"},[t._v("Date : "),s("strong",[t._v(t._s(e.item.formatted_date.other_formats.format_1))])])])]}},{key:"cell(action)",fn:function(e){return[s("div",{staticClass:"text-center"},[s("b-button",{attrs:{variant:"danger",size:"sm"},on:{click:function(s){return t.deleteRow(e.item.id)}}},[s("font-awesome-icon",{attrs:{icon:"minus-circle"}}),t._v(" Delete ")],1)],1)]}},{key:"cell(am_in)",fn:function(e){return[""!=e.item.formatted_am_in.default?s("div",{staticClass:"text-center"},[s("img",{staticClass:"cursor-pointer",attrs:{src:t.assets_path.EMPLOYEE_LOGS+e.item.am_in_image,width:"200px"}}),s("span",{staticClass:"d-block"},[t._v(t._s(e.item.formatted_am_in.other_formats.format_1))])]):t._e()]}},{key:"cell(am_out)",fn:function(e){return[""!=e.item.formatted_am_out.default?s("div",{staticClass:"text-center"},[s("img",{staticClass:"cursor-pointer",attrs:{src:t.assets_path.EMPLOYEE_LOGS+e.item.am_out_image,width:"200px"}}),s("span",{staticClass:"d-block"},[t._v(t._s(e.item.formatted_am_out.other_formats.format_1))])]):t._e()]}},{key:"cell(pm_in)",fn:function(e){return[""!=e.item.formatted_pm_in.default?s("div",{staticClass:"text-center"},[s("img",{staticClass:"cursor-pointer",attrs:{src:t.assets_path.EMPLOYEE_LOGS+e.item.pm_in_image,width:"200px"}}),s("span",{staticClass:"d-block"},[t._v(t._s(e.item.formatted_pm_in.other_formats.format_1))])]):t._e()]}},{key:"cell(pm_out)",fn:function(e){return[""!=e.item.formatted_pm_out.default?s("div",{staticClass:"text-center"},[s("img",{staticClass:"cursor-pointer",attrs:{src:t.assets_path.EMPLOYEE_LOGS+e.item.pm_out_image,width:"200px"}}),s("span",{staticClass:"d-block"},[t._v(t._s(e.item.formatted_pm_out.other_formats.format_1))])]):t._e()]}},{key:"cell(ot_in)",fn:function(e){return[""!=e.item.formatted_ot_in.default?s("div",{staticClass:"text-center"},[s("img",{staticClass:"cursor-pointer",attrs:{src:t.assets_path.EMPLOYEE_LOGS+e.item.ot_in_image,width:"200px"}}),s("span",{staticClass:"d-block"},[t._v(t._s(e.item.formatted_ot_in.other_formats.format_1))])]):t._e()]}},{key:"cell(ot_out)",fn:function(e){return[""!=e.item.formatted_ot_out.default?s("div",{staticClass:"text-center"},[s("img",{staticClass:"cursor-pointer",attrs:{src:t.assets_path.EMPLOYEE_LOGS+e.item.ot_out_image,width:"200px"}}),s("span",{staticClass:"d-block"},[t._v(t._s(e.item.formatted_ot_out.other_formats.format_1))])]):t._e()]}}])},[s("div",{staticClass:"text-center  my-2",attrs:{slot:"table-busy"},slot:"table-busy"},[s("br"),s("b-spinner",{staticClass:"align-middle",attrs:{small:""}}),s("br"),s("br"),s("strong",[t._v("Loading")])],1)]),t.list.total>0?s("nav",[s("b-pagination",{staticClass:"mb-0",attrs:{disabled:t.loading,align:"right","total-rows":t.total_rows,"per-page":t.per_page},on:{input:t.getAll},model:{value:t.list.current_page,callback:function(e){t.$set(t.list,"current_page",e)},expression:"list.current_page"}})],1):t._e()],1)])])},d=[],_=s("56d7"),u={name:"server-side-paginated-table",inheritAttrs:!1,mixins:[c["a"]],props:{hover:{type:Boolean,default:!0},striped:{type:Boolean,default:!0},bordered:{type:Boolean,default:!0},small:{type:Boolean,default:!0},fixed:{type:Boolean,default:!0},fields:{type:[Array,Object],default:function(){return[]}},dark:{type:Boolean,default:!1},api_url:{type:String,required:!0},delete_url:{type:String,required:!0},top_right_btn:{type:String,default:"",required:!1},top_right_btn_redirect:{type:Boolean,default:!0,required:!1}},data:function(){return{selected:[],list:{data:[],from:1,to:0,current_page:1,total:0,per_page:1},result:[],loading:!0,searchTimeout:function(){return{type:Function,default:function(){return{}}}},search_term:"",options:[{value:10,text:"Display 10 records"},{value:25,text:"Display 25 records"},{value:50,text:"Display 50 records"},{value:100,text:"Display 100 records"}],selected_display_no:10,assets_path:{}}},computed:{table_items:function(){return this.list.data},per_page:function(){return parseInt(this.list.per_page)},total_rows:function(){return parseInt(this.list.total)},captions:function(){return this.fields},total_selected:function(){return parseInt(this.selected.length)}},mounted:function(){this.assets_path=r["a"],this.getAll()},methods:{getAll:function(){var t=this;this.loading=!0,this.axios.get(this.api_url+"?page="+this.list.current_page+"&per_page="+this.selected_display_no+"&search="+this.search_term).then((function(e){var s=e.data;t.list=s,t.loading=!1})).catch((function(t){return console.log(t)}))},clickTopRightBtn:function(){_["bus"].$emit("serverSidePaginatedTableTopRightBtnClicked")},rowDbClicked:function(t){_["bus"].$emit("serverSidePaginatedTableDbClick",t)},searching:function(){this.loading=!0,clearTimeout(this.searchTimeout)},search:function(){var t=this;this.searchTimeout=setTimeout((function(){t.list.current_page=1,t.getAll(),clearTimeout(t.searchTimeout)}),1e3)},clearSearch:function(){this.search_term="",this.getAll()},changeDisplayNo:function(){this.loading=!0,this.list.current_page=1,this.getAll()},deleteRow:function(t){var e=this;this.swalConfirmDelete((function(s){s.value&&(e.loading=!0,e.axios.delete(e.delete_url,{data:{id:t}}).then((function(t){e.getAll(),e.swal_transaction_completed_data.text="Record successfully deleted.",e.swalTransactionCompleted(),e.loading=!1})).catch((function(t){e.swalRequestError(),e.loading=!1})))}))}}},m=u,p=s("2877"),f=Object(p["a"])(m,l,d,!1,null,null,null),h=f.exports,g={name:"Login",mixins:[c["a"]],components:{Loading:o["a"],VueClock:n["a"],ServerSidePaginatedTable:h},data:function(){return{table_settings:{api_url:"logs/recent",delete_url:"roles/delete",fields:[{key:"id_number",label:"ID Number"},{key:"am_in",label:"AM IN"},{key:"am_out",label:"AM OUT"},{key:"pm_in",label:"PM IN"},{key:"pm_out",label:"PM OUT"},{key:"ot_in",label:"OT IN"},{key:"ot_out",label:"OT OUT"}]},form:{id_number:"",image:""},settings_form:{server_project_location_structure_item_id:"",mode:1,server_project_location_structure_item:{},password:""},date:"",isCameraOpen:!1,isPhotoTaken:!1,isShotPhoto:!1,isLoading:!1,link:"#",captured_image:"",settings:{},settings_modal:!1,projects_modal:!1,project_search:"",project_items:[]}},watch:{project_search:{immediate:!0,deep:!0,handler:function(){var t=this;this.axios.get("items/search",{params:{search:this.project_search}}).then((function(e){t.project_items=e.data})).catch((function(t){return console.log(t)}))}}},created:function(){this.toggleCamera();var t=new Date;this.date=t.toDateString(),this.getSettings()},methods:{toggleCamera:function(){this.isCameraOpen?(this.isCameraOpen=!1,this.isPhotoTaken=!1,this.isShotPhoto=!1,this.stopCameraStream()):(this.isCameraOpen=!0,this.createCameraElement())},createCameraElement:function(){var t=this;this.isLoading=!0;var e=window.constraints={audio:!1,video:!0};navigator.mediaDevices.getUserMedia(e).then((function(e){t.isLoading=!1,t.$refs.camera.srcObject=e})).catch((function(e){t.isLoading=!1,alert("May the browser didn't support or there is some errors.")}))},stopCameraStream:function(){var t=this.$refs.camera.srcObject.getTracks();t.forEach((function(t){t.stop()}))},takePhoto:function(){var t=this,e=new Date,s=this.$refs.canvas.getContext("2d");s.fillStyle="yellow",s.drawImage(this.$refs.camera,0,0,650,537.5),s.fillText(e,10,520);var a=document.getElementById("photoTaken").toDataURL("image/jpeg");this.captured_image=a,this.form.image=a,this.axios.post("logs/save",this.form).then((function(e){t.$refs.displayTable.getAll(),t.swalTransactionCompleted(),t.form.id_number=""})).catch((function(e){t.swal_transaction_error_data.text=e.response.data,t.swalRequestError(),t.form.id_number=""}))},downloadImage:function(){var t=document.getElementById("downloadPhoto"),e=document.getElementById("photoTaken").toDataURL("image/jpeg").replace("image/jpeg","image/octet-stream");t.setAttribute("href",e)},getSettings:function(){var t=this;this.axios.get("settings/get").then((function(e){t.settings=e.data})).catch((function(t){return console.log(t)}))},changeSettings:function(){this.settings_modal=!0;var t={date:this.settings.date,server_project_location_structure_item_id:this.settings.server_project_location_structure_item_id,mode:this.settings.mode,server_project_location_structure_item:this.settings.server_project_location_structure_item};this.settings_form=t},changeProject:function(){this.projects_modal=!0},selectProject:function(t){this.settings_form.server_project_location_structure_item_id=t.server_project_location_structure_item_id,this.settings_form.server_project_location_structure_item=t,this.projects_modal=!1},saveSettings:function(){var t=this;this.axios.post("settings/save",this.settings_form).then((function(e){t.swalTransactionCompleted(),t.settings_modal=!1,t.getSettings()})).catch((function(e){t.swal_transaction_error_data.text=e.response.data,t.swalRequestError()}))}}},v=g,b=Object(p["a"])(v,a,i,!1,null,null,null);e["default"]=b.exports}}]);
//# sourceMappingURL=chunk-f6cd1028.805f2e7c.js.map